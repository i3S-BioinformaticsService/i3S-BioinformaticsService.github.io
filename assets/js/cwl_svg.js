!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.vueCwl=t():e.vueCwl=t()}(self,()=>(()=>{"use strict";var n={985:(e,t,n)=>{Object.defineProperty(t,"X",{value:!0}),n(8635),n(2405),n(5090);var i=n(1034),o=n(1292);t.Z={data:function(){return{selectedNode:null,workflow:null,cwlState:null}},computed:{cwlModel:function(){return i.WorkflowFactory.from(this.cwlState)}},props:{cwlUrl:{type:String,default:null,note:'A URL to request for the initial CWL object from. Used as an alternative to\n                the "cwl" prop'},cwl:{type:Object,default:null,note:"The JSON object representing the CWL workflow to render"},editingEnabled:{type:Boolean,default:!1,note:"True if the workflow is editable"},plugins:{type:Array,default:function(){return[]},note:"A list of CWL plugins to use in the CWL rendering"}},mounted:function(){var t=this;this.cwlUrl&&fetch(this.cwlUrl,{headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(e){t.cwlState=e})},watch:{cwl:function(){this.cwlState=this.cwl},workflow:function(){this.$emit("workflow-changed",this.workflow)},cwlState:function(){this.workflow=new o.Workflow({editingEnabled:!0,model:this.cwlModel,svgRoot:this.$refs.svg,plugins:[new o.SVGArrangePlugin,new o.SVGEdgeHoverPlugin,new o.SVGNodeMovePlugin({movementSpeed:10}),new o.SVGPortDragPlugin,new o.SelectionPlugin,new o.ZoomPlugin]}),this.workflow.fitToViewport();var e=this.workflow.getPlugin(o.SVGArrangePlugin);e&&e.arrange()}}}},7665:(e,t,n)=>{n.d(t,{Z:()=>o});var t=n(7537),t=n.n(t),i=n(3645),n=n.n(i)()(t());n.push([e.id,"svg.cwl-workflow{background:#fff;color:#333;font-family:sans-serif;padding:0;width:100%;display:block;transform:translateZ(0)}svg.cwl-workflow [tabindex]:active,svg.cwl-workflow [tabindex]:focus{outline:none}svg.cwl-workflow .hidden{display:none}svg.cwl-workflow .workflow{user-select:none}svg.cwl-workflow .pan-handle{fill:transparent}svg.cwl-workflow .label{fill:#333;stroke:#fff;stroke-width:4px;text-anchor:middle;paint-order:stroke;stroke-linecap:butt;stroke-linejoin:miter}svg.cwl-workflow .node-icon{fill:#333;stroke:#333;stroke-width:3px;stroke-linecap:round}svg.cwl-workflow .node .outer{fill:#fff;stroke:#9a9a9a;stroke-width:2px}svg.cwl-workflow .node .inner{stroke:0}svg.cwl-workflow .node.input .inner{fill:#c3c3c3}svg.cwl-workflow .node.output .inner{fill:#c3c3c3}svg.cwl-workflow .node.step .inner{fill:#11a7a7}svg.cwl-workflow .node .core .inner,svg.cwl-workflow .node .core .node-icon{pointer-events:none}svg.cwl-workflow .node:hover .port .label{transition:all 0.1s;opacity:1}svg.cwl-workflow .node .port{fill:#9a9a9a}svg.cwl-workflow .node .port:hover{stroke:#676767;stroke-width:2px}svg.cwl-workflow .node .port.output-port .label{text-anchor:start;transform:translate(10px, 0)}svg.cwl-workflow .node .port.input-port .label{text-anchor:end;transform:translate(-10px, 0)}svg.cwl-workflow .node .port .label{fill:#333;opacity:0;font-size:.9em;user-select:none;transition:all .1s;pointer-events:none;alignment-baseline:middle}svg.cwl-workflow .edge:hover .inner{stroke:#11a7a7}svg.cwl-workflow .edge .inner,svg.cwl-workflow .edge .outer{fill:none;stroke-linecap:round}svg.cwl-workflow .edge .inner{stroke-width:2px;stroke:#9a9a9a}svg.cwl-workflow .edge .outer{stroke-width:5px;stroke:#fff}svg.cwl-workflow .unselectable{user-select:none;cursor:pointer}\n","",{version:3,sources:["webpack://./node_modules/cwl-svg/src/assets/styles/style.scss","webpack://./node_modules/cwl-svg/src/assets/styles/_variables.scss"],names:[],mappings:"AAAA,iBAEE,eCEsB,CDDtB,UCOe,CDNf,sBCQsB,CDNtB,SAAU,CACV,UAAW,CACX,aAAc,CACd,uBAAwB,CAT1B,qEAaI,YAAa,CAbjB,yBAiBI,YAAa,CAjBjB,2BAqBI,gBAAiB,CArBrB,6BA0BI,gBAAiB,CA1BrB,wBA8BI,SCpBa,CDqBb,WC3BoB,CD4BpB,gBChBoB,CDkBpB,kBAAmB,CACnB,kBAAmB,CACnB,mBAAoB,CACpB,qBAAsB,CArC1B,4BA0CI,SChCa,CDiCb,WCjCa,CDkCb,gBCHwB,CDKxB,oBAAqB,CA9CzB,8BAoDM,SChDkB,CDiDlB,cClD4B,CDmD5B,gBCxBuB,CD9B7B,8BA0DM,QAAS,CA1Df,oCA8DM,YC9ByB,CDhC/B,qCAkEM,YCjC0B,CDjChC,mCAsEM,YCpEiB,CDFvB,4EA8EQ,mBAAoB,CA9E5B,0CAoFQ,mBChD4B,CDiD5B,SAAU,CArFlB,6BA0FM,YCvF4B,CDHlC,mCA6FQ,cChD+C,CDiD/C,gBChDqB,CD9C7B,gDAkGQ,iBAAkB,CAClB,4BAA6B,CAnGrC,+CAuGQ,eAAgB,CAChB,6BAA8B,CAxGtC,oCA4GQ,SClGS,CDoGT,SAAU,CACV,cAAe,CACf,gBAAiB,CACjB,kBAAmB,CACnB,mBAAoB,CACpB,yBAA0B,CAnHlC,oCA2HM,cCzHiB,CDFvB,4DA+HM,SAAU,CACV,oBAAqB,CAhI3B,8BAoIM,gBC9GuB,CD+GvB,cClI4B,CDHlC,8BAwIM,gBChHuB,CDiHvB,WCrIkB,CDJxB,+BA+II,gBAAiB,CACjB,cAAe",sourcesContent:["svg.cwl-workflow {\n\n  background: $background;\n  color: $font-color;\n  font-family: $font-family;\n\n  padding: 0;\n  width: 100%;\n  display: block;\n  transform: translateZ(0);\n\n  // We will add tabindex to some elements because they should be focusable, but style should not change\n  [tabindex]:active, [tabindex]:focus {\n    outline: none;\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  .workflow {\n    user-select: none;\n  }\n\n  .pan-handle {\n    // Cannot be “none” because it wouldn't have a clickable zone\n    fill: transparent;\n  }\n\n  .label {\n    fill: $font-color;\n    stroke: $label-stroke-color;\n    stroke-width: $label-stroke-width;\n\n    text-anchor: middle;\n    paint-order: stroke;\n    stroke-linecap: butt;\n    stroke-linejoin: miter;\n\n  }\n\n  .node-icon {\n    fill: $node-icon-fill-color;\n    stroke: $node-icon-stroke-color;\n    stroke-width: $node-icon-stroke-width;\n\n    stroke-linecap: round;\n  }\n\n  .node {\n\n    .outer {\n      fill: $node-outer-fill-color;\n      stroke: $node-outer-stroke-color;\n      stroke-width: $node-outer-stroke-width;\n    }\n\n    .inner {\n      stroke: 0;\n    }\n\n    &.input .inner {\n      fill: $node-input-fill-color;\n    }\n\n    &.output .inner {\n      fill: $node-output-fill-color;\n    }\n\n    &.step .inner {\n      fill: $node-step-fill-color;\n    }\n\n    // Prevent mouseenter/leave events when hovering over nested elements\n    // otherwise, cursor would change while moving the mouse through the node\n    .core {\n      .inner,\n      .node-icon {\n        pointer-events: none;\n      }\n    }\n\n    &:hover {\n      .port .label {\n        transition: $node-hover-port-transition;\n        opacity: 1;\n      }\n    }\n\n    .port {\n      fill: $port-fill-color;\n\n      &:hover {\n        stroke: $port-hover-stroke-color;\n        stroke-width: $port-hover-stroke-width;\n      }\n\n      &.output-port .label {\n        text-anchor: start;\n        transform: translate(10px, 0);\n      }\n\n      &.input-port .label {\n        text-anchor: end;\n        transform: translate(-10px, 0);\n      }\n\n      .label {\n        fill: $port-label-color;\n\n        opacity: 0;\n        font-size: .9em;\n        user-select: none;\n        transition: all .1s;\n        pointer-events: none;\n        alignment-baseline: middle;\n      }\n    }\n  }\n\n  .edge {\n\n    &:hover .inner {\n      stroke: $edge-inner-hover-color;\n    }\n\n    .inner, .outer {\n      fill: none;\n      stroke-linecap: round;\n    }\n\n    .inner {\n      stroke-width: $edge-inner-stroke-width;\n      stroke: $edge-inner-stroke-color;\n    }\n    .outer {\n      stroke-width: $edge-outer-stroke-width;\n      stroke: $edge-outer-stroke-color;\n    }\n\n  }\n\n  .unselectable {\n    user-select: none;\n    cursor: pointer;\n  }\n\n}","\n// Colors\n$color-primary: #11a7a7 !default;\n$color-neutral: rgb(154, 154, 154) !default;\n$background-color: white !default;\n\n// Workflow\n$background: $background-color !default;\n\n// Fonts\n$font-color: #333 !default;\n$text-stroke: #fff !default;\n$font-family: sans-serif !default;\n\n// Labels\n$label-stroke-color: $background-color !default;\n$label-stroke-width: 4px !default;\n\n// Edges\n$edge-inner-color: #222 !default;\n$edge-outer-color: #fff !default;\n$edge-inner-hover-color: $color-primary !default;\n$edge-inner-stroke-width: 2px !default;\n$edge-inner-stroke-color: $color-neutral !default;\n$edge-outer-stroke-width: 5px !default;\n$edge-outer-stroke-color: $background-color !default;\n\n// Nodes\n$node-outer-fill-color: $background-color !default;\n$node-outer-stroke-color: $color-neutral !default;\n$node-outer-stroke-width: 2px !default;\n\n$node-input-fill-color: #c3c3c3 !default;\n$node-output-fill-color: #c3c3c3 !default;\n$node-step-fill-color: $color-primary !default;\n\n$node-hover-port-transition: all .1s !default;\n\n// Node Icons\n$node-icon-fill-color: $font-color !default;\n$node-icon-stroke-color: $font-color !default;\n$node-icon-stroke-width: 3px !default;\n\n// Ports\n$port-fill-color: $color-neutral !default;\n$port-hover-stroke-color: darken($port-fill-color, 20%) !default;\n$port-hover-stroke-width: 2px !default;\n$port-label-color: $font-color !default;\n$port-label-size: .9em !default;\n\n"],sourceRoot:""}]);const o=n},7728:(e,t,n)=>{n.d(t,{Z:()=>o});var t=n(7537),t=n.n(t),i=n(3645),n=n.n(i)()(t());n.push([e.id,".cwl-workflow.__plugin-port-drag .port.__port-drag-suggestion{fill:#11a7a7}.cwl-workflow.__plugin-port-drag .port.__port-drag-suggestion .label{opacity:1}.cwl-workflow.__plugin-port-drag .port.__port-drag-snap{stroke:#676767;stroke-width:2px}.cwl-workflow.__plugin-port-drag .node.__port-drag-snap.__port-drag-snap-input .input-port .label,.cwl-workflow.__plugin-port-drag .node.__port-drag-snap.__port-drag-snap-output .output-port .label{opacity:1}.cwl-workflow.__plugin-port-drag.__port-drag-dragging{pointer-events:none}.cwl-workflow.__plugin-port-drag .edge.__port-drag-dragging .inner{stroke:#9a9a9a !important;stroke-dasharray:5}.cwl-workflow.__plugin-port-drag .ghost{stroke:#c3c3c3;stroke-width:2px;stroke-dasharray:5 3;fill:#fff}\n","",{version:3,sources:["webpack://./node_modules/cwl-svg/src/plugins/port-drag/style.scss","webpack://./node_modules/cwl-svg/src/assets/styles/_variables.scss","webpack://./node_modules/cwl-svg/src/plugins/port-drag/_variables.scss"],names:[],mappings:"AAIA,8DAII,YCNmB,CDEvB,qEAOM,SAAU,CAPhB,wDAcI,cC2BmD,CD1BnD,gBEfwB,CFA5B,sMAyBQ,SAAU,CAzBlB,sDAkCI,mBAAoB,CAlCxB,mEAsCI,yBAAuC,CACvC,kBErCsB,CFF1B,wCA4CI,cChB2B,CDiB3B,gBAAiB,CAEjB,oBAAqB,CACrB,SChDoB",sourcesContent:['@import "variables";\n\n// Expectations:\n//\n.cwl-workflow.__plugin-port-drag {\n\n  // Ports that are marked as suggested should be coloured differently and have visible labels\n  .port.__port-drag-suggestion {\n    fill: $port-suggested-fill;\n\n    .label {\n      opacity: 1;\n    }\n\n  }\n\n  // Port that is marked as a snap choice should have a stroke around it\n  .port.__port-drag-snap {\n    stroke: $port-snap-highlight-stroke;\n    stroke-width: $port-snap-stroke-width;\n  }\n\n  .node.__port-drag-snap {\n\n    // Nodes that are parents of snap choice ports should make all port labels on that side visible\n    &.__port-drag-snap-input .input-port,\n    &.__port-drag-snap-output .output-port {\n\n      .label {\n        opacity: 1;\n      }\n\n    }\n  }\n\n  // While dragging from a port, hover effects over other elements should not be triggered\n  // This also prevents zooming in and out using mouse scroll while dragging\n  &.__port-drag-dragging {\n    pointer-events: none;\n  }\n\n  .edge.__port-drag-dragging .inner {\n    stroke: $edge-dragged-stroke !important;\n    stroke-dasharray: $edge-dragged-dasharray;\n\n  }\n\n  .ghost {\n    stroke: $ghost-node-stroke-color;\n    stroke-width: 2px;\n\n    stroke-dasharray: 5 3;\n    fill: $ghost-node-fill-color;\n  }\n\n}',"\n// Colors\n$color-primary: #11a7a7 !default;\n$color-neutral: rgb(154, 154, 154) !default;\n$background-color: white !default;\n\n// Workflow\n$background: $background-color !default;\n\n// Fonts\n$font-color: #333 !default;\n$text-stroke: #fff !default;\n$font-family: sans-serif !default;\n\n// Labels\n$label-stroke-color: $background-color !default;\n$label-stroke-width: 4px !default;\n\n// Edges\n$edge-inner-color: #222 !default;\n$edge-outer-color: #fff !default;\n$edge-inner-hover-color: $color-primary !default;\n$edge-inner-stroke-width: 2px !default;\n$edge-inner-stroke-color: $color-neutral !default;\n$edge-outer-stroke-width: 5px !default;\n$edge-outer-stroke-color: $background-color !default;\n\n// Nodes\n$node-outer-fill-color: $background-color !default;\n$node-outer-stroke-color: $color-neutral !default;\n$node-outer-stroke-width: 2px !default;\n\n$node-input-fill-color: #c3c3c3 !default;\n$node-output-fill-color: #c3c3c3 !default;\n$node-step-fill-color: $color-primary !default;\n\n$node-hover-port-transition: all .1s !default;\n\n// Node Icons\n$node-icon-fill-color: $font-color !default;\n$node-icon-stroke-color: $font-color !default;\n$node-icon-stroke-width: 3px !default;\n\n// Ports\n$port-fill-color: $color-neutral !default;\n$port-hover-stroke-color: darken($port-fill-color, 20%) !default;\n$port-hover-stroke-width: 2px !default;\n$port-label-color: $font-color !default;\n$port-label-size: .9em !default;\n\n",'@import "../../assets/styles/variables";\n\n$port-suggested-fill: $color-primary !default;\n$port-snap-highlight-stroke: $port-hover-stroke-color !default;\n$port-snap-stroke-width: 2px !default;\n$edge-dragged-stroke: $edge-inner-stroke-color !default;\n$edge-dragged-dasharray: 5 !default;\n$ghost-node-stroke-color: $node-input-fill-color !default;\n$ghost-node-fill-color: $background-color !default;'],sourceRoot:""}]);const o=n},3371:(e,t,n)=>{n.d(t,{Z:()=>o});var t=n(7537),t=n.n(t),i=n(3645),n=n.n(i)()(t());n.push([e.id,".cwl-workflow.__plugin-selection .node,.cwl-workflow.__plugin-selection .edge{cursor:pointer}.cwl-workflow.__plugin-selection.__selection-plugin-fade .node:not(.__selection-plugin-highlight) .outer{stroke:#e6e6e6}.cwl-workflow.__plugin-selection.__selection-plugin-fade .node:not(.__selection-plugin-highlight) .inner{fill:#b1dfdf}.cwl-workflow.__plugin-selection.__selection-plugin-fade .node:not(.__selection-plugin-highlight).input .inner{fill:#e8e8e8}.cwl-workflow.__plugin-selection.__selection-plugin-fade .node:not(.__selection-plugin-highlight).output .inner{fill:#e8e8e8}.cwl-workflow.__plugin-selection.__selection-plugin-fade .node:not(.__selection-plugin-highlight) .label{fill:#7e7d7d}.cwl-workflow.__plugin-selection.__selection-plugin-fade .node:not(.__selection-plugin-highlight) .port{fill:#e6e6e6}.cwl-workflow.__plugin-selection.__selection-plugin-fade .edge:not(.__selection-plugin-highlight) .inner{stroke:#e6e6e6}.cwl-workflow.__plugin-selection .port.__selection-plugin-highlight .label{opacity:1}.cwl-workflow.__plugin-selection .__selection-plugin-selected.edge .inner{stroke:#11a7a7}.cwl-workflow.__plugin-selection .__selection-plugin-selected.node .outer{stroke:#11a7a7}\n","",{version:3,sources:["webpack://./node_modules/cwl-svg/src/plugins/selection/style.scss","webpack://./node_modules/cwl-svg/src/plugins/selection/_variables.scss","webpack://./node_modules/cwl-svg/src/assets/styles/_variables.scss"],names:[],mappings:"AAEA,8EAII,cAAe,CAJnB,yGAeQ,cCfqB,CDA7B,yGAmBQ,YCZ4B,CDPpC,+GAuBQ,YCtBe,CDDvB,gHA2BQ,YC1Be,CDDvB,yGAgCQ,YCrBmB,CDX3B,wGAoCQ,YCpCqB,CDA7B,yGA2CQ,cC3CqB,CDA7B,2EAkDI,SAAU,CAlDd,0EAwDM,cExDiB,CFAvB,0EA4DM,cE5DiB",sourcesContent:['@import "variables";\n\n.cwl-workflow.__plugin-selection {\n\n  .node,\n  .edge {\n    cursor: pointer;\n  }\n\n  // When something is selected on canvas, everything should fade.\n  // Then, selected and highlighted elements should override that.\n  &.__selection-plugin-fade {\n\n    // This is how nodes fade out\n    .node:not(.__selection-plugin-highlight) {\n\n      .outer {\n        stroke: $node-faded-outer-stroke-color;\n      }\n\n      .inner {\n        fill: $node-faded-step-fill-color;\n      }\n\n      &.input .inner {\n        fill: $node-faded-input-fill-color;\n      }\n\n      &.output .inner {\n        fill: $node-faded-output-fill-color;\n      }\n\n      // Their labels fade away a bit less\n      .label {\n        fill: $label-faded-color;\n      }\n      // Ports are darker\n      .port {\n        fill: $port-faded-fill-color;;\n      }\n\n    }\n\n    .edge:not(.__selection-plugin-highlight) {\n      .inner {\n        stroke: $edge-faded-inner-stroke-color;\n      }\n    }\n\n  }\n\n  .port.__selection-plugin-highlight .label {\n    opacity: 1;\n  }\n\n  .__selection-plugin-selected {\n\n    &.edge .inner {\n      stroke: $edge-selected-inner-stroke;\n    }\n\n    &.node .outer {\n      stroke: $node-selected-outer-stroke;\n    }\n\n  }\n}','@import "../../assets/styles/variables";\n\n$color-neutral-faded: #e6e6e6 !default;\n$io-faded-fill: #e8e8e8 !default;\n\n$node-selected-outer-stroke: $color-primary !default;\n$edge-selected-inner-stroke: $color-primary !default;\n\n$node-faded-outer-stroke-color: $color-neutral-faded !default;\n$node-faded-step-fill-color: #b1dfdf !default;\n$node-faded-input-fill-color: $io-faded-fill !default;\n$node-faded-output-fill-color: $io-faded-fill !default;\n\n$label-faded-color: #7e7d7d !default;\n$port-faded-fill-color: $color-neutral-faded !default;\n$edge-faded-inner-stroke-color: $color-neutral-faded !default;\n',"\n// Colors\n$color-primary: #11a7a7 !default;\n$color-neutral: rgb(154, 154, 154) !default;\n$background-color: white !default;\n\n// Workflow\n$background: $background-color !default;\n\n// Fonts\n$font-color: #333 !default;\n$text-stroke: #fff !default;\n$font-family: sans-serif !default;\n\n// Labels\n$label-stroke-color: $background-color !default;\n$label-stroke-width: 4px !default;\n\n// Edges\n$edge-inner-color: #222 !default;\n$edge-outer-color: #fff !default;\n$edge-inner-hover-color: $color-primary !default;\n$edge-inner-stroke-width: 2px !default;\n$edge-inner-stroke-color: $color-neutral !default;\n$edge-outer-stroke-width: 5px !default;\n$edge-outer-stroke-color: $background-color !default;\n\n// Nodes\n$node-outer-fill-color: $background-color !default;\n$node-outer-stroke-color: $color-neutral !default;\n$node-outer-stroke-width: 2px !default;\n\n$node-input-fill-color: #c3c3c3 !default;\n$node-output-fill-color: #c3c3c3 !default;\n$node-step-fill-color: $color-primary !default;\n\n$node-hover-port-transition: all .1s !default;\n\n// Node Icons\n$node-icon-fill-color: $font-color !default;\n$node-icon-stroke-color: $font-color !default;\n$node-icon-stroke-width: 3px !default;\n\n// Ports\n$port-fill-color: $color-neutral !default;\n$port-hover-stroke-color: darken($port-fill-color, 20%) !default;\n$port-hover-stroke-width: 2px !default;\n$port-label-color: $font-color !default;\n$port-label-size: .9em !default;\n\n"],sourceRoot:""}]);const o=n},306:(e,t,n)=>{n.d(t,{Z:()=>o});var t=n(7537),t=n.n(t),i=n(3645),n=n.n(i)()(t());n.push([e.id,"\n.cwl-workflow {\n    height: 100%;\n    width: 100%;\n}\n","",{version:3,sources:["webpack://./cwl.vue"],names:[],mappings:";AAsHA;IACA,YAAA;IACA,WAAA;AACA",sourcesContent:['<template>\n    <svg ref="svg" class="cwl-workflow"></svg>\n</template>\n\n<script>\n //   import "cwl-svg/src/assets/styles/themes/rabix-dark/theme.scss";\n //   import "cwl-svg/src/plugins/port-drag/theme.dark.scss";\n //   import "cwl-svg/src/plugins/selection/theme.dark.scss";\n\n    import "cwl-svg/src/assets/styles/theme.scss";\n    import "cwl-svg/src/plugins/port-drag/theme.scss";\n    import "cwl-svg/src/plugins/selection/theme.scss";\n\n    import {WorkflowFactory} from "cwlts/models";\n    import {Workflow, SVGArrangePlugin, SVGNodeMovePlugin, SVGPortDragPlugin, SelectionPlugin, SVGEdgeHoverPlugin, ZoomPlugin} from "cwl-svg";\n\n    export default {\n        data() {\n            return {\n                selectedNode: null,\n                workflow: null,\n                cwlState: null\n            };\n        },\n\n        computed: {\n            cwlModel() {\n                return WorkflowFactory.from(this.cwlState);\n            }\n        },\n\n        props: {\n            cwlUrl: {\n                type: String,\n                default: null,\n                note: `A URL to request for the initial CWL object from. Used as an alternative to\n                the "cwl" prop`\n            },\n            cwl: {\n                type: Object,\n                default: null,\n                note: `The JSON object representing the CWL workflow to render`\n            },\n\n            editingEnabled: {\n                type: Boolean,\n                default: false,\n                note: `True if the workflow is editable`\n            },\n            plugins: {\n                type: Array,\n                default: () => [],\n                note: `A list of CWL plugins to use in the CWL rendering`\n            }\n        },\n\n        /**\n         * If the cwlUrl prop was set, send a request for the CWL object, and set it to the internal\n         * state\n         */\n        mounted(){\n            if (this.cwlUrl){\n                fetch(this.cwlUrl, {\n                    headers: new Headers({\n                        \'Accept\': \'application/json\'\n                    })\n                }).then(response => {\n                    return response.json();\n                }).then(json => {\n                    this.cwlState = json;\n                });\n            }\n        },\n\n        watch: {\n            /**\n             * If the cwl prop ever changes, update the internal workflow object to that\n             */\n            cwl() {\n                this.cwlState = this.cwl;\n            },\n\n            workflow(){\n                this.$emit(\'workflow-changed\', this.workflow)\n            },\n\n            cwlState(){\n                this.workflow = new Workflow({\n\t\t    editingEnabled: true,\n                    model: this.cwlModel,\n                    svgRoot: this.$refs.svg,\n                    plugins: [\n        \t    \t     new SVGArrangePlugin(),\n        \t\t     new SVGEdgeHoverPlugin(),\n        \t\t     new SVGNodeMovePlugin({\n            \t\t     \t movementSpeed: 10\n        \t\t     }),\n        \t\t     new SVGPortDragPlugin(),\n        \t\t     new SelectionPlugin(),\n        \t\t     new ZoomPlugin()]\n                });\n\n\t\tthis.workflow.fitToViewport();\n\t\n                // Hack to force ArrangePlugin to rearrange\n                const arranger = this.workflow.getPlugin(SVGArrangePlugin);\n                if (arranger) arranger.arrange();               \n            }\n        }\n    }\n\n\n\n\n\n<\/script>\n\n<style lang="css">\n    .cwl-workflow {\n        height: 100%;\n        width: 100%;\n    }\n</style>'],sourceRoot:""}]);const o=n},3645:e=>{e.exports=function(i){var c=[];return c.toString=function(){return this.map(function(e){var t="",n=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),n&&(t+="@layer".concat(0<e[5].length?" ".concat(e[5]):""," {")),t+=i(e),n&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},c.i=function(e,t,n,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(n)for(var s=0;s<this.length;s++){var a=this[s][0];null!=a&&(r[a]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);n&&r[u[0]]||(void 0!==o&&(void 0!==u[5]&&(u[1]="@layer".concat(0<u[5].length?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),t&&(u[2]&&(u[1]="@media ".concat(u[2]," {").concat(u[1],"}")),u[2]=t),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),c.push(u))}},c}},7537:e=>{e.exports=function(e){var t,n=e[1],i=e[3];return i?("function"==typeof btoa?(e=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),e="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(e),e="/*# ".concat(e," */"),t=i.sources.map(function(e){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(e," */")}),[n].concat(t).concat([e])):[n]).join("\n"):n}},1292:(e,n,t)=>{function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(5471)),i(t(3277)),i(t(6756)),i(t(6262)),i(t(9740)),i(t(7730)),i(t(6829)),i(t(470)),i(t(9603)),i(t(1531)),i(t(4021)),i(t(8097))},9007:(e,t)=>{function n(e,t){void 0===t&&(t={scrollMargin:100,movementSpeed:10}),this.movementSpeed=10,this.scrollMargin=100,this.collision={x:0,y:0},this.panningCallback=function(e,t){};t=Object.assign({scrollMargin:100,movementSpeed:10},t);this.workflow=e,this.scrollMargin=t.scrollMargin,this.movementSpeed=t.movementSpeed,this.viewportClientRect=this.workflow.svgRoot.getBoundingClientRect()}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.triggerCollisionDetection=function(e,t,n){var i={x:0,y:0},n=(this.panningCallback=n,this.viewportClientRect),o=n.left,r=n.right,s=n.top,n=n.bottom;o+=this.scrollMargin,r-=this.scrollMargin,s+=this.scrollMargin,n-=this.scrollMargin,e<o?i.x=e-o:r<e&&(i.x=e-r),t<s?i.y=t-s:n<t&&(i.y=t-n),Math.sign(i.x)===Math.sign(this.collision.x)&&Math.sign(i.y)===Math.sign(this.collision.y)||(o=this.collision,this.collision=i,this.onBoundaryCollisionChange(i,o))},n.prototype.onBoundaryCollisionChange=function(e,t){this.stop(),0===e.x&&0===e.y||this.start(this.collision)},n.prototype.start=function(n){var i,o=this,r=this.workflow.scale,s=this.workflow.workflow.transform.baseVal.getItem(0).matrix,a=16.6666,l=function(e){var t=e-(i||e);i=e,0==t||o.panAnimationFrame?(e=Math.sign(n.x)*o.movementSpeed*t/a,t=Math.sign(n.y)*o.movementSpeed*t/a,s.e-=e,s.f-=t,o.panningCallback(e/r,t/r),o.panAnimationFrame=window.requestAnimationFrame(l)):i=void 0};this.panAnimationFrame=window.requestAnimationFrame(l)},n.prototype.stop=function(){window.cancelAnimationFrame(this.panAnimationFrame),this.panAnimationFrame=void 0},t.EdgePanner=n},813:function(e,t,n){var u=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}},p=(Object.defineProperty(t,"__esModule",{value:!0}),n(558)),d=n(9499),h=n(5471);function f(){}f.makeTemplate=function(e,t,n){if(!e.isVisible||"Step"===e.source.type||"Step"===e.destination.type)return"";var i=u(e.source.id.split("/"),3),o=(i[0],i[1]),i=i[2],r=u(e.destination.id.split("/"),3),s=(r[0],r[1]),r=r[2],a=t.querySelector('.node[data-id="'+o+'"] .output-port[data-port-id="'+i+'"] .io-port'),l=t.querySelector('.node[data-id="'+s+'"] .input-port[data-port-id="'+r+'"] .io-port');if(e.source.type!==e.destination.type)if(a){if(l)return a=a.getCTM(),l=l.getCTM(),t=t.transform.baseVal.getItem(0).matrix,l=h.Workflow.makeConnectionPath((a.e-t.e)/a.a,(a.f-t.f)/a.a,(l.e-t.e)/a.a,(l.f-t.f)/a.a),'\n            <g tabindex="-1" class="edge '+n+'"\n               data-source-port="'+i+'"\n               data-destination-port="'+r+'"\n               data-source-node="'+o+'"\n               data-source-connection="'+e.source.id+'"\n               data-destination-connection="'+e.destination.id+'"\n               data-destination-node="'+s+'">\n                <path class="sub-edge outer" d="'+l+'"></path>\n                <path class="sub-edge inner" d="'+l+'"></path>\n            </g>\n        ';console.error("Destination vertex not found for edge "+e.destination.id,e)}else console.error("Source vertex not found for edge "+e.source.id,e);else console.error("Can't update edge between nodes of the same type.",e)},f.spawn=function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var n=document.createElementNS("http://www.w3.org/2000/svg","g"),i=u((t.source||"//").split("/"),3),o=(i[0],i[1]),i=i[2],r=u((t.destination||"//").split("/"),3),s=(r[0],r[1]),r=r[2];return n.classList.add("edge"),o&&n.classList.add(o),s&&n.classList.add(s),n.setAttribute("tabindex","-1"),n.setAttribute("data-destination-node",s),n.setAttribute("data-destination-port",r),n.setAttribute("data-source-port",i),n.setAttribute("data-source-node",o),n.setAttribute("data-source-connection",t.source),n.setAttribute("data-destination-connection",t.destination),n.innerHTML='\n            <path class="sub-edge outer" d="'+e+'"></path>\n            <path class="sub-edge inner" d="'+e+'"></path>\n        ',n},f.spawnBetweenConnectionIDs=function(e,t,n){t.startsWith("in")&&(i=t,t=n,n=i);var i=e.querySelector('.port[data-connection-id="'+t+'"]'),o=e.querySelector('.port[data-connection-id="'+n+'"]'),i=p.Geometry.getTransformToElement(i,e),o=p.Geometry.getTransformToElement(o,e),r=d.IOPort.makeConnectionPath(i.e,i.f,o.e,o.f),i=e.querySelector('.edge[data-source-connection="'+t+'"][data-destination-connection="'+n+'"]');if(i){console.log("Updating existing edge");try{for(var s=c(i.querySelectorAll(".sub-edge")),a=s.next();!a.done;a=s.next())a.value.setAttribute("d",r)}catch(e){l={error:e}}finally{try{a&&!a.done&&(u=s.return)&&u.call(s)}finally{if(l)throw l.error}}return i}var l,o=f.spawn(r,{source:t,destination:n}),u=e.querySelector(".node");return e.insertBefore(o,u),o},f.findEdge=function(e,t,n){return e.querySelector('[data-source-connection="'+t+'"][data-destination-connection="'+n+'"]')},f.parseConnectionID=function(e){e=u((e||"//").split("/"),3);return{side:e[0],stepID:e[1],portID:e[2]}},t.Edge=f},5180:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var c=n(1034),p=n(9193),d=n(7045),h=n(9499);function f(e,t){this.dataModel=t,this.position={x:0,y:0},this.dataModel=t,Object.assign(this.position,e)}f.makeIconFragment=function(e){var t="";return e instanceof c.StepModel&&e.run?"Workflow"===e.run.class?t=this.workflowIconSvg:"CommandLineTool"===e.run.class&&(t=this.toolIconSvg):e instanceof c.WorkflowInputParameterModel&&e.type?t="File"===e.type.type||"array"===e.type.type&&"File"===e.type.items?this.fileInputIconSvg:this.inputIconSvg:e instanceof c.WorkflowOutputParameterModel&&e.type&&(t="File"===e.type.type||"array"===e.type.type&&"File"===e.type.items?this.fileOutputIconSvg:this.outputIconSvg),t},f.makeTemplate=function(e,t){void 0===t&&(t=1);var n=~~(e.customProps&&e.customProps["sbg:x"]),i=~~(e.customProps&&e.customProps["sbg:y"]),o="step",r=(e instanceof c.WorkflowInputParameterModel?o="input":e instanceof c.WorkflowOutputParameterModel&&(o="output"),(e.in||[]).filter(function(e){return e.isVisible})),s=(e.out||[]).filter(function(e){return e.isVisible}),a=Math.max(r.length,s.length),l=f.radius+a*h.IOPort.radius,a="",u="",r=(e.type&&(a="type-"+e.type.type,e.type.items&&(u="items-"+e.type.items)),r.sort(function(e,t){return-e.id.localeCompare(t.id)}).map(function(e,t,n){return f.makePortTemplate(e,"input",d.SVGUtils.matrixToTransformAttr(f.createPortMatrix(n.length,t,l,"input")))}).reduce(function(e,t){return e+t},"")),s=s.sort(function(e,t){return-e.id.localeCompare(t.id)}).map(function(e,t,n){return f.makePortTemplate(e,"output",d.SVGUtils.matrixToTransformAttr(f.createPortMatrix(n.length,t,l,"output")))}).reduce(function(e,t){return e+t},"");return'\n            <g tabindex="-1" class="node '+o+" "+a+" "+u+'"\n               data-connection-id="'+p.HtmlUtils.escapeHTML(e.connectionId)+'"\n               transform="matrix(1, 0, 0, 1, '+n+", "+i+')"\n               data-id="'+p.HtmlUtils.escapeHTML(e.id)+'">\n               \n                <g class="core" transform="matrix(1, 0, 0, 1, 0, 0)">\n                    <circle cx="0" cy="0" r="'+l+'" class="outer"></circle>\n                    <circle cx="0" cy="0" r="'+.75*l+'" class="inner"></circle>\n                    \n                    '+f.makeIconFragment(e)+'\n                </g>\n                \n                <text transform="matrix('+t+",0,0,"+t+",0,"+(l+30)+')" class="title label">'+p.HtmlUtils.escapeHTML(e.label||e.id)+"</text>\n                \n                "+r+"\n                "+s+"\n            </g>\n        "},f.makePortTemplate=function(e,t,n){void 0===n&&(n="matrix(1, 0, 0, 1, 0, 0)");var t="input"===t?"input-port":"output-port",i=p.HtmlUtils.escapeHTML(e.label||e.id);return'\n            <g class="port '+t+'" transform="'+(n||"matrix(1, 0, 0, 1, 0, 0)")+'"\n               data-connection-id="'+p.HtmlUtils.escapeHTML(e.connectionId)+'"\n               data-port-id="'+p.HtmlUtils.escapeHTML(e.id)+'"\n            >\n                <g class="io-port">\n                    <circle cx="0" cy="0" r="7" class="port-handle"></circle>\n                </g>\n                <text x="0" y="0" transform="matrix(1,0,0,1,0,0)" class="label unselectable">'+i+"</text>\n            </g>\n            \n        "},f.createPortMatrix=function(e,t,n,i){i="input"===i?250-140*(t+1)/(e+1):140*(t+1)/(e+1)-70;return d.SVGUtils.createMatrix().rotate(i).translate(n,0).rotate(-i)},f.patchModelPorts=function(e){var t,n=[{connectionId:e.connectionId,isVisible:!0,id:e.id}];return e instanceof c.WorkflowInputParameterModel?(t=Object.create(e),Object.assign(t,{out:n})):e instanceof c.WorkflowOutputParameterModel?(t=Object.create(e),Object.assign(t,{in:n})):e},f.radius=30,f.workflowIconSvg='<svg class="node-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400.01 399.88" x="-9" y="-10" width="20" height="20"><title>workflow</title><path d="M400,200a80,80,0,0,1-140.33,52.53L158.23,303.24a80,80,0,1,1-17.9-35.77l101.44-50.71a80.23,80.23,0,0,1,0-33.52L140.33,132.53a79.87,79.87,0,1,1,17.9-35.77l101.44,50.71A80,80,0,0,1,400,200Z" transform="translate(0.01 -0.16)"/></svg>',f.toolIconSvg='<svg class="node-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 398.39 397.78" x="-10" y="-8" width="20" height="15"><title>tool2</title><polygon points="38.77 397.57 0 366 136.15 198.78 0 31.57 38.77 0 200.63 198.78 38.77 397.57"/><rect x="198.39" y="347.78" width="200" height="50"/></svg>',f.fileInputIconSvg='<svg class="node-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 499 462.86" y="-10" x="-11" width="20" height="20"><title>file_input</title><path d="M386.06,0H175V58.29l50,50V50H337.81V163.38h25l86.19.24V412.86H225V353.71l-50,50v59.15H499V112.94Zm1.75,113.45v-41l41.1,41.1Z"/><polygon points="387.81 1.06 387.81 1.75 387.12 1.06 387.81 1.06"/><polygon points="290.36 231 176.68 344.68 141.32 309.32 194.64 256 0 256 0 206 194.64 206 142.32 153.68 177.68 118.32 290.36 231"/></svg>',f.fileOutputIconSvg='<svg class="node-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 499 462.86" x="-7" y="-11" width="20" height="20"><title>file_output</title><polygon points="387.81 1.06 387.81 1.75 387.12 1.06 387.81 1.06"/><polygon points="499 231 385.32 344.68 349.96 309.32 403.28 256 208.64 256 208.64 206 403.28 206 350.96 153.68 386.32 118.32 499 231"/><path d="M187.81,163.38l77.69.22H324V112.94L211.06,0H0V462.86H324V298.5H274V412.86H50V50H162.81V163.38Zm25-90.92,41.1,41.1-41.1-.11Z"/></svg>',f.inputIconSvg='<svg class="node-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 499 365" x="-11" y="-10" width="20" height="20"><title>type_input</title><g id="input"><path d="M316.5,68a181.72,181.72,0,0,0-114.12,40.09L238,143.72a132.5,132.5,0,1,1,1.16,214.39L203.48,393.8A182.5,182.5,0,1,0,316.5,68Z" transform="translate(0 -68)"/><g id="Layer_22" data-name="Layer 22"><g id="Layer_9_copy_4" data-name="Layer 9 copy 4"><polygon points="290.36 182 176.68 295.68 141.32 260.32 194.64 207 0 207 0 157 194.64 157 142.32 104.68 177.68 69.32 290.36 182"/></g></g></g></svg>',f.outputIconSvg='<svg class="node-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500.36 365" x="-9" y="-10" width="20" height="20"><title>type_output</title><g id="output"><path d="M291.95,325.23a134,134,0,0,1-15.76,19,132.5,132.5,0,1,1,0-187.38,133.9,133.9,0,0,1,16.16,19.55l35.81-35.81A182.5,182.5,0,1,0,327.73,361Z" transform="translate(0 -68)"/><g id="circle_source_copy" data-name="circle source copy"><g id="Layer_22_copy" data-name="Layer 22 copy"><g id="Layer_9_copy_5" data-name="Layer 9 copy 5"><polygon points="500.36 182 386.68 295.68 351.32 260.32 404.64 207 210 207 210 157 404.64 157 352.32 104.68 387.68 69.32 500.36 182"/></g></g></g></g></svg>',t.GraphNode=f},9499:(e,t)=>{function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.makeConnectionPath=function(e,t,n,i,o){return(o=void 0===o?"right":o)?"right"===o?"M "+e+" "+t+" C "+(e+Math.abs(e-n)/2)+" "+t+" "+(n-Math.abs(e-n)/2)+" "+i+" "+n+" "+i:"left"===o?"M "+e+" "+t+" C "+(e-Math.abs(e-n)/2)+" "+t+" "+(n+Math.abs(e-n)/2)+" "+i+" "+n+" "+i:void 0:"M "+e+" "+t+" C "+(e+n)/2+" "+t+" "+(e+n)/2+" "+i+" "+n+" "+i},n.radius=7,t.IOPort=n},3277:function(e,t,n){var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},l=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}},c=(Object.defineProperty(t,"__esModule",{value:!0}),n(813)),p=n(5180),d=n(7787);function o(e,t){this.stepEl=e,this.svg=e.ownerSVGElement,this.model=t}o.prototype.update=function(){var e=p.GraphNode.makeTemplate(this.model),t=d.TemplateParser.parse(e);this.stepEl.innerHTML=t.innerHTML;var n,i,t=this.svg.querySelectorAll('.edge[data-destination-node="'+this.model.connectionId+'"]'),o=this.svg.querySelectorAll('.edge[data-source-node="'+this.model.connectionId+'"]');try{for(var r=u(l(t,o)),s=r.next();!s.done;s=r.next()){var a=s.value;c.Edge.spawnBetweenConnectionIDs(this.svg.querySelector(".workflow"),a.getAttribute("data-source-connection"),a.getAttribute("data-destination-connection"))}}catch(e){n={error:e}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}console.log("Should redraw input port",t)},t.StepNode=o},7787:(e,t)=>{function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.parse=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e,t.firstElementChild},t.TemplateParser=n},5471:function(e,t,n){var i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},E=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},M=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}},o=(Object.defineProperty(t,"__esModule",{value:!0}),n(1329)),r=n(6223),s=n(813),k=n(5180),a=n(3277),l=n(7787);function u(e){var t=this;this.svgID=this.makeID(),this.minScale=.2,this.maxScale=2,this.editingEnabled=!0,this.labelScale=1,this.plugins=[],this.disposers=[],this.pendingFirstDraw=!0,this.isDestroyed=!1,this._scale=1,this.svgRoot=e.svgRoot,this.plugins=e.plugins||[],this.domEvents=new o.DomEvents(this.svgRoot),this.model=e.model,this.editingEnabled=!1!==e.editingEnabled,this.svgRoot.classList.add(this.svgID),this.svgRoot.innerHTML='\n            <rect x="0" y="0" width="100%" height="100%" class="pan-handle" transform="matrix(1,0,0,1,0,0)"></rect>\n            <g class="workflow" transform="matrix(1,0,0,1,0,0)"></g>\n        ',this.workflow=this.svgRoot.querySelector(".workflow"),this.invokePlugins("registerWorkflow",this),this.eventHub=new r.EventHub(["connection.create","app.create.step","app.create.input","app.create.output","beforeChange","afterChange","afterRender","selectionChange"]),this.hookPlugins(),this.draw(e.model),this.eventHub.on("afterRender",function(){return t.invokePlugins("afterRender")})}Object.defineProperty(u.prototype,"scale",{get:function(){return this._scale},set:function(e){this.workflowBoundingClientRect=this.svgRoot.getBoundingClientRect();var t=(this.workflowBoundingClientRect.right+this.workflowBoundingClientRect.left)/2,n=(this.workflowBoundingClientRect.top+this.workflowBoundingClientRect.bottom)/2;this.scaleAtPoint(e,t,n)},enumerable:!0,configurable:!0}),u.canDrawIn=function(e){return 0!==e.getBoundingClientRect().width},u.makeConnectionPath=function(e,t,n,i,o){return(o=void 0===o?"right":o)?"right"===o?"M "+e+" "+t+" C "+(e+Math.abs(e-n)/2)+" "+t+" "+(n-Math.abs(e-n)/2)+" "+i+" "+n+" "+i:"left"===o?"M "+e+" "+t+" C "+(e-Math.abs(e-n)/2)+" "+t+" "+(n+Math.abs(e-n)/2)+" "+i+" "+n+" "+i:void 0:"M "+e+" "+t+" C "+(e+n)/2+" "+t+" "+(e+n)/2+" "+i+" "+n+" "+i},u.prototype.draw=function(e){var t,n,i,o,r,s,a,l,u,c,p,d,h,f=this,y=(void 0===e&&(e=this.model),this.assertNotDestroyed("draw"),this.workflow.getAttribute("transform"));this.model===e&&!this.pendingFirstDraw||(this.pendingFirstDraw=!1,this.model=e,t=this.model.on("step.change",this.onStepChange.bind(this)),n=this.model.on("step.create",this.onStepCreate.bind(this)),i=this.model.on("step.remove",this.onStepRemove.bind(this)),o=this.model.on("input.create",this.onInputCreate.bind(this)),r=this.model.on("input.remove",this.onInputRemove.bind(this)),s=this.model.on("output.create",this.onOutputCreate.bind(this)),a=this.model.on("output.remove",this.onOutputRemove.bind(this)),l=this.model.on("step.inPort.show",this.onInputPortShow.bind(this)),u=this.model.on("step.inPort.hide",this.onInputPortHide.bind(this)),c=this.model.on("connection.create",this.onConnectionCreate.bind(this)),p=this.model.on("connection.remove",this.onConnectionRemove.bind(this)),d=this.model.on("step.outPort.create",this.onOutputPortCreate.bind(this)),h=this.model.on("step.outPort.remove",this.onOutputPortRemove.bind(this)),this.disposers.push(function(){t.dispose(),n.dispose(),i.dispose(),o.dispose(),r.dispose(),s.dispose(),a.dispose(),l.dispose(),u.dispose(),c.dispose(),p.dispose(),d.dispose(),h.dispose()}),this.invokePlugins("afterModelChange")),this.clearCanvas();var m,v,g=E(this.model.steps,this.model.inputs,this.model.outputs).filter(function(e){return e.isVisible}),b="";try{for(var _=M(g),w=_.next();!w.done;w=_.next()){var P=w.value,C=k.GraphNode.patchModelPorts(P);isNaN(parseInt(C.customProps["sbg:x"])),isNaN(parseInt(C.customProps["sbg:y"])),b+=k.GraphNode.makeTemplate(C)}}catch(e){m={error:e}}finally{try{w&&!w.done&&(v=_.return)&&v.call(_)}finally{if(m)throw m.error}}this.workflow.innerHTML+=b,this.redrawEdges(),Array.from(this.workflow.querySelectorAll(".node")).forEach(function(e){f.workflow.appendChild(e)}),this.addEventListeners(),this.workflow.setAttribute("transform",y),this.scaleAtPoint(this.scale),this.invokePlugins("afterRender")},u.prototype.findParent=function(e,t){void 0===t&&(t="node");for(var n=e;n;){if(n.classList.contains(t))return n;n=n.parentElement}},u.prototype.getPlugin=function(t){return this.plugins.find(function(e){return e instanceof t})},u.prototype.on=function(e,t){this.eventHub.on(e,t)},u.prototype.off=function(e,t){this.eventHub.off(e,t)},u.prototype.fitToViewport=function(e){void 0===e&&(e=!1),this.scaleAtPoint(1),Object.assign(this.workflow.transform.baseVal.getItem(0).matrix,{e:0,f:0});var t=this.svgRoot.getBoundingClientRect(),n=this.workflow.getBoundingClientRect();if(0===t.width||0===t.height)throw new Error("Cannot fit workflow to the area that has no visible viewport.");var i=n.height/(t.height-100),n=n.width/(t.width-100),i=Math.max(i,n),n=Math.min(this.scale/i,1),i=(e||(n=Math.max(n,this.minScale)),this.scaleAtPoint(n),this.workflow.getBoundingClientRect()),e=t.top-i.top+Math.abs(t.height-i.height)/2,n=t.left-i.left+Math.abs(t.width-i.width)/2,t=this.workflow.transform.baseVal.getItem(0).matrix;t.e+=n,t.f+=e},u.prototype.redrawEdges=function(){var n=this,i=new Set,e=(Array.from(this.workflow.querySelectorAll(".edge")).forEach(function(e){var t;e.classList.contains("highlighted")&&(t=e.attributes["data-source-connection"].value+e.attributes["data-destination-connection"].value,i.add(t)),e.remove()}),this.model.connections.map(function(e){var t=e.source.id+e.destination.id,t=i.has(t)?"highlighted":"";return s.Edge.makeTemplate(e,n.workflow,t)}).reduce(function(e,t){return e+t},""));this.workflow.innerHTML=e+this.workflow.innerHTML},u.prototype.scaleAtPoint=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0),this._scale=e=void 0===e?1:e,this.labelScale=1+(1-this._scale)/(2*this._scale);var i=this.workflow.transform.baseVal.getItem(0).matrix,t=this.transformScreenCTMtoCanvas(t,n);i.e+=i.a*t.x,i.f+=i.a*t.y,i.a=i.d=e,i.e-=e*t.x,i.f-=e*t.y;var o,r,n=this.workflow.querySelectorAll(".node .label");try{for(var s=M(n),a=s.next();!a.done;a=s.next()){var l=a.value.transform.baseVal.getItem(0).matrix;Object.assign(l,{a:this.labelScale,d:this.labelScale})}}catch(e){o={error:e}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}},u.prototype.transformScreenCTMtoCanvas=function(e,t){var n=this.svgRoot,i=this.workflow.getScreenCTM(),n=n.createSVGPoint(),e=(n.x=e,n.y=t,n.matrixTransform(i.inverse()));return{x:e.x,y:e.y}},u.prototype.enableEditing=function(e){this.invokePlugins("onEditableStateChange",e),this.editingEnabled=e},u.prototype.destroy=function(){this.svgRoot.classList.remove(this.svgID),this.clearCanvas(),this.eventHub.empty(),this.invokePlugins("destroy");try{for(var e=M(this.disposers),t=e.next();!t.done;t=e.next())(0,t.value)()}catch(e){n={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(n)throw n.error}}var n,i;this.isDestroyed=!0},u.prototype.resetTransform=function(){this.workflow.setAttribute("transform","matrix(1,0,0,1,0,0)"),this.scaleAtPoint()},u.prototype.assertNotDestroyed=function(e){if(this.isDestroyed)throw new Error("Cannot call the "+e+" method on a destroyed graph. Destroying this object removes DOM listeners, and reusing it would result in unexpected things not working. Instead, you can just call the “draw” method with a different model, or create a new Workflow object.")},u.prototype.addEventListeners=function(){var i,o,r,s;this.domEvents.drag(".pan-handle",function(e,t){s.e=o+e,s.f=r+t},function(e,t,n){i=n.querySelector(".workflow"),s=i.transform.baseVal.getItem(0).matrix,o=s.e,r=s.f},function(){s=i=void 0})},u.prototype.clearCanvas=function(){this.domEvents.detachAll(),this.workflow.innerHTML="",this.workflow.setAttribute("transform","matrix(1,0,0,1,0,0)"),this.workflow.setAttribute("class","workflow")},u.prototype.hookPlugins=function(){var t=this;this.plugins.forEach(function(e){e.registerOnBeforeChange(function(e){t.eventHub.emit("beforeChange",e)}),e.registerOnAfterChange(function(e){t.eventHub.emit("afterChange",e)}),e.registerOnAfterRender(function(e){t.eventHub.emit("afterRender",e)})})},u.prototype.invokePlugins=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];this.plugins.forEach(function(e){"function"==typeof e[t]&&e[t].apply(e,E(n))})},u.prototype.onConnectionCreate=function(e,t){e.isVisible&&t.isVisible&&(e=e.connectionId,t=t.connectionId,s.Edge.spawnBetweenConnectionIDs(this.workflow,e,t))},u.prototype.onConnectionRemove=function(e,t){e.isVisible&&t.isVisible&&(e=e.connectionId,t=t.connectionId,this.svgRoot.querySelector('.edge[data-source-connection="'+e+'"][data-destination-connection="'+t+'"]').remove())},u.prototype.onInputCreate=function(e){e.isVisible&&(e=k.GraphNode.patchModelPorts(e),e=k.GraphNode.makeTemplate(e,this.labelScale),e=l.TemplateParser.parse(e),this.workflow.appendChild(e))},u.prototype.onOutputCreate=function(e){e.isVisible&&(e=k.GraphNode.patchModelPorts(e),e=k.GraphNode.makeTemplate(e,this.labelScale),e=l.TemplateParser.parse(e),this.workflow.appendChild(e))},u.prototype.onStepCreate=function(e){!e.customProps["sbg:x"]&&e.run.customProps&&e.run.customProps["sbg:x"]&&(Object.assign(e.customProps,{"sbg:x":e.run.customProps["sbg:x"],"sbg:y":e.run.customProps["sbg:y"]}),delete e.run.customProps["sbg:x"],delete e.run.customProps["sbg:y"]);e=k.GraphNode.makeTemplate(e,this.labelScale),e=l.TemplateParser.parse(e);this.workflow.appendChild(e)},u.prototype.onStepChange=function(e){var t=this.workflow.querySelector('.step[data-id="'+e.connectionId+'"] .title');t&&(t.textContent=e.label)},u.prototype.onInputPortShow=function(e){var t=this.svgRoot.querySelector('.step[data-connection-id="'+e.parentStep.connectionId+'"]');new a.StepNode(t,e.parentStep).update()},u.prototype.onInputPortHide=function(e){var t=this.svgRoot.querySelector('.step[data-connection-id="'+e.parentStep.connectionId+'"]');new a.StepNode(t,e.parentStep).update()},u.prototype.onOutputPortCreate=function(e){var t=this.svgRoot.querySelector('.step[data-connection-id="'+e.parentStep.connectionId+'"]');new a.StepNode(t,e.parentStep).update()},u.prototype.onOutputPortRemove=function(e){var t=this.svgRoot.querySelector('.step[data-connection-id="'+e.parentStep.connectionId+'"]');new a.StepNode(t,e.parentStep).update()},u.prototype.onStepRemove=function(e){this.svgRoot.querySelector('.step[data-connection-id="'+e.connectionId+'"]').remove()},u.prototype.onInputRemove=function(e){e.isVisible&&this.svgRoot.querySelector('.node.input[data-connection-id="'+e.connectionId+'"]').remove()},u.prototype.onOutputRemove=function(e){e.isVisible&&this.svgRoot.querySelector('.node.output[data-connection-id="'+e.connectionId+'"]').remove()},u.prototype.makeID=function(e){void 0===e&&(e=6);for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",i=0;i<e;i++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},t.Workflow=u},7297:(e,n,t)=>{function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(5471)),i(t(9603)),i(t(6262)),i(t(6829)),i(t(7730)),i(t(6756)),i(t(470)),i(t(9740)),i(t(1531)),i(t(4021))},6262:function(e,t,n){var s=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}},d=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e},_=(Object.defineProperty(t,"__esModule",{value:!0}),n(5180)),w=n(7045);function i(){}i.prototype.registerWorkflow=function(e){this.workflow=e,this.svgRoot=e.svgRoot},i.prototype.registerOnBeforeChange=function(e){this.onBeforeChange=function(){return e({type:"arrange"})}},i.prototype.registerOnAfterChange=function(e){this.onAfterChange=function(){return e({type:"arrange"})}},i.prototype.registerOnAfterRender=function(e){this.triggerAfterRender=function(){return e({type:"arrange"})}},i.prototype.afterRender=function(){var e,t,n=this.workflow.model,n=[].concat(n.steps||[],n.inputs||[],n.outputs||[]);try{for(var i=s(n),o=i.next();!o.done;o=i.next()){var r=o.value;if(r.isVisible&&isNaN(parseInt(r.customProps["sbg:x"])))return void this.arrange()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},i.prototype.arrange=function(){this.onBeforeChange(),this.workflow.resetTransform();var e,t=this.makeNodeGraphs(),n=t.mainGraph,s=t.danglingNodes,t=this.distributeNodesIntoColumns(n),n=this.calculateColumnSizes(t),i=n.distributionArea,o=n.columnDimensions,r=i.height/2,a=0,l=0,u={},c=(t.forEach(function(e,t){var t=o[t],n=r-t.height/2-e[0].rect.height/2;e.forEach(function(e){n+=e.rect.height/2;var t=w.SVGUtils.createMatrix().translate(a,n);(n+=e.rect.height/2)>l&&(l=n),e.el.setAttribute("transform",w.SVGUtils.matrixToTransformAttr(t)),u[e.connectionID]={x:t.e,y:t.f}}),a+=t.width}),Object.keys(s).sort(function(e,t){var n=e.startsWith("out/"),i=e.startsWith("in/"),o=t.startsWith("out/"),r=t.startsWith("in/"),e=e.toLowerCase(),t=t.toLowerCase();return i?r?t.localeCompare(e):1:n?r?-1:o?t.localeCompare(e):1:r||o?-1:t.localeCompare(e)})),p=5*_.GraphNode.radius,d=0,h=0,f=new Map,y=new Map,a=0,m=Math.max(i.width,3*p),v=(c.forEach(function(e,t){e=s[e].firstElementChild.getBoundingClientRect();f.set(t,e.width),0===a&&(a-=e.width/2),e.height>d&&(d=e.height),(a+=e.width+30+Math.max(150-e.width,0))>=m&&t<c.length-1&&(y.set(h++,d),a=d=0)}),y.set(h,d),l),h=a=0;for(e in c.forEach(function(e,t){var n=s[e],t=f.get(t),i=y.get(h),o=a+t/2,r=v+30+Math.ceil(i/2)+(0===a?0:o)/m*p,t=(0===a&&(o-=t/2,a-=t/2),a+=t+30+Math.max(150-t,0),w.SVGUtils.createMatrix().translate(o,r));n.setAttribute("transform",w.SVGUtils.matrixToTransformAttr(t)),u[e]={x:t.e,y:t.f},m<=a&&(v+=Math.ceil(i)+30,d=a=0,h++)}),this.workflow.redrawEdges(),this.workflow.fitToViewport(),this.onAfterChange(u),this.triggerAfterRender(),u){var g=u[e],b=this.workflow.model.findById(e);b.customProps||(b.customProps={}),Object.assign(b.customProps,{"sbg:x":g.x,"sbg:y":g.y})}return u},i.prototype.calculateColumnSizes=function(e){for(var t={width:0,height:0},n=[],i=1;i<e.length;i++){for(var o=0,r=0,s=0;s<e[i].length;s++){var a=e[i][s];r+=a.rect.height,o<a.rect.width&&(o=a.rect.width)}n[i]={height:r,width:o},t.width+=o,r>t.height&&(t.height=r)}return{columnDimensions:n,distributionArea:t}},i.prototype.distributeNodesIntoColumns=function(e){for(var t={},n=Object.keys(e).sort(function(e,t){return t.localeCompare(e)}),i=[],o=0;o<n.length;o++){var r=n[o],s=e[r];if("input"!==s.type)t[r]=this.traceLongestNodePathLength(s,e);else{for(var a=1/0,l=0;l<s.outputs.length;l++){var u=t[s.outputs[l]];u<a&&(a=u)}t[r]=a===1/0?1:a-1}var c=t[r];i[c]||(i[c]=[]),i[c].push(e[r])}return i},i.prototype.indexNodesByID=function(){for(var e={},t=this.svgRoot.querySelectorAll(".node"),n=0;n<t.length;n++)e[t[n].getAttribute("data-connection-id")]=t[n];return e},i.prototype.traceLongestNodePathLength=function(e,t,n){if((n=void 0===n?new Set:n).add(e),0===e.inputs.length)return 1;for(var i=[],o=0;o<e.inputs.length;o++){var r=t[e.inputs[o]];n.has(r)||i.push(this.traceLongestNodePathLength(r,t,n))}return Math.max.apply(Math,a(i))+1},i.prototype.makeNodeGraphs=function(){for(var e=this.indexNodesByID(),t={},n=this.svgRoot.querySelectorAll(".edge"),i=0;i<n.length;i++){var o=n[i],r=o.getAttribute("data-source-connection"),o=o.getAttribute("data-destination-connection"),r=d(r.split("/"),3),s=r[0],a=r[1],r=r[2],o=d(o.split("/"),3),l=o[0],u=o[1],c="step",p="step",r=(a===r&&(c="in"===s?"output":"input"),u===o[2]&&(p="in"===l?"output":"input"),this.svgRoot.querySelector('.node[data-id="'+a+'"]')),s=this.svgRoot.querySelector('.node[data-id="'+u+'"]'),o=r.getAttribute("data-connection-id"),l=s.getAttribute("data-connection-id");delete e[o],delete e[l],t[a]||(t[a]={inputs:[],outputs:[],type:c,connectionID:o,el:r,rect:r.getBoundingClientRect()}),t[u]||(t[u]={inputs:[],outputs:[],type:p,connectionID:l,el:s,rect:s.getBoundingClientRect()}),t[a].outputs.push(u),t[u].inputs.push(a)}return{mainGraph:t,danglingNodes:e}},t.SVGArrangePlugin=i},1531:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(8097)),l=n(470),u=n(1034),n=(o=a.PluginBase,r(c,o),c.prototype.afterRender=function(){this.attachDeleteBehavior()},c.prototype.onEditableStateChange=function(e){e?this.attachDeleteBehavior():this.detachDeleteBehavior()},c.prototype.attachDeleteBehavior=function(){this.detachDeleteBehavior(),window.addEventListener("keyup",this.boundDeleteFunction,!0)},c.prototype.detachDeleteBehavior=function(){window.removeEventListener("keyup",this.boundDeleteFunction,!0)},c.prototype.onDelete=function(e){(8===e.which||46===e.which)&&e.target instanceof SVGElement&&this.deleteSelection()},c.prototype.deleteSelection=function(){var n=this,i=this.workflow.getPlugin(l.SelectionPlugin);i&&this.workflow.editingEnabled&&i.getSelection().forEach(function(e,t){"node"===e?(e=n.workflow.model.findById(t))instanceof u.StepModel?(n.workflow.model.removeStep(e),i.clearSelection()):e instanceof u.WorkflowInputParameterModel?(n.workflow.model.removeInput(e),i.clearSelection()):e instanceof u.WorkflowOutputParameterModel&&(n.workflow.model.removeOutput(e),i.clearSelection()):(t=(e=s(t.split(l.SelectionPlugin.edgePortsDelimiter),2))[0],e=e[1],n.workflow.model.disconnect(t,e),i.clearSelection())})},c.prototype.destroy=function(){this.detachDeleteBehavior()},c);function c(){var e=null!==o&&o.apply(this,arguments)||this;return e.boundDeleteFunction=e.onDelete.bind(e),e}t.DeletionPlugin=n},9740:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),d=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},n=(Object.defineProperty(t,"__esModule",{value:!0}),o=n(8097).PluginBase,r(s,o),s.prototype.afterRender=function(){this.attachEdgeHoverBehavior()},s.prototype.destroy=function(){this.detachEdgeHoverBehavior(),this.modelListener.dispose()},s.prototype.attachEdgeHoverBehavior=function(){this.detachEdgeHoverBehavior(),this.workflow.workflow.addEventListener("mouseenter",this.boundEdgeEnterFunction,!0)},s.prototype.detachEdgeHoverBehavior=function(){this.workflow.workflow.removeEventListener("mouseenter",this.boundEdgeEnterFunction,!0)},s.prototype.onEdgeEnter=function(e){var o,t,n,i,r,s,a,l,u,c,p=this;e.srcElement.classList.contains("edge")&&(t=e.srcElement,n=function(e){e=p.workflow.transformScreenCTMtoCanvas(e.clientX,e.clientY);o.setAttribute("x",String(e.x)),o.setAttribute("y",String(e.y-16))}.bind(this),i=function(e){o.remove(),t.removeEventListener("mousemove",n),t.removeEventListener("mouseleave",i)}.bind(this),this.modelListener=this.workflow.model.on("connection.remove",function(e,t){var n,i;o&&(n=(i=d(o.getAttribute("data-source-destination").split("$!$"),2))[0],i=i[1],n===e.connectionId&&i===t.connectionId&&o.remove())}),l=t.getAttribute("data-source-node"),c=t.getAttribute("data-destination-node"),u=t.getAttribute("data-source-port"),r=t.getAttribute("data-destination-port"),s=t.getAttribute("data-source-connection"),a=t.getAttribute("data-destination-connection"),l=l===u?l:l+" ("+u+")",u=c===r?c:c+" ("+r+")",c=this.workflow.transformScreenCTMtoCanvas(e.clientX,e.clientY),(o=document.createElementNS("http://www.w3.org/2000/svg","text")).classList.add("label"),o.classList.add("label-edge"),o.setAttribute("x",String(c.x)),o.setAttribute("y",String(c.y)),o.setAttribute("data-source-destination",s+"$!$"+a),o.innerHTML=l+" → "+u,this.workflow.workflow.appendChild(o),t.addEventListener("mousemove",n),t.addEventListener("mouseleave",i))},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.boundEdgeEnterFunction=e.onEdgeEnter.bind(e),e.modelListener={dispose:function(){}},e}t.SVGEdgeHoverPlugin=n},7730:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}},s=(Object.defineProperty(t,"__esModule",{value:!0}),n(7297)),a=n(8097),l=n(9007),n=(o=a.PluginBase,r(u,o),u.prototype.onEditableStateChange=function(e){e?this.attachDrag():this.detachDrag()},u.prototype.afterRender=function(){this.workflow.editingEnabled&&this.attachDrag()},u.prototype.destroy=function(){this.detachDrag()},u.prototype.registerWorkflow=function(e){o.prototype.registerWorkflow.call(this,e),this.edgePanner=new l.EdgePanner(this.workflow,{scrollMargin:this.scrollMargin,movementSpeed:this.movementSpeed})},u.prototype.detachDrag=function(){"function"==typeof this.detachDragListenerFn&&this.detachDragListenerFn(),this.detachDragListenerFn=void 0},u.prototype.attachDrag=function(){this.detachDrag(),this.detachDragListenerFn=this.workflow.domEvents.drag(".node .core",this.boundMoveHandler,this.boundMoveStartHandler,this.boundMoveEndHandler)},u.prototype.getWorkflowMatrix=function(){return this.workflow.workflow.transform.baseVal.getItem(0).matrix},u.prototype.onMove=function(e,t,n){var i=this,o=this.workflow.scale,r=this.getWorkflowMatrix().e-this.startWorkflowTranslation.x,s=this.getWorkflowMatrix().f-this.startWorkflowTranslation.y,n=(this.edgePanner.triggerCollisionDetection(n.clientX,n.clientY,function(e,t){i.sdx+=e,i.sdy+=t,i.translateNodeBy(i.movingNode,e,t),i.redrawEdges(i.sdx,i.sdy)}),this.sdx=(e-r)/o,this.sdy=(t-s)/o,this.sdx+this.startX),e=this.sdy+this.startY;this.translateNodeTo(this.movingNode,n,e),this.redrawEdges(this.sdx,this.sdy)},u.prototype.onMoveStart=function(e,t){var n=this.workflow.svgRoot,i=(document.addEventListener("mousewheel",this.wheelPrevent,!0),t.parentNode),o=i.transform.baseVal.getItem(0).matrix,r=(this.startX=o.e,this.startY=o.f,i.getAttribute("data-id"));this.startWorkflowTranslation={x:this.getWorkflowMatrix().e,y:this.getWorkflowMatrix().f},this.boundingClientRect=n.getBoundingClientRect(),this.movingNode=t.parentNode,this.inputEdges=new Map,this.outputEdges=new Map;var s,a,o=".edge[data-source-node='"+r+"'] .sub-edge",i=".edge[data-destination-node='"+r+"'] .sub-edge",t=n.querySelectorAll([i,o].join(", "));try{for(var l=h(t),u=l.next();!u.done;u=l.next()){var c=u.value,p=c.parentElement.getAttribute("data-destination-node")===r,d=c.getAttribute("d").split(" ").map(Number).filter(function(e){return!isNaN(e)});(p?this.inputEdges:this.outputEdges).set(c,d)}}catch(e){s={error:e}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}},u.prototype.translateNodeBy=function(e,t,n){var i=e.transform.baseVal.getItem(0).matrix;this.translateNodeTo(e,i.e+t,i.f+n)},u.prototype.translateNodeTo=function(e,t,n){e.transform.baseVal.getItem(0).setTranslate(t,n)},u.prototype.redrawEdges=function(n,i){this.inputEdges.forEach(function(e,t){e=s.Workflow.makeConnectionPath(e[0],e[1],e[6]+n,e[7]+i);t.setAttribute("d",e)}),this.outputEdges.forEach(function(e,t){e=s.Workflow.makeConnectionPath(e[0]+n,e[1]+i,e[6],e[7]);t.setAttribute("d",e)})},u.prototype.onMoveEnd=function(){this.edgePanner.stop();var e=this.movingNode.getAttribute("data-connection-id"),e=this.workflow.model.findById(e),t=(e.customProps||(e.customProps={}),this.movingNode.transform.baseVal.getItem(0).matrix);Object.assign(e.customProps,{"sbg:x":t.e,"sbg:y":t.f}),this.onAfterChange({type:"node-move"}),document.removeEventListener("mousewheel",this.wheelPrevent,!0),delete this.startX,delete this.startY,delete this.movingNode,delete this.inputEdges,delete this.outputEdges,delete this.boundingClientRect,delete this.startWorkflowTranslation},u);function u(e){void 0===e&&(e={});var t=o.call(this)||this;return t.scrollMargin=50,t.movementSpeed=10,t.wheelPrevent=function(e){return e.stopPropagation()},t.boundMoveHandler=t.onMove.bind(t),t.boundMoveStartHandler=t.onMoveStart.bind(t),t.boundMoveEndHandler=t.onMoveEnd.bind(t),t.detachDragListenerFn=void 0,Object.assign(t,e),t}t.SVGNodeMovePlugin=n},8097:(e,t)=>{function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.registerWorkflow=function(e){this.workflow=e},n.prototype.registerOnBeforeChange=function(e){this.onBeforeChange=e},n.prototype.registerOnAfterChange=function(e){this.onAfterChange=e},n.prototype.registerOnAfterRender=function(e){this.onAfterRender=e},t.PluginBase=n},6756:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}},s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8097)),d=n(7297),a=n(5180),l=n(558),u=n(813),c=n(9007),n=(o=s.PluginBase,r(h,o),h.prototype.registerWorkflow=function(e){o.prototype.registerWorkflow.call(this,e),this.panner=new c.EdgePanner(this.workflow),this.workflow.svgRoot.classList.add(this.css.plugin)},h.prototype.afterRender=function(){this.workflow.editingEnabled&&this.attachPortDrag()},h.prototype.onEditableStateChange=function(e){e?this.attachPortDrag():this.detachPortDrag()},h.prototype.destroy=function(){this.detachPortDrag()},h.prototype.detachPortDrag=function(){"function"==typeof this.detachDragListenerFn&&this.detachDragListenerFn(),this.detachDragListenerFn=void 0},h.prototype.attachPortDrag=function(){this.detachPortDrag(),this.detachDragListenerFn=this.workflow.domEvents.drag(".port",this.onMove.bind(this),this.onMoveStart.bind(this),this.onMoveEnd.bind(this))},h.prototype.onMove=function(e,t,n,i){var o=this,r=(document.addEventListener("mousewheel",this.wheelPrevent,!0),this.workflow.transformScreenCTMtoCanvas(n.clientX,n.clientY)),s=this.workflow.scale,a=(e-this.lastMouseMove.x)/s,s=(t-this.lastMouseMove.y)/s,n=(this.panner.triggerCollisionDetection(n.clientX,n.clientY,function(e,t){o.ghostX+=e,o.ghostY+=t,o.translateGhostNode(o.ghostX,o.ghostY),o.updateEdge(o.portOnCanvas.x,o.portOnCanvas.y,o.ghostX,o.ghostY)}),l.Geometry.distance(this.nodeCoords.x,this.nodeCoords.y,r.x,r.y)),r=this.findClosestPort(r.x,r.y);this.updateSnapPort(r.portEl,r.distance),this.ghostX+=a,this.ghostY+=s,this.translateGhostNode(this.ghostX,this.ghostY),this.updateGhostNodeVisibility(n,r.distance),this.updateEdge(this.portOnCanvas.x,this.portOnCanvas.y,this.ghostX,this.ghostY),this.lastMouseMove={x:e,y:t}},h.prototype.onMoveStart=function(e,t){this.lastMouseMove={x:0,y:0};var n=(this.originPort=t).getScreenCTM(),n=(this.portOnCanvas=this.workflow.transformScreenCTMtoCanvas(n.e,n.f),this.ghostX=this.portOnCanvas.x,this.ghostY=this.portOnCanvas.y,this.boundingClientRect=this.workflow.svgRoot.getBoundingClientRect(),this.workflow.findParent(t).transform.baseVal.getItem(0).matrix),n=(this.nodeCoords={x:n.e,y:n.f},this.workflow.workflow);this.portType=t.classList.contains("input-port")?"input":"output",this.ghostNode=this.createGhostNode(this.portType),n.appendChild(this.ghostNode),this.edgeGroup=u.Edge.spawn(),this.edgeGroup.classList.add(this.css.dragging),n.appendChild(this.edgeGroup),this.workflow.svgRoot.classList.add(this.css.dragging),this.portOrigins=this.getPortCandidateTransformations(t),this.highlightSuggestedPorts(t.getAttribute("data-connection-id"))},h.prototype.onMoveEnd=function(e){document.removeEventListener("mousewheel",this.wheelPrevent,!0),this.panner.stop();var t=this.ghostNode.getAttribute("data-type"),n=!this.ghostNode.classList.contains("hidden"),i=void 0!==this.snapPort,o=n&&"input"===t,n=n&&"output"===t,t=this.originPort.getAttribute("data-connection-id");i?this.createEdgeBetweenPorts(this.originPort,this.snapPort):(o||n)&&(n={"sbg:x":(i=this.workflow.transformScreenCTMtoCanvas(e.clientX,e.clientY)).x,"sbg:y":i.y},o?this.workflow.model.createInputFromPort(t,{customProps:n}):this.workflow.model.createOutputFromPort(t,{customProps:n})),this.cleanMemory(),this.cleanStyles()},h.prototype.updateSnapPort=function(e,t){var n=e!==this.snapPort,i=t>this.snapRadius;this.snapPort&&(n||i)&&(n=this.workflow.findParent(this.snapPort),this.snapPort.classList.remove(this.css.snap),n.classList.remove(this.css.snap),delete this.snapPort),t>this.snapRadius||(i=this.originPort.getAttribute("data-connection-id"),n=e.getAttribute("data-connection-id"),this.findEdge(i,n)?delete this.snapPort:(this.snapPort=e,t=this.workflow.findParent(e),i="input"===this.portType?"output":"input",e.classList.add(this.css.snap),t.classList.add(this.css.snap),t.classList.add(this.css.snap+"-"+i)))},h.prototype.updateEdge=function(e,t,n,i){var o,r,s=this.edgeGroup.children;try{for(var a=p(s),l=a.next();!l.done;l=a.next()){var u=l.value,c=d.Workflow.makeConnectionPath(e,t,n,i,"input"===this.portType?"left":"right");u.setAttribute("d",c)}}catch(e){o={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}},h.prototype.updateGhostNodeVisibility=function(e,t){var n=this.ghostNode.classList.contains("hidden"),e=e>this.snapRadius&&t>this.snapRadius;e&&n?this.ghostNode.classList.remove("hidden"):e||n||this.ghostNode.classList.add("hidden")},h.prototype.translateGhostNode=function(e,t){this.ghostNode.transform.baseVal.getItem(0).setTranslate(e,t)},h.prototype.getPortCandidateTransformations=function(e){var t,n,i='.node:not([data-connection-id="'+this.workflow.findParent(e).getAttribute("data-connection-id")+'"]) .port.'+("input"===this.portType?"output":"input")+"-port",i=this.workflow.workflow.querySelectorAll(i),o=new Map;try{for(var r=p(i),s=r.next();!s.done;s=r.next()){var a=s.value;o.set(a,l.Geometry.getTransformToElement(a,this.workflow.workflow))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o},h.prototype.highlightSuggestedPorts=function(e){for(var t=this.workflow.model.gatherValidConnectionPoints(e),n=0;n<t.length;n++){var i=t[n];i.isVisible&&(i='.port[data-connection-id="'+i.connectionId+'"]',i=this.workflow.workflow.querySelector(i),this.workflow.findParent(i).classList.add(this.css.suggestion),i.classList.add(this.css.suggestion))}},h.prototype.createGhostNode=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.setAttribute("transform","matrix(1,0,0,1,0,0)"),t.setAttribute("data-type",e),t.classList.add("ghost"),t.classList.add("node"),t.innerHTML='<circle class="ghost-circle" cx="0" cy="0" r="'+a.GraphNode.radius/1.5+'"></circle>',t},h.prototype.findClosestPort=function(n,i){var o=void 0,r=1/0;return this.portOrigins.forEach(function(e,t){e=l.Geometry.distance(n,i,e.e,e.f);e<r&&(o=t,r=e)}),{portEl:o,distance:r}},h.prototype.cleanMemory=function(){this.edgeGroup.remove(),this.ghostNode.remove(),this.snapPort=void 0,this.edgeGroup=void 0,this.nodeCoords=void 0,this.originPort=void 0,this.portOrigins=void 0,this.boundingClientRect=void 0},h.prototype.cleanStyles=function(){for(var e in this.workflow.svgRoot.classList.remove(this.css.dragging),this.css){var t=this.workflow.svgRoot.querySelectorAll("."+this.css[e]);try{for(var n=p(t),i=n.next();!i.done;i=n.next())i.value.classList.remove(this.css[e])}catch(e){o={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}}var o,r},h.prototype.createEdgeBetweenPorts=function(e,t){var n,e=e.getAttribute("data-connection-id"),t=t.getAttribute("data-connection-id");e.startsWith("in")&&(n=e,e=t,t=n),this.workflow.model.connect(e,t)},h.prototype.findEdge=function(e,t){return this.workflow.workflow.querySelector('[data-source-connection="'+e+'"][data-destination-connection="'+t+'"]'+","+('[data-source-connection="'+t+'"][data-destination-connection="'+e+'"]'))},h);function h(){var e=null!==o&&o.apply(this,arguments)||this;return e.snapRadius=120,e.css={plugin:"__plugin-port-drag",snap:"__port-drag-snap",dragging:"__port-drag-dragging",suggestion:"__port-drag-suggestion"},e.detachDragListenerFn=void 0,e.wheelPrevent=function(e){return e.stopPropagation()},e.ghostX=0,e.ghostY=0,e}t.SVGPortDragPlugin=n},470:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),y=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}},s=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},n=(Object.defineProperty(t,"__esModule",{value:!0}),o=n(8097).PluginBase,r(a,o),a.prototype.registerWorkflow=function(e){var t=this,n=(o.prototype.registerWorkflow.call(this,e),this.svg=this.workflow.svgRoot,this.svg.classList.add(this.css.plugin),this.onClick.bind(this));this.svg.addEventListener("click",n),this.cleanups.push(function(){return t.svg.removeEventListener("click",n)})},a.prototype.afterRender=function(){this.restoreSelection()},a.prototype.afterModelChange=function(){"function"==typeof this.detachModelEvents&&this.detachModelEvents(),this.detachModelEvents=this.bindModelEvents()},a.prototype.destroy=function(){this.detachModelEvents(),this.detachModelEvents=void 0,this.svg.classList.remove(this.css.plugin);try{for(var e=y(this.cleanups),t=e.next();!t.done;t=e.next())(0,t.value)()}catch(e){n={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(n)throw n.error}}var n,i},a.prototype.clearSelection=function(){var e,t,n,i,o=this.svg.querySelectorAll("."+this.css.selected),r=this.svg.querySelectorAll("."+this.css.highlight);try{for(var s=y(o),a=s.next();!a.done;a=s.next())a.value.classList.remove(this.css.selected)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}try{for(var l=y(r),u=l.next();!u.done;u=l.next())u.value.classList.remove(this.css.highlight)}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}this.svg.classList.remove(this.css.fade),this.selection.clear(),this.emitChange(null)},a.prototype.getSelection=function(){return this.selection},a.prototype.registerOnSelectionChange=function(e){this.selectionChangeCallbacks.push(e)},a.prototype.selectStep=function(e){e=this.svg.querySelector('[data-connection-id="'+e+'"]');e&&this.materializeClickOnElement(e)},a.prototype.bindModelEvents=function(){var e,t,n=this,i=function(){return n.restoreSelection()},o=[],r=this;try{for(var s=y(["connection.create","connection.remove"]),a=s.next();!a.done;a=s.next())!function(e){var t=r.workflow.model.on(e,i);o.push(function(){return t.dispose()})}(a.value)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return function(){return o.forEach(function(e){return e()})}},a.prototype.restoreSelection=function(){var i=this;this.selection.forEach(function(e,t){var n;"node"===e?(n=i.svg.querySelector('[data-connection-id="'+t+'"]'))&&i.selectNode(n):"edge"===e&&(e='[data-source-connection="'+(n=s(t.split(a.edgePortsDelimiter),2))[0]+'"][data-destination-connection="'+n[1]+'"]',(t=i.svg.querySelector(e))&&i.selectEdge(t))})},a.prototype.onClick=function(e){e=e.target;this.clearSelection(),this.materializeClickOnElement(e)},a.prototype.materializeClickOnElement=function(e){var t;(t=this.workflow.findParent(e,"node"))?(this.selectNode(t),this.selection.set(t.getAttribute("data-connection-id"),"node"),this.emitChange(t)):(t=this.workflow.findParent(e,"edge"))&&(this.selectEdge(t),e=[t.getAttribute("data-source-connection"),a.edgePortsDelimiter,t.getAttribute("data-destination-connection")].join(""),this.selection.set(e,"edge"),this.emitChange(e))},a.prototype.selectNode=function(e){e.parentElement.appendChild(e),this.svg.classList.add(this.css.fade),e.classList.add(this.css.selected),e.classList.add(this.css.highlight);var t,n,i,o,r=e.getAttribute("data-id"),r=this.svg.querySelectorAll('.edge[data-source-node="'+r+'"],.edge[data-destination-node="'+r+'"]'),s=this.svg.getElementsByClassName("node")[0];try{for(var a=y(r),l=a.next();!l.done;l=a.next()){var u=l.value,c=(u.classList.add(this.css.highlight),this.workflow.workflow.insertBefore(u,s),u.getAttribute("data-source-node")),p=u.getAttribute("data-destination-node"),d=this.svg.querySelectorAll('.node[data-id="'+c+'"],.node[data-id="'+p+'"]');try{for(var h=y(d),f=h.next();!f.done;f=h.next())f.value.classList.add(this.css.highlight)}catch(e){i={error:e}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},a.prototype.selectEdge=function(e){e.classList.add(this.css.highlight),e.classList.add(this.css.selected);var t,n,i=e.getAttribute("data-source-node"),o=e.getAttribute("data-destination-node"),r=e.getAttribute("data-source-port"),o='.node[data-id="'+o+'"] .input-port[data-port-id="'+e.getAttribute("data-destination-port")+'"]',o=this.svg.querySelectorAll(o+", "+('.node[data-id="'+i+'"] .output-port[data-port-id="'+r+'"]'));try{for(var s=y(o),a=s.next();!a.done;a=s.next())a.value.classList.add(this.css.highlight)}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}},a.prototype.emitChange=function(e){try{for(var t=y(this.selectionChangeCallbacks),n=t.next();!n.done;n=t.next())(0,n.value)(e)}catch(e){i={error:e}}finally{try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}}var i,o},a.edgePortsDelimiter="$!$",a);function a(){var e=null!==o&&o.apply(this,arguments)||this;return e.selection=new Map,e.cleanups=[],e.selectionChangeCallbacks=[],e.css={selected:"__selection-plugin-selected",highlight:"__selection-plugin-highlight",fade:"__selection-plugin-fade",plugin:"__plugin-selection"},e}t.SelectionPlugin=n},6829:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}},n=(Object.defineProperty(t,"__esModule",{value:!0}),o=n(8097).PluginBase,r(s,o),s.prototype.registerWorkflow=function(e){o.prototype.registerWorkflow.call(this,e),this.workflow.svgRoot.classList.add(this.css.plugin)},s.prototype.afterModelChange=function(){this.disposeModelListeners();var e=this.workflow.model.on("connections.updated",this.renderEdgeValidation.bind(this)),t=this.workflow.model.on("connection.create",this.renderEdgeValidation.bind(this));this.modelDisposers.concat([e.dispose,t.dispose])},s.prototype.destroy=function(){this.disposeModelListeners()},s.prototype.afterRender=function(){this.renderEdgeValidation()},s.prototype.onEditableStateChange=function(e){e?this.renderEdgeValidation():this.removeClasses(this.workflow.workflow.querySelectorAll(".edge"))},s.prototype.disposeModelListeners=function(){try{for(var e=c(this.modelDisposers),t=e.next();!t.done;t=e.next())(0,t.value)()}catch(e){n={error:e}}finally{try{t&&!t.done&&(i=e.return)&&i.call(e)}finally{if(n)throw n.error}}var n,i;this.modelDisposers=[]},s.prototype.removeClasses=function(e){try{for(var t=c(e),n=t.next();!n.done;n=t.next())n.value.classList.remove(this.css.invalid)}catch(e){i={error:e}}finally{try{n&&!n.done&&(o=t.return)&&o.call(t)}finally{if(i)throw i.error}}var i,o},s.prototype.renderEdgeValidation=function(){var l=this,u=this.workflow.workflow.querySelectorAll(".edge");this.removeClasses(u),this.workflow.model.connections.forEach(function(e){if(!e.isValid)try{for(var t=c(u),n=t.next();!n.done;n=t.next()){var i=n.value,o=i.getAttribute("data-source-connection"),r=i.getAttribute("data-destination-connection");if(e.source.id===o&&e.destination.id===r){i.classList.add(l.css.invalid);break}}}catch(e){s={error:e}}finally{try{n&&!n.done&&(a=t.return)&&a.call(t)}finally{if(s)throw s.error}}var s,a})},s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.modelDisposers=[],e.css={plugin:"__plugin-validate",invalid:"__validate-invalid"},e}t.SVGValidatePlugin=n},9603:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),o=n(8097).PluginBase,r(s,o),s.prototype.registerWorkflow=function(e){o.prototype.registerWorkflow.call(this,e),this.svg=e.svgRoot,this.dispose=this.attachWheelListener()},s.prototype.attachWheelListener=function(){var e=this,t=this.onMouseWheel.bind(this);return this.svg.addEventListener("wheel",t,!0),function(){return e.svg.removeEventListener("wheel",t,!0)}},s.prototype.onMouseWheel=function(e){var t=this.workflow.scale,n=t-e.deltaY/500;t<n&&this.workflow.maxScale<n||n<t&&this.workflow.minScale>n||(this.workflow.scaleAtPoint(n,e.clientX,e.clientY),e.stopPropagation())},s.prototype.destroy=function(){"function"==typeof this.dispose&&this.dispose(),this.dispose=void 0},s);function s(){return null!==o&&o.apply(this,arguments)||this}t.ZoomPlugin=n},1329:(e,t)=>{function n(e){this.root=e,this.handlers=new Map}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.on=function(){for(var i=this,e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];function n(e){if(r){for(var t=Array.from(i.root.querySelectorAll(r)),n=e.target;n&&!t.find(function(e){return e===n});)n=n.parentNode;if(!n)return}return s(e,n||e.target,i.root),!1}var o=e.shift(),r="string"==typeof e[0]?e.shift():void 0,s="function"==typeof e[0]?e.shift():function(){},a=e.shift()||this.root;this.handlers.has(a)||this.handlers.set(a,{}),this.handlers.get(a)[o]||(this.handlers.get(a)[o]=[]);return a.addEventListener(o,n),this.handlers.get(a)[o].push(n),function(){a.removeEventListener(o,n)}},n.prototype.keyup=function(){},n.prototype.adaptedDrag=function(e,i,o,r){var s,a,l,u,c=this,p=!1,d=0,e=this.on("mousedown",e,function(e,t){return p=!0,a=t,(l=s=e).preventDefault(),u=c.detachHandlers("mouseover"),document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),!1}),h=function(e){var t,n;p&&(t=e.screenX-s.screenX,n=e.screenY-s.screenY,3==++d&&"function"==typeof o&&o(l,a,c.root),3<=d&&"function"==typeof i&&i(t,n,e,a,c.root))},f=function(e){var t,n,i;for(i in 3<=d&&(p&&"function"==typeof r&&r(e,a,c.root),(t=a.parentNode).addEventListener("click",n=function(e){e.stopPropagation(),t.removeEventListener("click",n,!0)},!0)),p=!1,s=a=void 0,d=0,document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",h),u)c.root.addEventListener("mouseover",u[i]),c.handlers.get(c.root).mouseover=[],c.handlers.get(c.root).mouseover.push(u[i])};return e},n.prototype.drag=function(e,i,o,r){var s,a,l,u,c=this,p=!1,d=0,e=this.on("mousedown",e,function(e,t,n){return p=!0,a=t,(l=s=e).preventDefault(),u=c.detachHandlers("mouseover"),document.addEventListener("mousemove",h),document.addEventListener("mouseup",f),!1}),h=function(e){var t,n;p&&(t=e.screenX-s.screenX,n=e.screenY-s.screenY,3==++d&&"function"==typeof o&&o(l,a,c.root),3<=d&&"function"==typeof i&&i(t,n,e,a,c.root))},f=function(e){var t,n,i;for(i in 3<=d&&(p&&"function"==typeof r&&r(e,a,c.root),a.contains(e.target))&&(t=a.parentNode).addEventListener("click",n=function(e){e.stopPropagation(),t.removeEventListener("click",n,!0)},!0),p=!1,s=a=void 0,d=0,document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",h),u)c.root.addEventListener("mouseover",u[i]),c.handlers.get(c.root).mouseover=[],c.handlers.get(c.root).mouseover.push(u[i])};return e},n.prototype.hover=function(t,n,i,o){var r=this,s=(void 0===n&&(n=function(){}),void 0===i&&(i=function(){}),void 0===o&&(o=function(){}),!1);t.addEventListener("mouseenter",function(e){s=!0,i(e,t,r.root)}),t.addEventListener("mouseleave",function(e){s=!1,o(e,t,r.root)}),t.addEventListener("mousemove",function(e){s&&n(e,t,r.root)})},n.prototype.detachHandlers=function(i,o){o=o||this.root;var r=[];return this.handlers.forEach(function(e,n){if(n.id===o.id&&n===o)for(var t in e)!function(t){if(t!==i)return;e[t].forEach(function(e){r.push(e),n.removeEventListener(t,e)})}(t)}),delete this.handlers.get(this.root)[i],r},n.prototype.detachAll=function(){this.handlers.forEach(function(e,n){for(var t in e)!function(t){e[t].forEach(function(e){return n.removeEventListener(t,e)})}(t)}),this.handlers.clear()},t.DomEvents=n},6223:function(e,t){var n=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(i=r.next()).done;)s.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},r=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(n(arguments[t]));return e};function i(e){this.handlers=e.reduce(function(e,t){return Object.assign(e,((e={})[t]=[],e))},{})}Object.defineProperty(t,"__esModule",{value:!0}),i.prototype.on=function(e,t){var n=this;return this.guard(e,"subscribe to"),this.handlers[e].push(t),function(){return n.off(e,t)}},i.prototype.off=function(e,t){return this.guard(e,"unsubscribe from"),this.handlers[e].splice(this.handlers[e].findIndex(function(e){return t===e}),1)},i.prototype.emit=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.guard(e,"emit");for(var o=0;o<this.handlers[e].length;o++)(t=this.handlers[e])[o].apply(t,r(n))},i.prototype.empty=function(){for(var e in this.handlers)this.handlers[e]=[]},i.prototype.guard=function(e,t){this.handlers[e]||console.warn("Trying to "+t+" a non-supported event “"+e+"”. \n            Supported events are: "+Object.keys(this.handlers).join(", ")+"”")},t.EventHub=i},558:(e,t)=>{function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.distance=function(e,t,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2))},n.getTransformToElement=function(e,t){function r(e,t,n){var i,o;return void 0===t&&(t=0),void 0===n&&(n=0),e.ownerSVGElement?(o=(i=e.transform.baseVal.getItem(0).matrix).e,i=i.f,r(e.parentNode,o+t,i+n)):((o=e.createSVGMatrix()).e=t,o.f=n,o)}var t=r(t),n=r(e),e=e.ownerSVGElement.createSVGMatrix();return e.e=t.e-n.e,e.f=t.f-n.f,e.inverse()},t.Geometry=n},9193:(e,t)=>{function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.escapeHTML=function(e){return String(e).replace(/[&<>"'\/]/g,function(e){return n.entityMap[e]})},n.entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;",'""':"&quot;","'":"&#39;","/":"&#x2F;"},t.HtmlUtils=n},4021:function(e,t){var l=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}}};function n(e){this.containerElements=["svg","g"],this.embeddableStyles={rect:["fill","stroke","stroke-width"],path:["fill","stroke","stroke-width"],circle:["fill","stroke","stroke-width"],line:["stroke","stroke-width"],text:["fill","font-size","text-anchor","font-family"],polygon:["stroke","fill"]},this.svg=e}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.dump=function(e){var t=(void 0===e?{padding:50}:e).padding,t=(this.adaptViewbox(this.svg,t),this.svg.cloneNode(!0)),n=t.querySelectorAll(".port .label");try{for(var i=l(n),o=i.next();!o.done;o=i.next()){var r=o.value;r.parentNode.removeChild(r)}}catch(e){s={error:e}}finally{try{o&&!o.done&&(a=i.return)&&a.call(i)}finally{if(s)throw s.error}}this.treeShakeStyles(t,this.svg);var s,a,n=t.querySelector(".pan-handle");return n&&t.removeChild(n),(new XMLSerializer).serializeToString(t)},n.prototype.adaptViewbox=function(e,t){void 0===t&&(t=50);var e=e.querySelector(".workflow").getBoundingClientRect(),n=this.getPointOnSVG(e.left,e.top),i=this.svg.viewBox.baseVal;i.x=n.x-t/2,i.y=n.y-t/2,i.height=e.height+t,i.width=e.width+t},n.prototype.getPointOnSVG=function(e,t){var n=this.svg.getScreenCTM(),i=this.svg.createSVGPoint();return i.x=e,i.y=t,i.matrixTransform(n.inverse())},n.prototype.treeShakeStyles=function(e,t){for(var n=e.childNodes,i=t.childNodes,o=0;o<n.length;o++){var r=n[o],s=r.tagName;if(-1!==this.containerElements.indexOf(s))this.treeShakeStyles(r,i[o]);else if(s in this.embeddableStyles){for(var a=window.getComputedStyle(i[o]),l="",u=0;u<this.embeddableStyles[s].length;u++)l+=this.embeddableStyles[s][u]+":"+a.getPropertyValue(this.embeddableStyles[s][u])+"; ";r.setAttribute("style",l)}}},t.SvgDumper=n},7045:(e,t)=>{function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.matrixToTransformAttr=function(e){return"matrix("+e.a+", "+e.b+", "+e.c+", "+e.d+", "+e.e+", "+e.f+")"},n.createMatrix=function(){return document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix()},t.SVGUtils=n},9178:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(7128)),a=n(5833),l=n(7287),n=(o=s.CommandArgumentModel,r(u,o),u.prototype.updateBinding=function(e){this.hasBinding=!0,this.primitive=void 0,this.binding.prefix=e.prefix,this.binding.position=e.position,this.binding.separate=e.separate,this.binding.itemSeparator=e.itemSeparator},u.prototype.updatePrimitive=function(e){this.hasBinding=!1,this.binding=void 0,this.primitive=e},u.prototype.toggleBinding=function(e){var t=this;e?(this.binding=new a.SBDraft2CommandLineBindingModel({},this.loc,this.eventHub),this.binding.setValidationCallback(function(e){return t.updateValidity(e)}),this.primitive=void 0):(this.primitive="",this.binding.clearIssue(l.ErrorCode.ALL),this.binding=void 0),this.hasBinding=e},Object.defineProperty(u.prototype,"arg",{get:function(){return this.primitive||this.binding},set:function(e){this.deserialize(e)},enumerable:!0,configurable:!0}),u.prototype.toString=function(){return this.primitive||(this.binding?this.binding.valueFrom.toString():"")},u.prototype.serialize=function(){return this.primitive||(this.binding?this.binding.serialize():void 0)},u.prototype.deserialize=function(e){var t=this;"string"==typeof e?(this.hasBinding=!1,this.primitive=e):e instanceof a.SBDraft2CommandLineBindingModel?(this.hasBinding=!0,this.binding=new a.SBDraft2CommandLineBindingModel(e.serialize(),this.loc,this.eventHub),this.binding.setValidationCallback(function(e){return t.updateValidity(e)})):(this.hasBinding=!0,this.binding=new a.SBDraft2CommandLineBindingModel(e,this.loc,this.eventHub),this.binding.setValidationCallback(function(e){return t.updateValidity(e)}))},u);function u(e,t,n){t=o.call(this,t,n)||this;return t.hasExprPrimitive=!1,t.hasShellQuote=!1,t.deserialize(e||{}),t}t.SBDraft2CommandArgumentModel=n},919:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(7802)),l=n(887),u=n(4916),c=n(5833),p=n(743),n=(o=a.CommandInputParameterModel,r(d,o),d.prototype.serialize=function(){var e=s({},this.customProps);return e.type=this.type.serialize(),this.inputBinding&&(e.inputBinding=this.inputBinding.serialize(),u.isFileType(this)&&this.secondaryFiles.length&&(e.inputBinding.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e}))),this.label&&(e.label=this.label),this.description&&(e.description=this.description),u.isFileType(this)&&this.fileTypes.length&&(e["sbg:fileTypes"]=this.fileTypes.join(", ")),this.isField?e.name=this.id:e.id=this.id?"#"+this.id:"",e},d.prototype.deserialize=function(e){var t,n=this,i=["label","description","inputBinding","type","sbg:fileTypes"];this.isField=!!(e=e||{}).name,this.isField?i.push("name"):i.push("id"),e.id&&"#"===e.id.charAt(0)?this.id=e.id.substr(1):this.id=e.id||e.name||"";try{u.validateID(this.id)}catch(e){this.setIssue(((t={})[this.loc+".id"]={type:"error",code:e.code,message:e.message},t))}this.label=e.label,this.description=e.description,this.fileTypes=u.commaSeparatedToArray(e["sbg:fileTypes"]),void 0!==e.inputBinding&&(this.inputBinding=new c.SBDraft2CommandLineBindingModel(e.inputBinding,this.loc+".inputBinding",this.eventHub),this.inputBinding.setValidationCallback(function(e){return n.updateValidity(e)}),e.inputBinding.secondaryFiles&&(this.secondaryFiles=u.ensureArray(e.inputBinding.secondaryFiles).map(function(e){return n.addSecondaryFile(e)}))),this.type=new l.ParameterTypeModel(e.type,d,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){return n.updateValidity(e)}),u.isType(this,["record","enum"])&&!this.type.name&&(this.type.name=this.id),this.type.hasMapType=!0,this.isSecret=Boolean(e["sbg:secretAlias"]),this.attachFileTypeListeners(),u.spreadSelectProps(e,this.customProps,i)},d.prototype.updateInputBinding=function(e){var t=this;e instanceof c.SBDraft2CommandLineBindingModel&&(this.inputBinding.setValidationCallback(function(e){return t.updateValidity(e)}),this.inputBinding.cloneStatus(e))},d.prototype.createInputBinding=function(){var t=this;return this.inputBinding=new c.SBDraft2CommandLineBindingModel({},this.loc+".inputBinding",this.eventHub),this.inputBinding.setValidationCallback(function(e){return t.updateValidity(e)}),this.inputBinding},d.prototype.addSecondaryFile=function(e){if(this.inputBinding)return this._addSecondaryFile(e,p.SBDraft2ExpressionModel,this.inputBinding.loc)},d.prototype.updateSecondaryFiles=function(e){this.inputBinding&&this._updateSecondaryFiles(e)},d.prototype.removeSecondaryFile=function(e){this.inputBinding&&this._removeSecondaryFile(e)},d);function d(e,t,n){t=o.call(this,t,n)||this;return t.inputBinding=null,t.hasSecondaryFiles=!1,t.hasSecondaryFilesInRoot=!1,t.hasStageInput=!0,t.secondaryFiles=[],t.deserialize(e),t}t.SBDraft2CommandInputParameterModel=n},5833:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(895)),a=n(4916),l=n(743),n=(o=s.CommandLineBindingModel,r(u,o),u.prototype.setValueFrom=function(e){var t=this;this.valueFrom=new l.SBDraft2ExpressionModel(e,this.loc+".valueFrom",this.eventHub),this.valueFrom.setValidationCallback(function(e){return t.updateValidity(e)})},u.prototype.validate=function(e){var t=this,n=[];return this.valueFrom&&n.push(this.valueFrom.validate(e)),Promise.all(n).then(function(){return t.issues},function(e){return console.warn("SBDraft2CommandLineBindingModel threw error in validation: "+e),t.issues})},u.prototype.serialize=function(){var t=this,n={};return this.serializedKeys.forEach(function(e){void 0!==t[e]&&null!==t[e]&&"valueFrom"!==e&&"secondaryFiles"!==e&&(n[e]=t[e])}),n.loadContents||delete n.loadContents,void 0!==this.valueFrom.serialize()&&(n.valueFrom=this.valueFrom.serialize()),a.spreadAllProps(n,this.customProps)},u.prototype.deserialize=function(e){var t=this;e&&e.constructor===Object&&(this.position=isNaN(e.position)?0:parseInt(e.position),this.prefix=e.prefix,this.separate=e.separate,e.itemSeparator&&(this.itemSeparator=e.itemSeparator),this.loadContents=!0===e.loadContents,this.valueFrom=new l.SBDraft2ExpressionModel(e.valueFrom,this.loc+".valueFrom",this.eventHub),this.valueFrom.setValidationCallback(function(e){return t.updateValidity(e)}),a.spreadSelectProps(e,this.customProps,this.serializedKeys))},u);function u(e,t,n){t=o.call(this,t,n)||this;return t.hasSecondaryFiles=!0,t.hasShellQuote=!1,t.itemSeparator=null,t.serializedKeys=["position","prefix","separate","itemSeparator","valueFrom","loadContents","secondaryFiles"],t.deserialize(e||{}),t}t.SBDraft2CommandLineBindingModel=n},3528:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(5752)),l=n(7802),u=n(2016),c=n(1836),p=n(4172),d=n(6809),h=n(7990),f=n(4916),y=n(7287),m=n(9178),v=n(919),g=n(3358),b=n(7678),_=n(743),w=n(9336),P=n(820),n=(o=u.CommandLineToolModel,r(C,o),C.prototype.setRuntime=function(e){this.runtime.cpu=(void 0!==(e=void 0===e?{}:e).cpu?e:this.runtime).cpu,this.runtime.mem=(void 0!==e.mem?e:this.runtime).mem},C.prototype.getContext=function(e){var t,n={$job:{inputs:this.jobInputs,allocatedResources:this.runtime}};return e&&e instanceof l.CommandInputParameterModel&&(e.isField?(t=this.findFieldRoot(e,this.jobInputs),n.$self=t?t[e.id]:null):n.$self=this.jobInputs?this.jobInputs[e.id]:null),e&&e instanceof c.CommandOutputParameterModel&&(n.$self=h.JobHelper.generateMockJobData({type:{type:"array",items:"File"}})),n},C.prototype.resetJobDefaults=function(){this.jobInputs=h.JobHelper.getJobInputs(this),this.updateCommandLine()},C.prototype.addHint=function(e){var t=this,e=new d.RequirementBaseModel(e,_.SBDraft2ExpressionModel,this.loc+".hints["+this.hints.length+"]",this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.hints.push(e),e},C.prototype.addBaseCommand=function(e){var t=this,n=(void 0===e&&(e=""),f.incrementLastLoc(this.baseCommand,this.loc+".baseCommand")),e=new _.SBDraft2ExpressionModel(e,n,this.eventHub);return this.baseCommand.push(e),e.setValidationCallback(function(e){return t.updateValidity(e)}),e},C.prototype.updateBaseCommand=function(e){var t=this;this.baseCommand.forEach(function(e){return e.clearIssue(y.ErrorCode.EXPR_ALL)}),this.baseCommand=[],e.forEach(function(e){return t.addBaseCommand(e.serialize())})},C.prototype.addArgument=function(e){var t=this,n=f.incrementLastLoc(this.arguments,this.loc+".arguments"),e=new m.SBDraft2CommandArgumentModel(e,n,this.eventHub);return this.arguments.push(e),e.setValidationCallback(function(e){return t.updateValidity(e)}),e},C.prototype.addInput=function(e){return o.prototype._addInput.call(this,v.SBDraft2CommandInputParameterModel,e)},C.prototype.addOutput=function(e){return o.prototype._addOutput.call(this,g.SBDraft2CommandOutputParameterModel,e)},C.prototype.createEnvVariable=function(e,t){var n=this,i={envName:e.envName,envValue:new _.SBDraft2ExpressionModel("",this.loc+".requirements["+this.requirements.length+"].envVars.envDef["+this.envVars.envDef.length+"]",this.eventHub)};return i.envValue.setValue(e.envValue,t),i.envValue.setValidationCallback(function(e){return n.updateValidity(e)}),i},C.prototype.setRequirement=function(e,t){var n=t?"hints":"requirements";this.createReq(e,this.loc+"."+n+"["+this[n].length+"]",t)},C.prototype.updateStream=function(e,t){var n=this;(this[t]=e).loc=this.loc+"."+t,e.setValidationCallback(function(e){return n.updateValidity(e)})},C.prototype.createReq=function(e,t,n){var i,o=this,n=n?"hints":"requirements";switch(e.class){case"DockerRequirement":return this.docker=new p.DockerRequirementModel(e,t),void this.docker.setValidationCallback(function(e){return o.updateValidity(e)});case"CreateFileRequirement":return i=new b.SBDraft2CreateFileRequirementModel(e,t,this.eventHub),void(this.fileRequirement=i).setValidationCallback(function(e){return o.updateValidity(e)});case"EnvVarRequirement":return this.envVars=new P.SBDraft2EnvRequirementModel(e,t,this.eventHub),void this.envVars.setValidationCallback(function(e){return o.updateValidity(e)});case"sbg:CPURequirement":return this.resources.cores=new _.SBDraft2ExpressionModel(e.value,t+".value",this.eventHub),void this.resources.cores.setValidationCallback(function(e){return o.updateValidity(e)});case"sbg:MemRequirement":return this.resources.mem=new _.SBDraft2ExpressionModel(e.value,t+".value",this.eventHub),void this.resources.mem.setValidationCallback(function(e){return o.updateValidity(e)});default:i=new d.RequirementBaseModel(e,_.SBDraft2ExpressionModel,t)}i&&(this[n].push(i),i.setValidationCallback(function(e){return o.updateValidity(e)}))},C.prototype.deserialize=function(e){var n=this;this.id=e["sbg:id"]&&2<e["sbg:id"].split("/").length?e["sbg:id"].split("/")[2]:f.snakeCase(e.id),this.sbgId=e["sbg:id"],this.label=e.label,this.description=e.description,this.namespaces=new a.NamespaceBag(e.$namespaces),f.ensureArray(e.inputs).forEach(function(e){return n.addInput(e)}),f.ensureArray(e.outputs).forEach(function(e){return n.addOutput(e)}),f.checkPortIdUniqueness(this.inputs.concat(this.outputs)),e.arguments&&e.arguments.forEach(function(e){n.addArgument(e)}),this.resources=this.resources||new w.SBDraft2ResourceRequirementModel(this.loc+".hints["+this.hints.length+"]",this.eventHub),this.resources.setValidationCallback(function(e){return n.updateValidity(e)}),e.requirements&&e.requirements.forEach(function(e,t){n.createReq(e,n.loc+".requirements["+t+"]")}),e.hints&&e.hints.forEach(function(e,t){n.createReq(e,n.loc+".hints["+t+"]",!0)}),this.docker=this.docker||new p.DockerRequirementModel({},this.loc+".hints["+this.hints.length+"]"),this.docker.isHint=!0,this.docker.setValidationCallback(function(e){return n.updateValidity(e)}),this.fileRequirement=this.fileRequirement||new b.SBDraft2CreateFileRequirementModel({},this.loc+".requirements["+this.requirements.length+"]",this.eventHub),this.fileRequirement.setValidationCallback(function(e){return n.updateValidity(e)}),this.envVars=this.envVars||new P.SBDraft2EnvRequirementModel({},this.loc+".requirements["+this.requirements.length+"]",this.eventHub),this.envVars.setValidationCallback(function(e){return n.updateValidity(e)}),this.updateStream(new _.SBDraft2ExpressionModel(e.stdin,this.loc+".stdin",this.eventHub),"stdin"),this.updateStream(new _.SBDraft2ExpressionModel(e.stdout,this.loc+".stdout",this.eventHub),"stdout"),this.successCodes=f.ensureArray(e.successCodes),this.temporaryFailCodes=f.ensureArray(e.temporaryFailCodes),this.permanentFailCodes=f.ensureArray(e.permanentFailCodes),e.baseCommand=e.baseCommand||[],e.baseCommand=Array.isArray(e.baseCommand)?e.baseCommand:[e.baseCommand],this.baseCommand=[],e.baseCommand.forEach(function(e){n.addBaseCommand(e)}),this.runtime={mem:1e3,cpu:1},e["sbg:job"]?(this.jobInputs=s({},h.JobHelper.getNullJobInputs(this),e["sbg:job"].inputs),this.runtime=s({},this.runtime,e["sbg:job"].allocatedResources)):this.jobInputs=h.JobHelper.getJobInputs(this),f.spreadSelectProps(e,this.customProps,["$namespaces","baseCommand","class","id","label","description","inputs","hints","requirements","arguments","outputs","stdin","stdout","successCodes","temporaryFailCodes","permanentFailCodes","cwlVersion"])},C.prototype.serialize=function(){var e={},t=!1,n=(e.cwlVersion="sbg:draft-2",e.class="CommandLineTool",this.namespaces.isNotEmpty()&&(e.$namespaces=this.namespaces.serialize()),(this.sbgId||this.id)&&(e.id=this.sbgId||this.id),this.label&&(e.label=this.label),this.description&&(e.description=this.description),this.eventHub.on("expression.serialize",function(e){t=e})),i=(e.baseCommand=this.baseCommand.map(function(e){return e.serialize()}).filter(function(e){return!!e}).reduce(function(e,t){return"string"==typeof t?e.concat(t.split(/\s+/)):e.concat([t])},[]),e.inputs=this.inputs.map(function(e){return e.serialize()}),e.outputs=this.outputs.map(function(e){return e.serialize()}),e.requirements=[],this.requirements.length&&(e.requirements=this.requirements.map(function(e){return e.serialize()})),this.fileRequirement.serialize()&&e.requirements.push(this.fileRequirement.serialize()),this.envVars.serialize()&&e.requirements.push(this.envVars.serialize()),e.requirements.length||delete e.requirements,e.hints=[],this.hints.length&&(e.hints=this.hints.map(function(e){return e.serialize()})),void 0!==this.resources.cores.serialize()&&e.hints.push({class:"sbg:CPURequirement",value:f.returnNumIfNum(this.resources.cores.serialize())}),void 0!==this.resources.mem.serialize()&&e.hints.push({class:"sbg:MemRequirement",value:f.returnNumIfNum(this.resources.mem.serialize())}),this.docker.serialize()&&e.hints.push(this.docker.serialize()),e.hints.length||delete e.hints,this.arguments.length&&(e.arguments=this.arguments.map(function(e){return e.serialize()}).filter(function(e){return!!e})),this.stdin.serialize()&&(e.stdin=this.stdin.serialize()),this.stdout.serialize()&&(e.stdout=this.stdout.serialize()),this.successCodes.length&&(e.successCodes=this.successCodes),this.temporaryFailCodes.length&&(e.temporaryFailCodes=this.temporaryFailCodes),this.permanentFailCodes.length&&(e.permanentFailCodes=this.permanentFailCodes),this.requirements.findIndex(function(e){return"ExpressionEngineRequirement"===e.class}));return t&&(e.requirements=e.requirements||[],-1===i&&e.requirements.push({id:"#cwl-js-engine",class:"ExpressionEngineRequirement",requirements:[{dockerPull:"rabix/js-engine",class:"DockerRequirement"}]})),n(),Object.assign({},e,this.customProps)},C);function C(e,t){var n=o.call(this,t)||this;return n.cwlVersion="sbg:draft-2",n.baseCommand=[],n.inputs=[],n.outputs=[],n.requirements=[],n.hints=[],n.arguments=[],n.hasStdErr=!1,n.initializeExprWatchers(),e&&n.deserialize(e),t||n.namespaces.has("sbg")||n.namespaces.set("sbg","https://www.sevenbridges.com/"),n.constructed=!0,n.validateAllExpressions(),n.initializeJobWatchers(),n}t.SBDraft2CommandLineToolModel=n},8031:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(2867)),a=n(743),l=n(7287),n=(o=s.CommandOutputBindingModel,r(u,o),Object.defineProperty(u.prototype,"glob",{get:function(){return this._glob},set:function(e){this.setGlobExpression(e,a.SBDraft2ExpressionModel)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"outputEval",{get:function(){return this._outputEval},set:function(e){this.setOutputEval(e,a.SBDraft2ExpressionModel),this.validateOutputEval()},enumerable:!0,configurable:!0}),u.prototype.validateOutputEval=function(){var e;"expression"!==this._outputEval.type&&void 0!==this._outputEval.serialize()?this._outputEval.setIssue(((e={})[this.loc+".outputEval"]={type:"error",message:"outputEval must be an expression",code:l.ErrorCode.OUTPUT_EVAL_EXPR},e)):this._outputEval.clearIssue(l.ErrorCode.OUTPUT_EVAL_EXPR)},u.prototype.setInheritMetadataFrom=function(e){this.inheritMetadataFrom=e},u.prototype.serialize=function(){var n=this,i={};return this._glob&&this._glob.serialize()&&(i.glob=this._glob.serialize()),Object.keys(this.metadata).length&&(i["sbg:metadata"]={},Object.keys(this.metadata).filter(function(e){return e}).forEach(function(e){var t=n.metadata[e].serialize();void 0!==t&&(i["sbg:metadata"][e]=t)})),this.inheritMetadataFrom&&(i["sbg:inheritMetadataFrom"]="#"===this.inheritMetadataFrom.substr(0)?this.inheritMetadataFrom:"#"+this.inheritMetadataFrom),this.loadContents&&(i.loadContents=!0),this._outputEval.serialize()&&(i.outputEval=this._outputEval.serialize()),Object.assign({},this.customProps,i)},u.prototype.deserialize=function(n){var i=this,t=["glob","secondaryFiles","outputEval","loadContents","sbg:metadata","sbg:inheritMetadataFrom"];n&&n.constructor===Object&&(Array.isArray(n.glob)?(console.warn("Not supporting glob which is string[] at "+this.loc+". Glob cannot be edited via model"),t.splice(0,1)):(this._glob=new a.SBDraft2ExpressionModel(n.glob,this.loc+".glob",this.eventHub),this._glob.setValidationCallback(function(e){return i.updateValidity(e)}),this.validateGlob()),this.loadContents=!0===n.loadContents,this.inheritMetadataFrom=null,n["sbg:inheritMetadataFrom"]&&(this.inheritMetadataFrom="#"===n["sbg:inheritMetadataFrom"].charAt(0)?n["sbg:inheritMetadataFrom"].substr(1):n["sbg:inheritMetadataFrom"]),this.eventHub&&this.modelListeners.push(this.eventHub.on("input.change.id",function(e){e.oldId===i.inheritMetadataFrom&&(i.inheritMetadataFrom=e.newId)})),this._outputEval=new a.SBDraft2ExpressionModel(n.outputEval,this.loc+".outputEval",this.eventHub),this._outputEval.setValidationCallback(function(e){return i.updateValidity(e)}),this.validateOutputEval(),n["sbg:metadata"]&&n["sbg:metadata"].constructor===Object&&Object.keys(n["sbg:metadata"]).filter(function(e){return e}).forEach(function(e){var t=n["sbg:metadata"][e];void 0!==t&&(i.metadata[e]=new a.SBDraft2ExpressionModel(t,i.loc+'["sbg:metadata"].'+e,i.eventHub),i.metadata[e].setValidationCallback(function(e){return i.updateValidity(e)}))}),Object.keys(n).forEach(function(e){-1===t.indexOf(e)&&(i.customProps[e]=n[e])}))},u);function u(e,t,n){t=o.call(this,t,n)||this;return t.metadata={},t.hasSecondaryFiles=!0,t.hasMetadata=!0,t.hasInheritMetadata=!0,t.customProps={},t.deserialize(e||{}),t}t.SBDraft2CommandOutputBindingModel=n},3358:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1836)),a=n(887),l=n(4916),u=n(8031),c=n(743),n=(o=s.CommandOutputParameterModel,r(p,o),p.prototype.updateSecondaryFiles=function(e){this.outputBinding&&this._updateSecondaryFiles(e)},p.prototype.addSecondaryFile=function(e){if(this.outputBinding)return this._addSecondaryFile(e,c.SBDraft2ExpressionModel,this.outputBinding.loc)},p.prototype.removeSecondaryFile=function(e){this.outputBinding&&this._removeSecondaryFile(e)},p.prototype.updateOutputBinding=function(e){var t=this;this.outputBinding=new u.SBDraft2CommandOutputBindingModel(e instanceof u.SBDraft2CommandOutputBindingModel?e.serialize():{},this.loc+".outputBinding",this.eventHub),this.outputBinding.setValidationCallback(function(e){return t.updateValidity(e)})},p.prototype.serialize=function(){var e={};return e.type=this.type.serialize(),this.label&&(e.label=this.label),this.description&&(e.description=this.description),l.isFileType(this)&&this.fileTypes&&this.fileTypes.length&&(e["sbg:fileTypes"]=(this.fileTypes||[]).join(", ")),this.outputBinding&&(e.outputBinding=this.outputBinding.serialize(),l.isFileType(this)||(delete e["sbg:fileTypes"],delete e.outputBinding.secondaryFiles),l.isFileType(this)&&0<this.secondaryFiles.length&&(e.outputBinding.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),Object.keys(e.outputBinding).length||delete e.outputBinding),this.isField?e.name=this.id||"":e.id=this.id?"#"+this.id:"",l.spreadAllProps(e,this.customProps)},p.prototype.deserialize=function(e){var t=this,n=["id","label","description","outputBinding","type","sbg:fileTypes"];this.isField=!!e.name,this.isField?n.push("name"):n.push("id"),e.id&&"#"===e.id.charAt(0)?this.id=e.id.substr(1):this.id=e.id||e.name||"",this.label=e.label,this.description=e.description,this.fileTypes=l.commaSeparatedToArray(e["sbg:fileTypes"]),this.outputBinding=new u.SBDraft2CommandOutputBindingModel(e.outputBinding,this.loc+".outputBinding",this.eventHub),this.outputBinding.setValidationCallback(function(e){return t.updateValidity(e)}),e.outputBinding&&e.outputBinding.secondaryFiles&&(this.secondaryFiles=e.outputBinding.secondaryFiles.map(function(e){return t.addSecondaryFile(e)})),this.type=new a.ParameterTypeModel(e.type,p,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){return t.updateValidity(e)}),this.type.hasMapType=!0,l.isType(this,["record","enum"])&&!this.type.name&&(this.type.name=this.id),this.attachFileTypeListeners(),l.spreadSelectProps(e,this.customProps,n)},p);function p(e,t,n){t=o.call(this,t,n)||this;return t.secondaryFiles=[],t.hasSecondaryFiles=!1,t.hasSecondaryFilesInRoot=!1,t.deserialize(e||{}),t}t.SBDraft2CommandOutputParameterModel=n},7678:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8753)),a=n(7905),n=(o=s.CreateFileRequirementModel,r(l,o),Object.defineProperty(l.prototype,"listing",{get:function(){return this._listing},set:function(e){var n=this;this._listing=[],e.forEach(function(e,t){e instanceof a.SBDraft2FileDefModel||(e=new a.SBDraft2FileDefModel(e,n.loc+".fileDef["+t+"]",n.eventHub)),n._listing.push(e),e.setValidationCallback(function(e){return n.updateValidity(e)})})},enumerable:!0,configurable:!0}),l.prototype.addDirent=function(e){var t=this;return e instanceof a.SBDraft2FileDefModel?(this._listing.push(e),e.setValidationCallback(function(e){return t.updateValidity(e)}),e.loc=this.loc+".fileDef["+this._listing.length+"]"):((e=new a.SBDraft2FileDefModel(e,this.loc+".fileDef["+this._listing.length+"]",this.eventHub)).setValidationCallback(function(e){return t.updateValidity(e)}),this._listing.push(e)),e},l.prototype.deserialize=function(t){var n=this;t.fileDef&&Array.isArray(t.fileDef)&&(this._listing=t.fileDef.map(function(e,t){e=new a.SBDraft2FileDefModel(e,n.loc+".fileDef["+t+"]",n.eventHub);return e.setValidationCallback(function(e){return n.updateValidity(e)}),e})),Object.keys(t).forEach(function(e){"fileDef"!==e&&"class"!==e&&(n.customProps[e]=t[e])})},l.prototype.serialize=function(){var e={class:"CreateFileRequirement"},t=(e.fileDef=this._listing.map(function(e){return e.serialize()}),Object.keys(this.customProps));if(0!==e.fileDef.length||0!==t.length)return Object.assign({},e,this.customProps)},l);function l(e,t,n){t=o.call(this,t,n)||this;return t.class="CreateFileRequirement",t._listing=[],t.deserialize(e),t}t.SBDraft2CreateFileRequirementModel=n},820:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(5275)),a=n(743),l=n(8668),n=(o=s.EnvVarRequirementModel,r(u,o),u.prototype.serialize=function(){var e={};if(e.class=this.class,e.envDef=this.envDef.map(function(e){return{envName:e.envName,envValue:e.envValue.serialize()}}).filter(function(e){return!!e.envName}),0!=e.envDef.length)return l.spreadAllProps(e,this.customProps)},u.prototype.deserialize=function(e){var i=this;return this.envDef=e.envDef?l.ensureArray(e.envDef,"envName","envValue").map(function(e,t){var n=e.envValue||"",n=new a.SBDraft2ExpressionModel(n,i.loc+".envDef["+t+"].envValue",i.eventHub);return n.setValidationCallback(function(e){return i.updateValidity(e)}),{envName:e.envName,envValue:n}}):[],l.spreadSelectProps(e,this.customProps,["class","envDef"])},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.SBDraft2EnvRequirementModel=n},743:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n=(Object.defineProperty(t,"__esModule",{value:!0}),o=n(1636).ExpressionModel,r(a,o),a.prototype.evaluate=function(e){return void 0===e&&(e=this.cachedContext),void 0!==this.value?this._evaluate(this.value,e,"draft-2"):new Promise(function(e){e(void 0)})},a.prototype.serialize=function(){if("expression"===this.type&&this.eventHub&&this.eventHub.emit("expression.serialize",!0),!(this.value&&this.value.hasOwnProperty("script")&&""===this.value.script||""===this.value||null===this.value))return this.value},a.prototype.deserialize=function(e){this.value=e=void 0===e?"":e},a.prototype.setValue=function(e,t){this.result=void 0,this.value="expression"===t&&"string"==typeof e?{class:"Expression",engine:"#cwl-js-engine",script:""===e.trim()?"":e}:e,this.type=t,this.eventHub&&this.eventHub.emit("expression.change",this)},a.prototype.toString=function(){return"expression"===this.type?this.value.script:null===this.value||void 0===this.value?"":this.value.toString()},a.prototype.getScript=function(){return void 0!==this.value&&null!==this.value?this.value.script:void 0},a.prototype.clone=function(){return new a(this.serialize(),this.loc,this.eventHub)},a.prototype.cloneStatus=function(e){this.setValue(e.serialize(),e.type),this.setIssue(s({},e.issues))},a);function a(e,t,n){t=o.call(this,t,n)||this;return e instanceof a&&(e=e.serialize()),t.deserialize(e),e&&(t.type=e.script?"expression":"string"),t.eventHub&&t.eventHub.emit("expression.create",t),t}t.SBDraft2ExpressionModel=n},7905:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8194)),a=n(4916),l=n(743),n=(o=s.DirentModel,r(u,o),u.prototype.serialize=function(){var e={};return void 0!==this.entryName.serialize()&&(e.filename=this.entryName.serialize()),void 0!==this.entry.serialize()&&(e.fileContent=this.entry.serialize()),Object.assign({},e,this.customProps)},u.prototype.deserialize=function(e){var t=this;e&&(this.entryName=new l.SBDraft2ExpressionModel(e.filename,this.loc+".filename",this.eventHub),this.entryName.setValidationCallback(function(e){return t.updateValidity(e)}),this.entry=new l.SBDraft2ExpressionModel(e.fileContent,this.loc+".fileContent",this.eventHub),this.entry.setValidationCallback(function(e){return t.updateValidity(e)})),a.spreadSelectProps(e,this.customProps,["filename","fileContent"])},u);function u(e,t,n){var i=o.call(this,t,n)||this;return i.entryName=new l.SBDraft2ExpressionModel("",i.loc+".filename",i.eventHub),i.entry=new l.SBDraft2ExpressionModel("",i.loc+".fileContent",i.eventHub),i.customProps={},i.entryName.setValidationCallback(function(e){return i.updateValidity(e)}),i.entry.setValidationCallback(function(e){return i.updateValidity(e)}),i.deserialize(e),i}t.SBDraft2FileDefModel=n},9336:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(99)),a=n(4916),l=n(743),n=(o=s.ResourceRequirementModel,r(u,o),u);function u(e,t){var n=o.call(this,e,t)||this,e=n.loc.slice(0,-1);return n.mem=new l.SBDraft2ExpressionModel("",e+"].value",n.eventHub),n.mem.setValidationCallback(function(e){return n.updateValidity(e)}),n.cores=new l.SBDraft2ExpressionModel("",a.incrementString(e)+"].value",n.eventHub),n.cores.setValidationCallback(function(e){return n.updateValidity(e)}),n}t.SBDraft2ResourceRequirementModel=n},4627:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c=(Object.defineProperty(t,"__esModule",{value:!0}),n(4770)),s=n(7076),a=n(2153),p=n(7206),l=n(7792),d=n(4916),h=n(2240),f=n(160),y=n(743),n=(o=c.StepModel,r(m,o),m.prototype.setRunProcess=function(e){e&&e.class&&(this.createRun(e),this.compareInPorts(!0),this.compareOutPorts(!0),this.eventHub.emit("step.update",this))},m.prototype.addHint=function(e){return this.createReq(e,y.SBDraft2ExpressionModel,void 0,!0)},m.prototype.compareInPorts=function(r){var s=this;void 0===r&&(r=!1);var e,t=this.run.inputs,a=[],l=this.in;r&&(e=c.StepModel.portDifference(this.in,this.run.inputs),a=e[0],l=e[1],e[2].forEach(function(e){return s.eventHub.emit("step.inPort.remove",e)})),this.in=t.map(function(t,e){var n=l.find(function(e){return t.id===e.id}),i=n?n.serialize():{id:s.id+"."+t.id},o=new p.SBDraft2WorkflowStepInputModel(u({type:t.type,fileTypes:t.fileTypes||[],description:t.description,label:t.label,secondaryFiles:t.secondaryFiles},i,{"sbg:toolDefaultValue":t.customProps["sbg:toolDefaultValue"],"sbg:category":t.customProps["sbg:category"],"sbg:altPrefix":t.customProps["sbg:altPrefix"],"sbg:secretAlias":t.customProps["sbg:secretAlias"]}),s,s.loc+".inputs["+e+"]"),i=(o.setValidationCallback(function(e){return s.updateValidity(e)}),a.find(function(e){return e.id===o.id})&&s.eventHub.emit("step.inPort.create",o),n&&r&&s.eventHub.emit("step.port.change",o),o.isVisible=(n?n.isVisible:!!t.customProps["sbg:includeInPorts"])||d.isFileType(t,!0),!n||n.isVisible!==o.isVisible);return o.isVisible&&r&&i&&setTimeout(function(){s.eventHub.emit("step.inPort.show",o)}),o}).filter(function(e){return void 0!==e})},m.prototype.compareOutPorts=function(o){var r=this;void 0===o&&(o=!1);var e,t=this.run.outputs,s=[];o&&(e=c.StepModel.portDifference(this.out,this.run.outputs),s=e[0],e[1],e[2].forEach(function(e){return r.eventHub.emit("step.outPort.remove",e)})),this.out=t.map(function(t,e){var n=(n=r.out.find(function(e){return t.id===e.id}))?n.serialize():{id:r.id+"."+t.id},i=new l.SBDraft2WorkflowStepOutputModel(u({type:t.type,fileTypes:t.fileTypes,description:t.description,secondaryFiles:t.secondaryFiles,label:t.label},n),r,r.loc+".outputs["+e+"]");return s.find(function(e){return e.id===i.id})&&r.eventHub.emit("step.outPort.create",i),n&&o&&r.eventHub.emit("step.port.change",i),i}).filter(function(e){return void 0!==e})},m.prototype.createRun=function(e){var t=this;switch(e.class){case"Workflow":this.run=h.WorkflowFactory.from(e,this.loc+".run"),this.run.setValidationCallback(function(e){return t.updateValidity(e)});break;case"CommandLineTool":this.run=f.CommandLineToolFactory.from(e,this.loc+".run"),this.run.setValidationCallback(function(e){return t.updateValidity(e)});break;case"ExpressionTool":this.run=new a.ExpressionToolModel(e);break;default:throw new Error('Unknown process class "'+e.class+'" at '+this.loc+'.step. Expected "CommandLineTool", "Workflow", or "ExpressionTool"')}this.id=this.id||d.snakeCase(this.run.id)||d.snakeCase(this.run.label)||d.snakeCase(this.loc),this.id="#"===this.id.charAt(0)?this.id.substr(1):this.id,this._label=this._label||this.run.label||""},m.prototype.serialize=function(){return this._serialize(!1)},m.prototype.serializeEmbedded=function(e){return this._serialize(!0,e=void 0===e?!1:e)},m.prototype._serialize=function(e,t){var n=this,i=(void 0===t&&(t=!1),{}),e=(i.id="#"+this.id,i.inputs=this.in.map(function(e){return e.serialize()}).filter(function(e){e=Object.keys(e);return!(1===e.length&&"id"===e[0])}),i.outputs=this.out.map(function(e){return e.serialize()}),this.customProps["sbg:rdfId"]&&!e?i.run=this.customProps["sbg:rdfId"]:e&&this.run&&this.run instanceof s.WorkflowModel?i.run=this.run.serializeEmbedded():this.run&&"function"==typeof this.run.serialize?i.run=this.run.serialize():i.run=this.runPath,this.hints.length&&(i.hints=this.hints.map(function(e){return e.serialize()})),u({},this.customProps));return t||(delete e["sbg:rdfId"],delete e["sbg:rdfSource"]),this._label&&(i.label=this._label),this.description&&(i.description=this.description),this.scatter&&(i.scatter=this.in.filter(function(e){return n.scatter===e.id})[0].destinationId),d.spreadAllProps(i,e)},m.prototype.deserialize=function(e){var n=this;this.id=e.id||"",this.description=e.description,this._label=e.label,this.scatter=e.scatter?e.scatter.split(".")[1]:null,this.hints=d.ensureArray(e.hints).map(function(e,t){return n.createReq(e,y.SBDraft2ExpressionModel,n.loc+".hints["+t+"]",!0)}),e.run&&"string"==typeof e.run?this.runPath=e.run:e.run&&"string"!=typeof e.run&&e.run.class&&this.createRun(e.run),this.id="#"===this.id.charAt(0)?this.id.substr(1):this.id,this.in=d.ensureArray(e.inputs).map(function(e,t){return new p.SBDraft2WorkflowStepInputModel(e,n,n.loc+".inputs["+t+"]")}),this.out=d.ensureArray(e.outputs).map(function(e,t){return new l.SBDraft2WorkflowStepOutputModel(e,n,n.loc+".outputs["+t+"]")}),"string"==typeof e.run?console.warn("Expected to get json for step.run at "+this.loc+", reading in and out from step"):(this.compareInPorts(),this.compareOutPorts()),this.in.forEach(function(e){d.isFileType(e,!0)&&(e.isVisible=!0)}),d.spreadSelectProps(e,this.customProps,["id","description","label","run","scatter","inputs","outputs","hints"])},m);function m(e,t,n){t=o.call(this,t,n)||this;return t.hasMultipleScatter=!1,t.hasScatterMethod=!1,e&&t.deserialize(e),t}t.SBDraft2StepModel=n},4696:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(2110)),a=n(887),l=n(2625),u=n(4916),c=n(743),n=(o=s.WorkflowInputParameterModel,r(p,o),Object.defineProperty(p.prototype,"connectionId",{get:function(){return""+l.STEP_OUTPUT_CONNECTION_PREFIX+this.id+"/"+this.id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"sourceId",{get:function(){return"#"+this.id},enumerable:!0,configurable:!0}),p.prototype.addParameter=function(e){var t=this;this.type=new a.ParameterTypeModel(e.type,p,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){t.updateValidity(e)})},p.prototype.deserialize=function(e){var t=this;this.isField=!!e.name,e.id&&"#"===e.id.charAt(0)?this.id=e.id.substr(1):this.id=e.id||e.name||"",this.addParameter(e),this.type.hasMapType=!0,this.fileTypes=u.commaSeparatedToArray(e["sbg:fileTypes"]),this._label=e.label,this.description=e.description,this.isVisible="File"===this.type.type||"File"===this.type.items||!!e["sbg:includeInPorts"],this.secondaryFiles=u.ensureArray(e.secondaryFiles).map(function(e){return t.addSecondaryFile(e)}),this.attachFileTypeListeners(),u.spreadSelectProps(e,this.customProps,["name","id","type","label","description","sbg:fileTypes","secondaryFiles"])},p.prototype.serialize=function(){var e={};return e.type=this.type.serialize(),this._label&&(e.label=this._label),this.description&&(e.description=this.description),this.fileTypes.length&&u.isFileType(this)&&(e["sbg:fileTypes"]=this.fileTypes.join(", ")),this.isField?e.name=this.id:e.id="#"+this.id,this.secondaryFiles&&this.secondaryFiles.length&&(e.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),u.spreadAllProps(e,this.customProps)},p.prototype.addSecondaryFile=function(e){return this._addSecondaryFile(e,c.SBDraft2ExpressionModel,this.loc)},p.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},p.prototype.removeSecondaryFile=function(e){this._removeSecondaryFile(e)},p);function p(e,t,n){t=o.call(this,t,n)||this;return e&&t.deserialize(e),t}t.SBDraft2WorkflowInputParameterModel=n},6571:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(5752)),a=n(2110),l=n(7076),u=n(2625),c=n(4916),p=n(743),d=n(4627),h=n(4696),f=n(5740),n=(o=l.WorkflowModel,r(y,o),y.prototype.getContext=function(e){},y.prototype.createInputFromPort=function(e,t){e=o.prototype._createInputFromPort.call(this,e,h.SBDraft2WorkflowInputParameterModel,void 0,void 0,t=void 0===t?{}:t);return e.customProps["sbg:includeInPorts"]=!0,e},y.prototype.createOutputFromPort=function(e,t){return o.prototype._createOutputFromPort.call(this,e,f.SBDraft2WorkflowOutputParameterModel,void 0,void 0,t=void 0===t?{}:t)},y.prototype.exposePort=function(e){o.prototype._exposePort.call(this,e,h.SBDraft2WorkflowInputParameterModel)},y.prototype.getSourceConnectionId=function(e){var t,n;return/[.]+/.test(e)?(n=(t=e.split("."))[0],t=t[1],n="#"===n.charAt(0)?n.substr(1):n,""+u.STEP_OUTPUT_CONNECTION_PREFIX+n+"/"+t):(n="#"===e.charAt(0)?e.substr(1):e,""+u.STEP_OUTPUT_CONNECTION_PREFIX+n+"/"+n)},y.prototype.isSourceFromStep=function(e,t){return/[.]+/.test(e)&&(e=e.split("."))[0]==="#"+t?e[1]:null},y.prototype.addStepFromProcess=function(e){var t=this,n=this.loc+".steps["+this.steps.length+"]",e=new d.SBDraft2StepModel({inputs:[],outputs:[],run:e},n,this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.steps.push(e),e.id=this.getNextAvailableId(e.id),this.addStepToGraph(e),this.eventHub.emit("step.create",e),e},y.prototype.setBatch=function(e,t){t&&"none"!==t?(this.batchInput=e,this.batchByValue=t):(this.batchByValue=null,this.batchInput=null)},y.prototype.addHint=function(e){return this.createReq(e,p.SBDraft2ExpressionModel,void 0,!0)},y.prototype.serializeEmbedded=function(e){return this._serialize(!0,e=void 0===e?!1:e)},y.prototype.serialize=function(){return this._serialize(!1)},y.prototype._serialize=function(t,n){void 0===n&&(n=!1);var e,i,o={class:"Workflow",cwlVersion:"sbg:draft-2"};return(this.sbgId||this.id)&&(o.id=this.sbgId||this.id),this.label&&(o.label=this.label),this.description&&(o.description=this.description),this.namespaces.isNotEmpty()&&(o.$namespaces=this.namespaces.serialize()),o.inputs=this.inputs.map(function(e){return e.serialize()}),o.outputs=this.outputs.map(function(e){return e.serialize()}),o.steps=this.steps.map(function(e){return t?e.serializeEmbedded(n):e.serialize()}),this.hints.length&&(o.hints=this.hints.map(function(e){return e.serialize()})),this.batchInput&&(o["sbg:batchInput"]="#"+this.batchInput),this.batchByValue&&(i={type:(e=Array.isArray(this.batchByValue))?"criteria":"item"},e&&(i.criteria=this.batchByValue),o["sbg:batchBy"]=i),c.spreadAllProps(o,this.customProps)},y.prototype.deserialize=function(e){var n=this;this.label=e.label,this.description=e.description,this.namespaces=new s.NamespaceBag(e.$namespaces),this.id=e["sbg:id"]&&2<e["sbg:id"].split("/").length?e["sbg:id"].split("/")[2]:c.snakeCase(e.id),this.sbgId=e["sbg:id"],this.steps=c.ensureArray(e.steps).map(function(e,t){e.run&&"string"!=typeof e.run&&(e.run.cwlVersion=e.run.cwlVersion||"sbg:draft-2");e=new d.SBDraft2StepModel(e,n.loc+".steps["+t+"]",n.eventHub);return e.setValidationCallback(function(e){return n.updateValidity(e)}),e}),this.inputs=c.ensureArray(e.inputs).map(function(e,t){e=new h.SBDraft2WorkflowInputParameterModel(e,n.loc+".inputs["+t+"]",n.eventHub);return e.setValidationCallback(function(e){return n.updateValidity(e)}),e}),this.outputs=c.ensureArray(e.outputs).map(function(e,t){e=new f.SBDraft2WorkflowOutputParameterModel(e,n.loc+".outputs["+t+"]",n.eventHub);return e.setValidationCallback(function(e){return n.updateValidity(e)}),e}),this.hints=c.ensureArray(e.hints).map(function(e,t){return n.createReq(e,p.SBDraft2ExpressionModel,n.loc+".hints["+t+"]",!0)}),e["sbg:batchInput"]?(0===e["sbg:batchInput"].indexOf("#")&&(this.batchInput=e["sbg:batchInput"].substring(1)),"item"===e["sbg:batchBy"].type?this.batchByValue="item":this.batchByValue=e["sbg:batchBy"].criteria):(this.batchByValue=null,this.batchInput=null),c.spreadSelectProps(e,this.customProps,["id","$namespaces","class","cwlVersion","steps","inputs","outputs","label","hints","description","sbg:batchBy","sbg:batchInput"])},y);function y(e,t){var n=o.call(this,t=void 0===t?"document":t)||this;return n.cwlVersion="sbg:draft-2",n.steps=[],n.inputs=[],n.outputs=[],n.hasBatch=!0,n.initializeExprWatchers(),e&&n.deserialize(e),n.constructed=!0,t||n.namespaces.has("sbg")||n.namespaces.set("sbg","https://www.sevenbridges.com/"),n.graph=n.constructGraph(),n.validateAllExpressions(),n.validateGraph(),n.eventHub.on("io.change.id",function(e,t){e instanceof a.WorkflowInputParameterModel&&n.batchInput===t&&(n.batchInput=e.id)}),n}t.SBDraft2WorkflowModel=n},5740:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(3175)),a=n(887),l=n(4916),u=n(743),n=(o=s.WorkflowOutputParameterModel,r(c,o),Object.defineProperty(c.prototype,"destinationId",{get:function(){return"#"+this.id},enumerable:!0,configurable:!0}),c.prototype.serialize=function(){var e={};return e.id="#"+this.id,this._label&&(e.label=this._label),this.description&&(e.description=this.description),e.source=l.ensureArray(this.source),this.type&&(e.type=this.type.serialize()),l.isFileType(this)&&this.fileTypes.length&&(e["sbg:fileTypes"]=this.fileTypes.join(", ")),this.secondaryFiles&&this.secondaryFiles.length&&(e.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),l.spreadAllProps(e,this.customProps)},c.prototype.deserialize=function(e){var t=this;e.id&&"#"===e.id.charAt(0)?this.id=e.id.substr(1):this.id=e.id||"",this.source=l.ensureArray(e.source),this.type=new a.ParameterTypeModel(e.type,c,this.id+"_field",this.loc+".type",this.eventHub),this.type.hasMapType=!0,this._label=e.label,this.description=e.description,this.fileTypes=l.commaSeparatedToArray(e["sbg:fileTypes"]),this.secondaryFiles=l.ensureArray(e.secondaryFiles).map(function(e){return t.addSecondaryFile(e)}),this.attachFileTypeListeners(),l.spreadSelectProps(e,this.customProps,["id","type","source","label","description","sbg:fileTypes","secondaryFiles"])},c.prototype.addSecondaryFile=function(e){return this._addSecondaryFile(e,u.SBDraft2ExpressionModel,""+this.loc)},c.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},c.prototype.removeSecondaryFile=function(e){this._removeSecondaryFile(e)},c);function c(e,t,n){t=o.call(this,t,n)||this;return e&&t.deserialize(e),t}t.SBDraft2WorkflowOutputParameterModel=n},7206:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1581)),a=n(887),l=n(7153),u=n(2625),c=n(4916),n=(o=l.WorkflowStepInputModel,r(p,o),Object.defineProperty(p.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"connectionId",{get:function(){return""+u.STEP_INPUT_CONNECTION_PREFIX+this.parentStep.id+"/"+this._id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"destinationId",{get:function(){return"#"+this.parentStep.id+"."+this._id},enumerable:!0,configurable:!0}),p.prototype.serialize=function(){var e={};return e.id="#"+this.parentStep.id+"."+this._id,void 0!==this.default&&null!==this.default&&(e.default=this.default),this.source.length&&(1!==this.source.length||this.type.isItemOrArray||this.type.items||this.linkMerge.value&&"merge_nested"!==this.linkMerge.value?e.source=this.source.slice():e.source=this.source[0]),(e.linkMerge=this.linkMerge.serialize())||delete e.linkMerge,delete(e=c.spreadAllProps(e,this.customProps))["sbg:toolDefaultValue"],delete e["sbg:category"],delete e["sbg:altPrefix"],e},p.prototype.deserialize=function(e){this.default=e.default,this._id=e.id.split(".")[1],this.fileTypes=e.fileTypes,this.description=e.description,this.label=e.label,this.source=c.ensureArray(e.source),this.linkMerge=new s.LinkMerge(e.linkMerge),this.secondaryFiles=e.secondaryFiles,this.type=e.type,this.type||(this.type=new a.ParameterTypeModel(null)),this.type.hasMapType=!0,c.spreadSelectProps(e,this.customProps,["default","id","fileTypes","type","description","label","source","linkMerge","secondaryFiles"])},p);function p(e,t,n){n=o.call(this,n)||this;return n.parentStep=t||{},e&&n.deserialize(e),n}t.SBDraft2WorkflowStepInputModel=n},7792:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1303)),a=n(4916),l=n(2625),u=n(887),n=(o=s.WorkflowStepOutputModel,r(c,o),Object.defineProperty(c.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"connectionId",{get:function(){return""+l.STEP_OUTPUT_CONNECTION_PREFIX+this.parentStep.id+"/"+this._id},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"sourceId",{get:function(){return"#"+this.parentStep.id+"."+this._id},enumerable:!0,configurable:!0}),c.prototype.serialize=function(){return{id:"#"+this.parentStep.id+"."+this._id}},c.prototype.deserialize=function(e){this._id=e.id.split(".")[1],this.fileTypes=e.fileTypes,this.type=e.type,this.description=e.description,this.label=e.label,this.secondaryFiles=e.secondaryFiles,this.type||(this.type=new u.ParameterTypeModel(null)),this.type.hasMapType=!0,a.spreadSelectProps(e,this.customProps,["id","sbg:fileTypes"])},c);function c(e,t,n){n=o.call(this,n)||this;return n.parentStep=t||{},e&&n.deserialize(e),n}t.SBDraft2WorkflowStepOutputModel=n},1581:(e,t)=>{function n(e){this.originalValue=e,this.originalValue&&(this.value=e)}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.toString=function(){return this.value},n.prototype.serialize=function(){if(this.originalValue||"merge_flattened"===this.value||"merge_nested"===this.value)return this.value},t.LinkMerge=n},5097:(e,t)=>{function n(e){this.value="deep_listing","shallow_listing"!==e&&"no_listing"!==e||(this.value=e)}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.toString=function(){return this.value},t.LoadListing=n},5752:(e,t)=>{function n(t){void 0===t&&(t={});var n=this;this.namespaces=new Map,Object.keys(t).forEach(function(e){return n.namespaces.set(e,{uri:t[e],isOriginal:!0})})}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.has=function(e){return this.namespaces.has(e)},n.prototype.set=function(e,t){this.namespaces.set(e,{uri:t,isOriginal:!1})},n.prototype.serialize=function(){var n;if(0!==this.namespaces.size)return n={},this.namespaces.forEach(function(e,t){return n[t]=e.uri}),n},n.prototype.isEmpty=function(){return 0===this.namespaces.size},n.prototype.isNotEmpty=function(){return 0!==this.namespaces.size},t.NamespaceBag=n},5007:(e,t)=>{function n(e){this.originalValue=e,this.originalValue&&(this.value=e)}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.toString=function(){return this.value},n.prototype.serialize=function(){if(this.originalValue||"first_non_null"===this.value||"the_only_non_null"===this.value||"all_non_null"===this.value)return this.value},t.PickValue=n},7128:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(1693),l=n(7287),n=(o=s.ValidationBase,r(u,o),Object.defineProperty(u.prototype,"prefix",{get:function(){return this.binding?this.binding.prefix:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"position",{get:function(){return this.binding&&this.binding.position||0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"separate",{get:function(){return!this.binding||!1!==this.binding.separate},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"itemSeparator",{get:function(){return this.binding?this.binding.itemSeparator:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"valueFrom",{get:function(){return this.binding?this.binding.valueFrom:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"shellQuote",{get:function(){return this.binding?this.binding.shellQuote:void 0},set:function(e){this.binding.shellQuote=e},enumerable:!0,configurable:!0}),u.prototype.toggleBinding=function(e){new a.UnimplementedMethodException("toggleBinding","CommandArgumentModel")},u.prototype.updatePrimitive=function(e){new a.UnimplementedMethodException("updatePrimitive","CommandArgumentModel")},u.prototype.updateBinding=function(e){new a.UnimplementedMethodException("updateBinding","CommandArgumentModel")},u.prototype.toString=function(){return new a.UnimplementedMethodException("toString","CommandArgumentModel"),null},u.prototype.serialize=function(){return new a.UnimplementedMethodException("serialize","CommandArgumentModel"),null},u.prototype.deserialize=function(e){new a.UnimplementedMethodException("deserialize","CommandArgumentModel")},u.prototype.validate=function(e){var t=this;return this.clearIssue(l.ErrorCode.EXPR_ALL),this.hasBinding?this.binding.validate(e):new Promise(function(e){e(t.issues)})},u);function u(e,t){e=o.call(this,e)||this;return e.eventHub=t,e.hasBinding=!1,e.customProps={},e}t.CommandArgumentModel=n},7802:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(1693),l=n(4916),u=n(7287),n=(o=s.ValidationBase,r(c,o),Object.defineProperty(c.prototype,"isBound",{get:function(){return void 0!==this.inputBinding&&null!==this.inputBinding},enumerable:!0,configurable:!0}),c.prototype.removeInputBinding=function(){this.inputBinding&&this.inputBinding.clearIssue(u.ErrorCode.EXPR_ALL),this.hasSecondaryFilesInRoot||(this.secondaryFiles.forEach(function(e){return e.clearIssue(u.ErrorCode.EXPR_ALL)}),this.secondaryFiles=[]),this.inputBinding=null,this.type&&(this.type.typeBinding=null)},c.prototype.updateLoc=function(e){o.prototype.updateLoc.call(this,e),this.type.updateLoc(e+".type")},c.prototype._addSecondaryFile=function(e,t,n){var i=this,t=new t(e,l.incrementLastLoc(this.secondaryFiles,n+".secondaryFiles"),this.eventHub);return this.secondaryFiles.push(t),t.setValidationCallback(function(e){return i.updateValidity(e)}),t},c.prototype._updateSecondaryFiles=function(e){var t=this;this.secondaryFiles.forEach(function(e){return e.clearIssue(u.ErrorCode.EXPR_ALL)}),this.secondaryFiles=[],e.forEach(function(e){return t.addSecondaryFile(e)})},c.prototype._removeSecondaryFile=function(e){var t=this.secondaryFiles[e];t&&(t.setValue("","string"),this.secondaryFiles.splice(e,1))},c.prototype.validate=function(t){var e,n=[];try{l.validateID(this.id)}catch(t){this.setIssue(((e={})[this.loc+".id"]={type:"error",message:t.message,code:t.code},e))}return this.inputBinding&&n.push(this.inputBinding.validate(t)),this.type&&n.push(this.type.validate(t)),this.secondaryFiles&&n.concat(this.secondaryFiles.map(function(e){return e.validate(t)})),Promise.all(n)},c.prototype.serialize=function(){new a.UnimplementedMethodException("serialize","CommandInputParameterModel")},c.prototype.deserialize=function(e){new a.UnimplementedMethodException("deserialize","CommandInputParameterModel")},c.prototype.attachFileTypeListeners=function(){var t=this;this.eventHub&&this.modelListeners.push(this.eventHub.on("io.change.type",function(e){t.loc+".type"!==e||l.isFileType(t)||t.updateSecondaryFiles([])}))},c);function c(e,t){e=o.call(this,e)||this;return e.isField=!1,e.customProps={},e.eventHub=t,e}t.CommandInputParameterModel=n},895:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),l=n(1693),n=(o=a.ValidationBase,r(u,o),u.prototype.validate=function(e){var n=this;return new l.UnimplementedMethodException("validate","CommandLineBindingModel"),new Promise(function(e,t){return e(n.issues)})},u.prototype.setValueFrom=function(e){new l.UnimplementedMethodException("setValueFrom","CommandLineBindingModel")},u.prototype.serialize=function(){return new l.UnimplementedMethodException("serialize","CommandLineBindingModel"),null},u.prototype.deserialize=function(e){new l.UnimplementedMethodException("deserialize","CommandLineBindingModel")},u.prototype.cloneStatus=function(e){this.setIssue(s({},e.issues)),this.deserialize(e.serialize())},u);function u(e,t){e=o.call(this,e)||this;return e.eventHub=t,e.customProps={},e}t.CommandLineBindingModel=n},160:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(2016),o=n(6761),r=n(4471),s=n(3528),a=n(4416);function l(){}l.from=function(e,t){if(e instanceof i.CommandLineToolModel)return e;if(e)switch(e.cwlVersion){case"v1.2":return new a.V1_2CommandLineToolModel(e,t);case"v1.1":return new o.V1_1CommandLineToolModel(e,t);case"v1.0":return new r.V1CommandLineToolModel(e,t);default:return new s.SBDraft2CommandLineToolModel(e,t)}return new s.SBDraft2CommandLineToolModel(e,t)},t.CommandLineToolFactory=l},2016:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(5752)),a=n(5589),l=n(6364),u=n(7990),c=n(1693),p=n(4916),d=n(7287),h=n(1442),f=n(7802),y=n(1836),n=(o=h.ValidationBase,r(m,o),m.prototype.setJobInputs=function(e){this.jobInputs=e||u.JobHelper.getNullJobInputs(this),this.validateAllExpressions(),this.updateCommandLine()},m.prototype.on=function(e,t){return{dispose:this.eventHub.on(e,t)}},m.prototype.off=function(e,t){this.eventHub.off(e,t)},m.prototype.initializeJobWatchers=function(){var o=this;this.eventHub.on("input.change.id",function(t){var e=o.jobInputs;t.port.isField&&(e=o.findFieldRoot(t.port,e),Array.isArray(e))?e.forEach(function(e){e[t.newId]=e[t.oldId]||u.JobHelper.generateMockJobData(t.port),delete e[t.oldId]}):(e[t.newId]=e[t.oldId]||u.JobHelper.generateMockJobData(t.port),delete e[t.oldId],o.updateCommandLine())}),this.eventHub.on("io.change.type",function(e){if(0===e.search(o.loc)&&-1<e.search("inputs")){e=e.substr(o.loc.length).replace(/type$/,"");var t=p.fetchByLoc(o,e);if(t){var n=o.jobInputs;if(t.isField&&(n=o.findFieldRoot(t,n),Array.isArray(n)))for(var i=0;i<n.length;i++)n[i][t.id]=u.JobHelper.generateMockJobData(t);else n[t.id]=u.JobHelper.generateMockJobData(t);o.updateCommandLine()}}}),this.eventHub.on("input.remove",function(e){delete o.jobInputs[e.id],o.updateCommandLine()}),this.eventHub.on("field.remove",function(t){var e;t instanceof f.CommandInputParameterModel&&(e=o.findFieldRoot(t,o.jobInputs),Array.isArray(e)?e.forEach(function(e){return delete e[t.id]}):delete e[t.id],o.updateCommandLine())}),this.eventHub.on("input.create",function(e){o.jobInputs[e.id]=u.JobHelper.generateMockJobData(e),o.updateCommandLine()}),this.eventHub.on("field.create",function(e){if(e instanceof f.CommandInputParameterModel){var t=o.findFieldRoot(e,o.jobInputs);if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n][e.id]=u.JobHelper.generateMockJobData(e);else t[e.id]=u.JobHelper.generateMockJobData(e);o.updateCommandLine()}})},m.prototype.initializeExprWatchers=function(){var t=this;this.eventHub.on("expression.create",function(e){t.expressions.add(e),t.constructed&&t.validationPromises.push(t.validateExpression(e))}),this.eventHub.on("expression.change",function(e){t.validationPromises.push(t.validateExpression(e))})},m.prototype.validateExpression=function(e){var t;return/inputs|outputs/.test(e.loc)&&(t=/.*(?:inputs\[\d+]|.*outputs\[\d+]|.*fields\[\d+])/.exec(e.loc)[0].replace("document",""),t=p.fetchByLoc(this,t)),e.validate(this.getContext(t))},m.prototype.validateAllExpressions=function(){var t=this;this.expressions.forEach(function(e){t.validationPromises.push(t.validateExpression(e))})},m.prototype.findFieldRoot=function(e,t){for(var n=!0,i=[],o=e.loc;n;){var r=this.findFieldParent(o);i.unshift({id:r.id,isArray:"array"===r.type.type}),n=r.isField,o=r.loc}var s=function(t,e){var n;return null==e?null:0===t.length?e:(n=t[0]).isArray?Array.isArray(e[n.id])?p.flatten(e[n.id].map(function(e){return s(t.slice(1),e)})):null:s(t.slice(1),e[n.id])};return s(i,t)},m.prototype.findFieldParent=function(e){return e=e.substr(this.loc.length).replace(/\.type\.fields\[\d+]$/,""),p.fetchByLoc(this,e)},m.prototype.changeIOId=function(e,t){var n,i,o;e.id!==t&&(o=e.id,e instanceof f.CommandInputParameterModel?n="input":e instanceof y.CommandOutputParameterModel&&(n="output"),e.isField&&(i=this.findFieldParent(e.loc).type.fields),p.checkIdValidity(t,i||this.inputs.concat(this.outputs)),e.clearIssue(d.ErrorCode.ID_ALL),e.id=t,p.isType(e,["record","enum"])&&(e.type.name=t),this.eventHub.emit(n+".change.id",{port:e,oldId:o,newId:e.id}))},m.prototype.addHint=function(e){return new c.UnimplementedMethodException("addHint","CommandLineToolModel"),null},m.prototype.updateStream=function(e,t){new c.UnimplementedMethodException("updateStream","CommandLineToolModel")},m.prototype._addOutput=function(e,t){var n=this,i=(void 0===t&&(t={id:null}),p.incrementLastLoc(this.outputs,this.loc+".outputs"));t.id=t.id||p.getNextAvailableId("output",this.inputs.concat(this.outputs));t=new e(t,i,this.eventHub);t.setValidationCallback(function(e){return n.updateValidity(e)});try{p.checkIdValidity(t.id,this.inputs.concat(this.outputs))}catch(e){this.setIssue(((i={})[t.loc+".id"]={type:"error",message:e.message,code:e.code},i))}return this.outputs.push(t),t},m.prototype.addOutput=function(e){return new c.UnimplementedMethodException("addOutput","CommandLineToolModel"),null},m.prototype.removeOutput=function(e){var t=this.outputs.indexOf(e);if(!(t<0)){this.outputs[t].clearIssue(d.ErrorCode.ALL),this.outputs[t].clearListeners(),this.outputs.splice(t,1);for(var n=t;n<this.outputs.length;n++)this.outputs[n].updateLoc(this.loc+".outputs["+n+"]");this.eventHub.emit("output.remove",e)}},m.prototype._addInput=function(e,t){var n=this,i=(void 0===t&&(t={id:null}),p.incrementLastLoc(this.inputs,this.loc+".inputs"));t.id=t.id||p.getNextAvailableId("input",this.inputs.concat(this.outputs));t=new e(t,i,this.eventHub);t.setValidationCallback(function(e){return n.updateValidity(e)});try{p.checkIdValidity(t.id,this.inputs.concat(this.outputs))}catch(e){this.setIssue(((i={})[t.loc+".id"]={type:"error",message:e.message,code:e.code},i))}return this.inputs.push(t),this.eventHub.emit("input.create",t),t},m.prototype.addInput=function(e){return new c.UnimplementedMethodException("addInput","CommandLineToolModel"),null},m.prototype.removeInput=function(e){var t=this.inputs.indexOf(e);if(!(t<0)){this.inputs[t].clearIssue(d.ErrorCode.ALL),this.inputs[t].clearListeners(),this.inputs.splice(t,1);for(var n=t;n<this.inputs.length;n++)this.inputs[n].updateLoc(this.loc+".inputs["+n+"]");this.eventHub.emit("input.remove",e)}},m.prototype.addArgument=function(e){return new c.UnimplementedMethodException("addArgument","CommandLineToolModel"),null},m.prototype.removeArgument=function(e){var t=this.arguments.indexOf(e);if(!(t<0)){this.arguments[t].clearIssue(d.ErrorCode.ALL),this.arguments[t].clearListeners(),this.arguments.splice(t,1);for(var n=t;n<this.arguments.length;n++)this.arguments[n].updateLoc(this.loc+".arguments["+n+"]");this.eventHub.emit("argument.remove",e)}},m.prototype.addBaseCommand=function(e){return new c.UnimplementedMethodException("addBaseCommand","CommandLineToolModel"),null},m.prototype.setRequirement=function(e,t){new c.UnimplementedMethodException("setRequirement","CommandLineToolModel")},m.prototype.updateCommandLine=function(){var t=this;this.constructed&&this.generateCommandLineParts().then(function(e){t.commandLineWatcher(e)})},m.prototype.onCommandLineResult=function(e){this.commandLineWatcher=e},m.prototype.generateCommandLine=function(){return this.generateCommandLineParts().then(function(e){return e.filter(function(e){return!!e.value}).map(function(e){return e.value}).join(" ").trim()})},m.prototype.generateCommandLineParts=function(){return a.generateCommandLineParts(this,this.jobInputs,this.runtime)},m.prototype.addEnvVariable=function(e){this.envVars.envDef.push(e)},m.prototype.validate=function(){var e=this;return Promise.all(this.validationPromises).then(function(){e.validationPromises=[]})},m);function m(e){e=o.call(this,e||"document")||this;return e.class="CommandLineTool",e.namespaces=new s.NamespaceBag,e.baseCommand=[],e.inputs=[],e.outputs=[],e.arguments=[],e.requirements=[],e.hints=[],e.successCodes=[],e.temporaryFailCodes=[],e.permanentFailCodes=[],e.expressions=new Set,e.validationPromises=[],e.jobInputs={},e.runtime={},e.constructed=!1,e.customProps={},e.commandLineWatcher=function(){},e.eventHub=new l.EventHub(["input.create","input.remove","input.change","input.change.id","io.change.type","output.create","output.remove","output.change.id","argument.create","argument.remove","field.create","field.remove","validate","binding.shellQuote","expression.create","expression.change","expression.serialize","output.metadata.inherit"]),e}t.CommandLineToolModel=n},2867:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(1636),l=n(7287),n=(o=s.ValidationBase,r(u,o),u.prototype.validateGlob=function(){var e;this._glob&&this._glob instanceof a.ExpressionModel&&(void 0===this._glob.serialize()?this._glob.setIssue(((e={})[this.loc+".glob"]={message:"Glob should be specified",type:"warning",code:l.ErrorCode.OUTPUT_GLOB_MISSING},e),!0):this._glob.clearIssue(l.ErrorCode.OUTPUT_GLOB_MISSING))},u.prototype.setOutputEval=function(e,t){var n=this;this._outputEval&&this._outputEval.clearIssue(l.ErrorCode.ALL),this._outputEval=new t(e.serialize(),this.loc+".outputEval",this.eventHub),this._outputEval.setValidationCallback(function(e){return n.updateValidity(e)})},u.prototype.setGlobExpression=function(e,t){var n=this;this._glob instanceof a.ExpressionModel&&this._glob.clearIssue(l.ErrorCode.ALL),this._glob=new t(e.serialize(),this.loc+".glob",this.eventHub),this._glob.setValidationCallback(function(e){return n.updateValidity(e)}),this.validateGlob()},u);function u(e,t){e=o.call(this,e)||this;return e.eventHub=t,e.customProps={},e}t.CommandOutputBindingModel=n},1836:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(1693),l=n(7287),u=n(4916),n=(o=s.ValidationBase,r(c,o),c.prototype.updateOutputBinding=function(e){new a.UnimplementedMethodException("updateOutputBinding","CommandOutputParameterModel")},c.prototype._addSecondaryFile=function(e,t,n){var i=this,t=new t(e,u.incrementLastLoc(this.secondaryFiles,n+".secondaryFiles"),this.eventHub);return this.secondaryFiles.push(t),t.setValidationCallback(function(e){return i.updateValidity(e)}),t},c.prototype._updateSecondaryFiles=function(e){var t=this;this.secondaryFiles.forEach(function(e){return e.clearIssue(l.ErrorCode.EXPR_ALL)}),this.secondaryFiles=[],e.forEach(function(e){return t.addSecondaryFile(e)})},c.prototype._removeSecondaryFile=function(e){var t=this.secondaryFiles[e];t&&(t.setValue("","string"),this.secondaryFiles.splice(e,1))},c.prototype.updateLoc=function(e){o.prototype.updateLoc.call(this,e),this.type.updateLoc(e+".type")},c.prototype.validate=function(t){var e=this,n=(this.clearIssue(l.ErrorCode.ALL),[]);return n.push(this.outputBinding.validate(t)),n.push(this.type.validate(t)),n.concat(this.secondaryFiles.map(function(e){return e.validate(t)})),Promise.all(n).then(function(){return e.issues})},c.prototype.attachFileTypeListeners=function(){var t=this;this.eventHub&&this.modelListeners.push(this.eventHub.on("io.change.type",function(e){t.loc+".type"!==e||u.isFileType(t)||(t.updateSecondaryFiles([]),t.outputBinding&&t.outputBinding.setInheritMetadataFrom(null))}))},c);function c(e,t){e=o.call(this,e)||this;return e.eventHub=t,e.customProps={},e}t.CommandOutputParameterModel=n},8753:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1693)),a=n(8219),l=n(7287),n=(o=a.ProcessRequirementModel,r(u,o),u.prototype.addDirent=function(e){return new s.UnimplementedMethodException("addDirent","CreateFileRequirementModel"),null},u.prototype.addExpression=function(e){return new s.UnimplementedMethodException("addExpression","CreateFileRequirementModel"),null},u.prototype.validate=function(t){var e=this;return this.clearIssue(l.ErrorCode.ALL),Promise.all(this.listing.map(function(e){return e.validate(t)})).then(function(){return e.issues},function(){return e.issues})},u);function u(e,t){e=o.call(this,e)||this;return e.eventHub=t,e}t.CreateFileRequirementModel=n},8194:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(1693),l=n(7287),n=(o=s.ValidationBase,r(u,o),u.prototype.serialize=function(){return new a.UnimplementedMethodException("serialize","DirentModel"),null},u.prototype.deserialize=function(e){new a.UnimplementedMethodException("deserialize","DirentModel")},u.prototype.validate=function(e){return this.clearIssue(l.ErrorCode.ALL),Promise.all([this.entry.validate(e),this.entryName.validate(e)])},u);function u(e,t){e=o.call(this,e)||this;return e.eventHub=t,e.customProps={},e}t.DirentModel=n},4172:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8219)),a=n(4916),n=(o=s.ProcessRequirementModel,r(l,o),l.prototype.serialize=function(){var t=this,n={},e=(this.serializedKeys.forEach(function(e){t[e]&&(n[e]=t[e])}),Object.keys(n)),i=Object.keys(this.customProps);if(1!==e.length||"class"!==e[0]||0!==i.length)return a.spreadAllProps(n,this.customProps)},l.prototype.deserialize=function(t){var n=this;this.serializedKeys.forEach(function(e){n[e]=t[e]}),this.class="DockerRequirement",a.spreadSelectProps(t,this.customProps,this.serializedKeys)},l);function l(e,t){t=o.call(this,t)||this;return t.class="DockerRequirement",t.customProps={},t.serializedKeys=["class","dockerFile","dockerImageId","dockerLoad","dockerOutputDirectory","dockerPull"],e&&t.deserialize(e),t}t.DockerRequirementModel=n},5275:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),o=n(8219).ProcessRequirementModel,r(s,o),s);function s(e,t,n){t=o.call(this,t)||this;return t.eventHub=n,t.class="EnvVarRequirement",e&&t.deserialize(e),t}t.EnvVarRequirementModel=n},1636:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(8124),l=n(7287),n=(o=s.ValidationBase,r(u,o),Object.defineProperty(u.prototype,"type",{get:function(){return this._type},set:function(e){if("string"!==e&&"expression"!==e&&"number"!==e)throw new TypeError('Unknown ExpressionModel type. "'+e+'" does not exist or is not supported yet.');this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isExpression",{get:function(){return"expression"===this.type},enumerable:!0,configurable:!0}),u.prototype.validate=function(e){var n=this;return this.evaluate(e).then(function(e){n.clearIssue(l.ErrorCode.EXPR_ALL)},function(e){var t;n.clearIssue(l.ErrorCode.EXPR_ALL),n.setIssue(((t={})[n.loc]={type:e.type,message:e.message,code:e.code},t))})},u.prototype._evaluate=function(e,n,r){var s=this;return new Promise(function(t,o){a.ExpressionEvaluator.evaluate(e,n,r).then(function(e){s.result=e,t(e)},function(e){var t,n=e.message,i=l.ErrorCode.EXPR_SYNTAX;"warning"!==e.type||e.code!==l.ErrorCode.EXPR_LINTER_WARNING?(e.message.startsWith("Uncaught DataCloneError")&&(n="Error: Return value should have transferable data (fully JSON-serializable)",i=l.ErrorCode.EXPR_NOT_JSON),t={loc:s.loc,message:n,code:i},e.message.startsWith("Uncaught SyntaxError")||"SyntaxError"===e.name?o(Object.assign({type:"error"},t)):(e.message.startsWith("Uncaught ReferenceError")||"ReferenceError"===e.name?i=l.ErrorCode.EXPR_REFERENCE:!e.message.startsWith("Uncaught TypeError")&&"TypeError"!==e.name||(i=l.ErrorCode.EXPR_TYPE),o(Object.assign({type:"v1.0"===r?"error":"warning",code:i},t)))):o({type:e.type,code:e.code,loc:s.loc,message:n,payload:e.payload})})})},u);function u(e,t){e=o.call(this,e)||this;return e.eventHub=t,e.customProps={},e.cachedContext={},e._type="string",e}t.ExpressionModel=n},2153:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(994),l=n(8664),u=n(4916),n=(o=s.ValidationBase,r(c,o),c.prototype.serialize=function(){return u.spreadAllProps({},this.customProps)},c.prototype.deserialize=function(e){this.inputs=u.ensureArray(e.inputs,"id","type").map(function(e){return new a.V1CommandInputParameterModel(e)}),this.outputs=u.ensureArray(e.outputs,"id","type").map(function(e){return new l.V1CommandOutputParameterModel(e)}),this.id=e.id,this.label=e.label,this.description=e.doc||e.description,u.spreadSelectProps(e,this.customProps,[])},c);function c(e,t){t=o.call(this,t)||this;return t.class="ExpressionTool",t.customProps={},e&&t.deserialize(e),t}t.ExpressionToolModel=n},887:function(e,t,n){var i,r,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(3965)),l=n(1442),u=n(4916),c=n(7287),n=(r=l.ValidationBase,o(p,r),Object.defineProperty(p.prototype,"symbols",{get:function(){return this._symbols},set:function(e){this._symbols=e,this.eventHub&&this.eventHub.emit("io.change.type",this.loc)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"items",{get:function(){return this._items},set:function(e){if(e&&"array"!==this._type)throw"ParameterTypeModel: Items can only be set to inputs type Array";if(void 0!==e&&this._items!==e){switch(e){case"enum":this._symbols=[],this.removeAllFields();break;case"record":this.fields=[],this._symbols=null;break;default:this._symbols=null,this.removeAllFields()}this._items=e,this.eventHub&&this.eventHub.emit("io.change.type",this.loc)}},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"type",{get:function(){return this._type},set:function(e){if(void 0===e||this._type!==e){switch(this._type=e){case"array":this._symbols=null,this.removeAllFields();break;case"enum":this._items=null,this.removeAllFields(),this._symbols=this._symbols||[];break;case"record":this._items=null,this._symbols=null,this.fields=this.fields||[];break;default:this._items=null,this._symbols=null,this.removeAllFields()}this.eventHub&&this.eventHub.emit("io.change.type",this.loc)}},enumerable:!0,configurable:!0}),p.prototype.validate=function(e){var t=this;return void 0===e&&(e={}),this.clearIssue(c.ErrorCode.TYPE_ALL),"array"===this.type&&(null===this.items&&this.setIssue(((e={})[this.loc]={type:"error",message:"Type array must have items",code:c.ErrorCode.TYPE_ITEMS_MISSING},e)),this._symbols&&"enum"!==this.items&&this.setIssue(((e={})[this.loc+".symbols"]={type:"error",message:"Type array must not have symbols",code:c.ErrorCode.TYPE_SYMBOLS_MISSING},e)),this.fields&&"record"!==this.items&&this.setIssue(((e={})[this.loc+".fields"]={type:"error",message:"Type array must not have fields",code:c.ErrorCode.TYPE_FIELDS_MISSING},e))),"enum"===this.type&&(this.items&&this.setIssue(((e={})[this.loc+".items"]={type:"error",message:"Type enum must not have items",code:c.ErrorCode.TYPE_EXTRA_PROPS},e)),this._symbols||this.setIssue(((e={})[this.loc]={type:"error",message:"Type enum must have symbols",code:c.ErrorCode.TYPE_EXTRA_PROPS},e)),this.fields&&this.setIssue(((e={})[this.loc+".fields"]={type:"error",message:"Type enum must not have fields",code:c.ErrorCode.TYPE_EXTRA_PROPS},e)),this.name||this.setIssue(((e={})[""+this.loc]={type:"error",message:"Type enum must have a name",code:c.ErrorCode.TYPE_EXTRA_PROPS},e))),"record"===this.type&&(this.items&&this.setIssue(((e={})[this.loc+".items"]={type:"error",message:"Type record must not have items",code:c.ErrorCode.TYPE_EXTRA_PROPS},e)),this._symbols&&this.setIssue(((e={})[this.loc+".symbols"]={type:"error",message:"Type record must not have symbols",code:c.ErrorCode.TYPE_EXTRA_PROPS},e)),this.fields||this.setIssue(((e={})[""+this.loc]={type:"error",message:"Type record must have fields",code:c.ErrorCode.TYPE_EXTRA_PROPS},e)),this.name||this.setIssue(((e={})[this.loc+".type"]={type:"error",message:"Type record must have a name",code:c.ErrorCode.TYPE_NAME_MISSING},e))),Promise.all([]).then(function(e){return t.issues})},p.prototype.serialize=function(e){var t=a.TypeResolver.serializeType(this,e);return"object"==typeof(t="object"!=typeof t||Array.isArray(t)||"draft-2"!==e||null===t?t:s({},t,this.customProps))&&this.inputBinding&&"function"==typeof this.inputBinding.serialize&&(t.inputBinding=this.inputBinding.serialize()),t},p.prototype.addInputBinding=function(e){var t=this;this.inputBinding=e,this.inputBinding.setValidationCallback(function(e){return t.updateValidity(e)})},p.prototype.deserialize=function(e){var t,n=this;try{a.TypeResolver.resolveType(e,this)}catch(e){this.setIssue(((t={})[this.loc]={message:e.message,type:"error",code:e.code},t))}"object"!=typeof e||null===e||Array.isArray(e)||u.spreadSelectProps(e,this.customProps,["type","name","_symbols","fields","items","inputBinding","outputBinding"]),this.fields&&(this.fields=u.ensureArray(this.fields,"name","type").map(function(e,t){e=new n.fieldConstructor(e,n.loc+".fields["+t+"]",n.eventHub);return e.isField=!0,e.setValidationCallback(function(e){return n.updateValidity(e)}),e}))},p.prototype.updateLoc=function(e){var n=this;r.prototype.updateLoc.call(this,e),this.fields&&this.fields.length&&this.fields.forEach(function(e,t){return e.updateLoc(n.loc+".fields["+t+"]")})},p.prototype.setType=function(e){switch(this._type=e){case"array":this._symbols=null,this.removeAllFields();break;case"enum":this._items=null,this.removeAllFields();break;case"record":this._items=null,this._symbols=null}this.eventHub&&this.eventHub.emit("io.change.type",this.loc)},p.prototype.getNextAvailableName=function(e){for(var t=!0,n=e,i=this.fields,o=i.length;t;)for(var t=!1,r=0;r<o;r++)i[r].id===n&&(t=!0,n=u.incrementString(n));return n},p.prototype.addField=function(t){var n=this;if(void 0===t&&(t={}),"record"!==this.type&&"record"!==this.items)throw new Error("Fields can only be added to type or items record: type is "+this.type+", items is "+this.items+".");if(!t.id||0<(e=this.fields.filter(function(e){return e.id===t.name||e.id===t.id})).length&&this.setIssue(((i={})[this.loc]={message:'Field with name "'+e[0].id+'" already exists',type:"error",code:c.ErrorCode.TYPE_FIELD_DUPLICATE_ID},i)),t instanceof this.fieldConstructor)return t.loc=this.loc+".fields["+this.fields.length+"]",t.setValidationCallback(function(e){return n.updateValidity(e)}),this.eventHub&&this.eventHub.emit("field.create",t),this.fields.push(t),t;t.name=t.name||this.getNextAvailableName(this.nameBase);var e=u.incrementLastLoc(this.fields,this.loc+".fields"),i=new this.fieldConstructor(t,e,this.eventHub);return i.setValidationCallback(function(e){return n.updateValidity(e)}),this.eventHub&&this.eventHub.emit("field.create",i),this.fields.push(i),i},p.prototype.removeField=function(t){(e="string"==typeof t?this.fields.filter(function(e){return e.id===t})[0]:t).clearIssue(c.ErrorCode.ALL);var e,n=this.fields.indexOf(e);if(n<0)throw"Field "+t+" does not exist on input";this.fields.splice(n,1);for(var i=n;i<this.fields.length;i++)this.fields[i].updateLoc(this.loc+".fields["+i+"]");this.eventHub&&this.eventHub.emit("field.remove",e)},p.prototype.removeAllFields=function(){this.fields&&this.fields.length&&this.fields.forEach(function(e){e.clearIssue(c.ErrorCode.ALL)}),this.fields=null},p);function p(e,t,n,i,o){i=r.call(this,i)||this;return i.customProps={},i.hasDirectoryType=!1,i.hasStdinType=!1,i.hasMapType=!1,i._items=null,i.inputBinding=null,i.isNullable=!1,i.isItemOrArray=!1,i.typeBinding=null,i.fields=null,i._symbols=null,i.name=null,i.unionType=null,i.nameBase="field",i.fieldConstructor=t,i.eventHub=o,i.nameBase=n,i.deserialize(e),i}t.ParameterTypeModel=n},8219:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(1693),n=(o=s.ValidationBase,r(l,o),l.prototype.serialize=function(){return new a.UnimplementedMethodException("serialize","ProcessRequirementModel"),null},l.prototype.deserialize=function(e){new a.UnimplementedMethodException("deserialize","ProcessRequirementModel")},l);function l(e){e=o.call(this,e)||this;return e.customProps={},e}t.ProcessRequirementModel=n},6809:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8219)),a=n(743),l=n(4916),u=n(1636),n=(o=s.ProcessRequirementModel,r(c,o),c.prototype.updateValue=function(e){var t=this;(this.value=e)instanceof u.ExpressionModel&&(this.value.setValidationCallback(function(e){return t.updateValidity(e)}),this.value.loc=this.loc+".value")},c.prototype.serialize=function(){var e,t;return"Object"!==this.customProps.constructor.name?this.customProps:(t={},this.class&&(t.class=this.class),(e=this.value instanceof u.ExpressionModel?this.value.serialize():this.value)&&(t.value=e),Object.assign({},t,this.customProps))},c.prototype.deserialize=function(e){var t=this;"Object"===e.constructor.name?(this.class=e.class,void 0!==e.value&&null!==e.value&&(this.value=e.value,("string"==typeof this.value||this.value.script&&this.exprConstructor===a.SBDraft2ExpressionModel)&&(this.value=new this.exprConstructor(e.value,this.loc+".value",this.eventHub),this.value.setValidationCallback(function(e){return t.updateValidity(e)}))),l.spreadSelectProps(e,this.customProps,["class","value"])):this.customProps=e},c);function c(e,t,n,i){n=o.call(this,n)||this;return n.exprConstructor=t,n.eventHub=i,n.customProps={},n.deserialize(e),n}t.RequirementBaseModel=n},99:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),o=n(8219).ProcessRequirementModel,r(s,o),s);function s(e,t){e=o.call(this,e)||this;return e.eventHub=t,e.class="ResourceRequirement",e}t.ResourceRequirementModel=n},4770:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),l=n(1693),u=n(6809),n=(o=a.ValidationBase,r(c,o),Object.defineProperty(c.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e,this.eventHub.emit("step.change",this)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"inAsMap",{get:function(){return this.in.reduce(function(e,t){return s({},e,((e={})[t.id]=t,e))},{})},enumerable:!0,configurable:!0}),c.prototype.setRunProcess=function(e){new l.UnimplementedMethodException("setRunProcess","StepModel")},Object.defineProperty(c.prototype,"connectionId",{get:function(){return this.id},enumerable:!0,configurable:!0}),c.prototype.compareInPorts=function(e){},c.prototype.compareOutPorts=function(e){},c.prototype.serializeEmbedded=function(){new l.UnimplementedMethodException("serializeEmbedded","StepModel")},c.prototype.addHint=function(e){return new l.UnimplementedMethodException("addHint","WorkflowModel"),null},c.prototype.createReq=function(e,t,n,i){var o=this,r=(i=void 0===i?!1:i)?"hints":"requirements";return n=n||this.loc+"."+r+"["+this[r].length+"]",(e=new u.RequirementBaseModel(e,t,n)).isHint=i,this[r].push(e),e.setValidationCallback(function(e){return o.updateValidity(e)}),e},c.prototype.serialize=function(){new l.UnimplementedMethodException("serialize","StepModel")},c.prototype.deserialize=function(e){new l.UnimplementedMethodException("deserialize","StepModel")},c.portDifference=function(e,n){for(var i=[],o=[],r=e.slice(),t=0;t<n.length;t++)!function(t){var e=r.findIndex(function(e){return e.id===n[t].id});-1===e?i.push(n[t]):o=o.concat(r.splice(e,1))}(t);e=r.filter(function(e){return e.type&&"any"===e.type.type});return e.forEach(function(t){var e=r.findIndex(function(e){return e===t});r.splice(e,1)}),[i,o.concat(e),r]},c);function c(e,t){e=o.call(this,e)||this;return e.isVisible=!0,e.runPath="",e.hints=[],e.customProps={},e.eventHub=t,e}t.StepModel=n},2240:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var i=n(1158),o=n(7076),r=n(6458),s=n(6571),a=n(835);function l(){}l.from=function(e,t){if(e instanceof o.WorkflowModel)return e;if(e)switch(e.cwlVersion){case"v1.2":return new i.V1_2WorkflowModel(e,t);case"v1.1":return new a.V1_1WorkflowModel(e,t);case"v1.0":return new r.V1WorkflowModel(e,t);default:return new s.SBDraft2WorkflowModel(e,t)}return new s.SBDraft2WorkflowModel(e,t)},t.WorkflowFactory=l},2110:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(2625),l=n(1693),u=n(7287),c=n(4916),n=(o=s.ValidationBase,r(p,o),Object.defineProperty(p.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e,this.eventHub.emit("io.change",this)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"sourceId",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"connectionId",{get:function(){return""+a.STEP_OUTPUT_CONNECTION_PREFIX+this.id+"/"+this.id},enumerable:!0,configurable:!0}),p.prototype.updateLoc=function(e){o.prototype.updateLoc.call(this,e),this.type.updateLoc(e+".type")},p.prototype._addSecondaryFile=function(e,t,n){var i=this,t=new t(e,c.incrementLastLoc(this.secondaryFiles,n+".secondaryFiles"),this.eventHub);return this.secondaryFiles.push(t),t.setValidationCallback(function(e){return i.updateValidity(e)}),t},p.prototype._updateSecondaryFiles=function(e){var t=this;this.secondaryFiles.forEach(function(e){return e.clearIssue(u.ErrorCode.EXPR_ALL)}),this.secondaryFiles=[],e.forEach(function(e){return t.addSecondaryFile(e)})},p.prototype._removeSecondaryFile=function(e){var t=this.secondaryFiles[e];t&&(t.setValue("","string"),this.secondaryFiles.splice(e,1))},p.prototype.serialize=function(){new l.UnimplementedMethodException("serialize","WorkflowInputParameterModel")},p.prototype.deserialize=function(e){new l.UnimplementedMethodException("deserialize","WorkflowInputParameterModel")},p.prototype.validate=function(){var t=this,e=(this.clearIssue(u.ErrorCode.ALL),[]);return e.push(this.type.validate()),Promise.all(e).then(function(e){return t.issues})},p.prototype.attachFileTypeListeners=function(){var t=this;this.eventHub&&this.modelListeners.push(this.eventHub.on("io.change.type",function(e){t.loc+".type"!==e||c.isFileType(t)||t.updateSecondaryFiles([])}))},p);function p(e,t){e=o.call(this,e)||this;return e.fileTypes=[],e.secondaryFiles=[],e.isVisible=!0,e.customProps={},e.eventHub=t,e}t.WorkflowInputParameterModel=n},7076:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(5752)),a=n(2625),l=n(6364),u=n(3084),c=n(1693),p=n(4916),d=n(1442),h=n(9307),f=n(6809),y=n(4770),m=n(2110),v=n(3175),g=n(7153),b=n(1303),_=n(7287),w=n(7990),n=(o=d.ValidationBase,r(P,o),Object.defineProperty(P.prototype,"connections",{get:function(){return Array.from(this.graph.edges)},enumerable:!0,configurable:!0}),Object.defineProperty(P.prototype,"nodes",{get:function(){return Array.from(this.graph.vertices)},enumerable:!0,configurable:!0}),P.prototype.addVertex=function(e,t,n){void 0===n&&(n=this.graph);try{n.addVertex(e,t,function e(){t.id=this.getNextAvailableId(t.connectionId,!(t instanceof y.StepModel),n),n.addVertex(t.connectionId,t,e)}.bind(this))}catch(e){t.setIssue(((i={})[t.loc]={message:e.message,code:e.code,type:"error"},i))}var i},P.prototype.initializeGraphWatchers=function(){var t=this;this.eventHub.on("step.inPort.create",function(e){t.addVertex(e.connectionId,e),t.graph.addEdge({id:e.connectionId,type:"StepInput"},{id:e.parentStep.id,type:"Step"},!1)}),this.eventHub.on("step.outPort.create",function(e){t.addVertex(e.connectionId,e),t.graph.addEdge({id:e.parentStep.id,type:"Step"},{id:e.connectionId,type:"StepOutput"},!1)}),this.eventHub.on("step.inPort.remove",function(e){t.clearPort(e),t.graph.removeVertex(e.connectionId),t.graph.removeEdge([e.connectionId,e.parentStep.connectionId])}),this.eventHub.on("step.outPort.remove",function(e){t.clearOutPort(e),t.graph.removeVertex(e.connectionId),t.graph.removeEdge([e.parentStep.connectionId,e.connectionId])}),this.eventHub.on("step.port.change",function(e){t.graph.setVertexData(e.connectionId,e)})},P.prototype.initializeExprWatchers=function(){var t=this;this.eventHub.on("expression.create",function(e){t.expressions.add(e),t.constructed&&t.validationPromises.push(t.validateExpression(e))}),this.eventHub.on("expression.change",function(e){t.validationPromises.push(t.validateExpression(e))})},P.prototype.validateExpression=function(e){var t,n;return/inputs/.test(e.loc)?(t=/.*inputs\[\d+]/.exec(e.loc)[0].replace("document",""),(n=p.fetchByLoc(this,t))?(n={self:w.JobHelper.generateMockJobData(n)},e.validate(n)):e.validate()):/steps/.test(e.loc)?(t=/.*steps\[\d+]/.exec(e.loc)[0].replace("document",""),(n=p.fetchByLoc(this,t))?e.validate(this.getContext(n)):e.validate()):void 0},P.prototype.validateAllExpressions=function(){var t=this;this.expressions.forEach(function(e){t.validationPromises.push(t.validateExpression(e))})},P.prototype.on=function(e,t){return{dispose:this.eventHub.on(e,t)}},P.prototype.off=function(e,t){this.eventHub.off(e,t)},P.prototype.serializeEmbedded=function(e){void 0===e&&(e=!1),new c.UnimplementedMethodException("serializeEmbedded","WorkflowModel")},P.prototype.serialize=function(){new c.UnimplementedMethodException("serialize","WorkflowModel")},P.prototype.deserialize=function(e){new c.UnimplementedMethodException("deserialize","WorkflowModel")},P.prototype.addHint=function(e){return new c.UnimplementedMethodException("addHint","WorkflowModel"),null},P.prototype.createReq=function(e,t,n,i){var o=this,r=(i=void 0===i?!1:i)?"hints":"requirements";return n=n||this.loc+"."+r+"["+this[r].length+"]",(e=new f.RequirementBaseModel(e,t,n)).isHint=i,this[r].push(e),e.setValidationCallback(function(e){return o.updateValidity(e)}),e},P.prototype.setBatch=function(e,t){},P.prototype.findById=function(e){return this.graph.getVertexData(e)},P.prototype._exposePort=function(e,t){return this.clearPort(e),this._createInputFromPort(e,t,!1,!0)},P.prototype.exposePort=function(e){new c.UnimplementedMethodException("exposePort","WorkflowModel")},P.prototype.includePort=function(e){"exposed"===e.status&&this.clearPort(e),e.isVisible=!0,this.graph.hasVertex(e.connectionId)||(this.addVertex(e.connectionId,e),this.graph.addEdge({id:e.parentStep.id,type:"StepInput"},{id:e.connectionId,type:"Step"},!0)),this.eventHub.emit("step.inPort.show",e)},P.prototype.clearPort=function(e){for(;e.source.length;){var t=e.source[0],t=this.getSourceConnectionId(t);this.disconnect(t,e.connectionId)}e.isVisible=!1,this.eventHub.emit("step.inPort.hide",e),e.clearIssue(_.ErrorCode.ALL)},P.prototype.clearOutPort=function(t){var n=this;this.graph.edges.forEach(function(e){e.source.id===t.connectionId&&n.disconnect(t.connectionId,e.destination.id)}),t.isVisible=!1},P.prototype.removeDanglingInput=function(t){var n=this;this.graph.hasOutgoing(t)||(this.graph.removeVertex(t),this.inputs=this.inputs.filter(function(e){return e.connectionId!==t||(n.eventHub.emit("input.remove",e),!1)}))},P.prototype.removeDanglingOutput=function(t){var n=this;this.graph.hasIncoming(t)||(this.graph.removeVertex(t),this.outputs=this.outputs.filter(function(e){return e.connectionId!==t||(e.clearIssue(_.ErrorCode.ALL),n.eventHub.emit("output.remove",e),!1)}))},P.prototype.removeStep=function(e){"string"==typeof e&&(e=this.graph.getVertexData(e));for(var t=0;t<this.steps.length;t++)if(this.steps[t].id===e.id){this.steps[t].clearIssue(_.ErrorCode.ALL),this.steps.splice(t,1);break}for(var n=this.gatherDestinations(),i=0;i<n.length;i++)for(t=0;t<e.out.length;t++){var o=n[i].source.indexOf(e.out[t].sourceId);-1<o&&(n[i].source.splice(o,1),this.validateDestination(n[i]))}this.removeStepFromGraph(e);for(var r=this.inputs.length;r--;)this.removeDanglingInput(this.inputs[r].connectionId);for(var s=this.outputs.length;s--;)this.removeDanglingOutput(this.outputs[s].connectionId);e.cleanValidity(),this.eventHub.emit("step.remove",e)},P.prototype.removeStepFromGraph=function(t){var n=this,i=(this.graph.removeVertex(t.connectionId),t.in.map(function(e){return e.connectionId})),o=t.out.map(function(e){return e.connectionId});this.graph.edges.forEach(function(e){-1!==i.indexOf(e.destination.id)||-1!==o.indexOf(e.source.id)?(n.eventHub.emit("connection.remove",n.graph.getVertexData(e.source.id),n.graph.getVertexData(e.destination.id)),n.graph.removeEdge(e)):e.destination.id!==t.connectionId&&e.source.id!==t.connectionId||n.graph.removeEdge(e)}),i.forEach(function(e){return n.graph.removeVertex(e)}),o.forEach(function(e){return n.graph.removeVertex(e)})},P.prototype.removeInput=function(e){"string"==typeof e&&(e=this.graph.getVertexData(e));for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id==e.id){this.inputs[t].clearIssue(_.ErrorCode.ALL),this.inputs.splice(t,1);break}for(this.removeIONodeFromGraph(e),t=0;t<this.outputs.length;t++)this.removeDanglingOutput(this.outputs[t].connectionId);for(var n=this.gatherDestinations(),t=0;t<n.length;t++){var i=n[t].source.indexOf(e.sourceId);-1!==i&&n[t].source.splice(i,1)}this.eventHub.emit("input.remove",e)},P.prototype.removeOutput=function(e){"string"==typeof e&&(e=this.graph.getVertexData(e));for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id==e.id){this.outputs[t].clearIssue(_.ErrorCode.ALL),this.outputs.splice(t,1);break}for(t=0;t<this.inputs.length;t++)this.removeDanglingInput(this.inputs[t].connectionId);this.removeIONodeFromGraph(e),this.eventHub.emit("output.remove",e)},P.prototype.isSourceFromStep=function(e,t){throw new c.UnimplementedMethodException("isSourceFromStep","WorkflowModel")},P.prototype.checkIdValidity=function(e,t){p.validateID(e);t=this.getNextAvailableId(t);if(t!==e)throw new Error('ID already exists on graph, the next available id is "'+t+'"')},P.prototype.changeStepId=function(o,e){var r,s=this;e!==o.id&&(this.checkIdValidity(e,e),r=o.id,this.removeStepFromGraph(o),o.id=e,this.addStepToGraph(o),o.in.forEach(function(t){var n={id:t.connectionId,type:"StepInput"};t.source.forEach(function(e){s.connectSource(e,t,n)})}),this.gatherDestinations().forEach(function(i){for(var e=0;e<i.source.length;e++)!function(e){var t=i.source[e],n=s.isSourceFromStep(t,r);n&&(i.source[e]=o.out.find(function(e){return e.id===n}).sourceId,t={id:i.connectionId,type:s.getNodeType(i)},s.connectSource(i.source[e],i,t))}(e)}),this.eventHub.emit("step.change.id",o))},P.prototype.removeIONodeFromGraph=function(t){var n=this;this.graph.edges.forEach(function(e){e.destination.id!==t.connectionId&&e.source.id!==t.connectionId||n.disconnect(e.source.id,e.destination.id)}),this.graph.removeVertex(t.connectionId)},P.prototype.changeIONodeId=function(i,e){var o,t,r,s=this;i.id!==e&&(t=i instanceof m.WorkflowInputParameterModel?a.STEP_OUTPUT_CONNECTION_PREFIX:a.STEP_INPUT_CONNECTION_PREFIX,this.checkIdValidity(e,""+t+e+"/"+e),o=i.connectionId,t=i.id,r=i.sourceId,i.id=e,this.graph.removeVertex(o),this.addVertex(i.connectionId,i),i instanceof v.WorkflowOutputParameterModel&&this.graph.edges.forEach(function(e){e.destination.id===o&&(e.destination.id=i.connectionId)}),i instanceof m.WorkflowInputParameterModel&&this.graph.edges.forEach(function(e){if(e.source.id===o){e.source.id=i.connectionId;for(var t=s.graph.getVertexData(e.destination.id),n=0;n<t.source.length;n++)t.source[n]===r&&(t.source[n]=i.sourceId)}}),this.eventHub.emit("io.change.id",i,t))},P.prototype.addEdge=function(e,t,n,i){this.graph.addEdge(e,t,n=void 0===n?!0:n,i=void 0===i?!0:i)},P.prototype.checkSrcAndDest=function(e,t){if("string"==typeof e&&(e=this.graph.getVertexData(e)),"string"==typeof t&&(t=this.graph.getVertexData(t)),!e||!t)throw new Error("Source and destination must be defined");if(!(e instanceof m.WorkflowInputParameterModel||e instanceof b.WorkflowStepOutputModel))throw new Error("Expected source to be instanceof WorkflowInputParameterModel or WorkflowStepOutputModel, instead got "+e.constructor.name);if(t instanceof v.WorkflowOutputParameterModel||t instanceof g.WorkflowStepInputModel)return[e,t];throw new Error("Expected destination to be instanceof WorkflowOutputParameterModel or WorkflowStepInputModel, instead got "+t.constructor.name)},P.prototype.disconnect=function(e,t){if(e=(n=this.checkSrcAndDest(e,t))[0],t=n[1],!this.graph.removeEdge({source:{id:e.connectionId},destination:{id:t.connectionId}}))throw new Error("Could not remove nonexistent connection between "+e.connectionId+" and "+t.connectionId);for(var n,i=t.source.length;i--;)t.source[i]===e.sourceId&&t.source.splice(i,1);this.validateDestination(t),e instanceof m.WorkflowInputParameterModel&&this.removeDanglingInput(e.connectionId),t instanceof v.WorkflowOutputParameterModel&&this.removeDanglingOutput(t.connectionId),this.eventHub.emit("connection.remove",e,t)},P.prototype.connect=function(e,t,n){if(void 0===n&&(n=!0),e=(i=this.checkSrcAndDest(e,t))[0],(t=i[1]).parentStep&&e.parentStep&&t.parentStep.id===e.parentStep.id)throw new Error("Cannot connect ports that belong to the same step: "+t.parentStep.id);t.source.push(e.sourceId);var i=this.validateConnection(t,e);return this.addEdge({id:e.connectionId,type:this.getNodeType(e)},{id:t.connectionId,type:this.getNodeType(t)},n,i),this.eventHub.emit("connection.create",e,t),i},P.prototype.addStepFromProcess=function(e){new c.UnimplementedMethodException("addStepFromProcess","WorkflowModel")},P.prototype.getNextAvailableId=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=this.graph);var i=!0,o=e,r=[];for(-1!==e.indexOf("/")&&t&&(r=o.split("/"));i;)t?(i=n.hasVertex(["in",r[1],r[2]].join("/"))||n.hasVertex(["out",r[1],r[2]].join("/")))&&(o=(r=[r[0],p.incrementString(r[1]),p.incrementString(r[2])]).join("/")):(i=n.hasVertex(o))&&(o=p.incrementString(o));return-1!==o.indexOf("/")?o.split("/")[2]:o},P.prototype.isConnected=function(){try{this.graph||(this.graph=this.constructGraph());var e=this.graph.isConnected();return e||this.setIssue(((t={})[this.loc]={message:"Workflow is not connected",type:"warning"},t)),e}catch(e){return this.setIssue(((t={})[this.loc]={message:e,type:"error"},t)),!1}var t},P.prototype.hasCycles=function(){try{this.graph||(this.graph=this.constructGraph());var e=this.graph.hasCycles();return e&&this.setIssue(((t={})[this.loc]={message:"Workflow contains cycles",type:"error"},t)),e}catch(e){return this.setIssue(((t={})[this.loc]={message:e,type:"error"},t)),!1}var t},P.prototype.gatherValidPorts=function(t,e,n){return e.filter(function(e){try{return p.checkIfConnectionIsValid(t,e,n),!0}catch(e){return!1}})},P.prototype.gatherValidConnectionPoints=function(e){var t;return(e="string"==typeof e?this.graph.getVertexData(e):e)instanceof m.WorkflowInputParameterModel||e instanceof b.WorkflowStepOutputModel?(t=this.gatherDestinations(),this.gatherValidPorts(e,t,!0)):(t=this.gatherSources(),this.gatherValidPorts(e,t,!1))},P.prototype.gatherSources=function(){return this.steps.reduce(function(e,t){return e.concat(t.out)},[]).concat(this.inputs)},P.prototype.gatherDestinations=function(){return this.steps.reduce(function(e,t){return e.concat(t.in)},[]).concat(this.outputs)},P.prototype.addStepToGraph=function(e,t){var n=this;void 0===t&&(t=this.graph),this.addVertex(e.id,e,t),e.out.forEach(function(e){n.addVertex(e.connectionId,e,t),t.addEdge({id:e.parentStep.id,type:"Step"},{id:e.connectionId,type:"StepOutput"},!1)}),e.in.forEach(function(e){n.addVertex(e.connectionId,e,t),t.addEdge({id:e.connectionId,type:"StepInput"},{id:e.parentStep.id,type:"Step"},!1)})},P.prototype._createInputFromPort=function(e,t,n,i,o){var r=this;if(void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===o&&(o={}),!(e="string"==typeof e?this.graph.getVertexData(e):e)||!this.graph.hasVertex(e.connectionId)){if(!i)throw new Error("WorkflowStepInputModel "+e.destinationId+" does not exist on the graph");this.addVertex(e.connectionId,e),this.addEdge({id:e.connectionId,type:"StepInput"},{id:e.parentStep.id,type:"Step"},!1)}i=e.type?e.type.serialize():"boolean";p.isType(e,["stdin"])&&(i="File"),p.isType(e,["any"])&&(i="boolean");i=new t(Object.assign(((t={id:this.getNextAvailableId(""+a.STEP_OUTPUT_CONNECTION_PREFIX+e.id+"/"+e.id,!0),type:i,description:void 0===e.doc&&e.description?e.description:void 0,doc:e.description||e.doc,label:e.label})["sbg:fileTypes"]=e.fileTypes,t.inputBinding=e.inputBinding,t.secondaryFiles=e.secondaryFiles,t["sbg:secretAlias"]=e.customProps["sbg:secretAlias"],t),o.customProps),this.loc+".inputs["+this.inputs.length+"]",this.eventHub);return i.setValidationCallback(function(e){return r.updateValidity(e)}),this.inputs.push(i),this.addInputToGraph(i),i.isVisible=n,e.isVisible=n,this.eventHub.emit("input.create",i),this.connect(i,e,n),i},P.prototype._createOutputFromPort=function(e,t,n,i,o){var r=this;if(void 0===n&&(n=!0),void 0===i&&(i=!1),void 0===o&&(o={}),!(e="string"==typeof e?this.graph.getVertexData(e):e)||!this.graph.hasVertex(e.connectionId)){if(!i)throw new Error("WorkflowStepInputModel "+e.sourceId+" does not exist on the graph");this.addVertex(e.connectionId,e),this.addEdge({id:e.connectionId,type:"StepInput"},{id:e.parentStep.id,type:"Step"},!1)}t=new t(Object.assign(((i={id:this.getNextAvailableId(""+a.STEP_INPUT_CONNECTION_PREFIX+e.id+"/"+e.id,!0),type:e.type?e.type.serialize():"null"})["sbg:fileTypes"]=e.fileTypes,i.secondaryFiles=e.secondaryFiles,i.description=void 0===e.doc&&e.description?e.description:void 0,i.doc=e.description||e.doc,i.label=e.label,i),o.customProps),this.loc+".outputs["+this.outputs.length+"]",this.eventHub);return t.setValidationCallback(function(e){return r.updateValidity(e)}),this.outputs.push(t),this.addOutputToGraph(t),this.eventHub.emit("output.create",t),e.isVisible=n,this.connect(e,t,n),t},P.prototype.addInputToGraph=function(e,t){void 0===t&&(t=this.graph),this.addVertex(e.connectionId,e,t)},P.prototype.addOutputToGraph=function(e,t){void 0===t&&(t=this.graph),this.addVertex(e.connectionId,e,t)},P.prototype.connectSource=function(e,t,n,i){void 0===i&&(i=this.graph);var o,r,s=this.getSourceConnectionId(e),s=i.getVertexData(s);void 0!==s?(o=!(s instanceof m.WorkflowInputParameterModel&&!s.isVisible),t.isVisible=o,r=this.validateConnection(t,s,i),i.addEdge({id:s.connectionId,type:this.getNodeType(s)},n,o,r)):t.setIssue(((i={})[""+t.loc]={type:"error",message:"Destination id "+t.id+' has unknown source "'+e+'". This may result in a cycle in the graph'},i))},P.prototype.constructGraph=function(){var i=this,e=this.gatherDestinations(),o=new u.Graph;return this.inputs.forEach(function(e){return i.addInputToGraph(e,o)}),this.outputs.forEach(function(e){return i.addOutputToGraph(e,o)}),this.steps.forEach(function(e){return i.addStepToGraph(e,o)}),e.forEach(function(t){var n={id:t.connectionId,type:i.getNodeType(t)};t.source&&(Array.isArray(t.source)?t.source.forEach(function(e){i.connectSource(e,t,n,o)}):i.connectSource(t.source,t,n,o))}),o},P.prototype.getNodeType=function(e){return e instanceof m.WorkflowInputParameterModel?"WorkflowInput":e instanceof b.WorkflowStepOutputModel?"StepOutput":e instanceof y.StepModel?"Step":e instanceof g.WorkflowStepInputModel?"StepInput":e instanceof v.WorkflowOutputParameterModel?"WorkflowOutput":void 0},P.prototype.getSourceConnectionId=function(e){new c.UnimplementedMethodException("getSourceConnectionId")},P.prototype.validateConnections=function(){var i=this,o=this.gatherSources(),r=this.gatherDestinations();this.connections.forEach(function(t){var e,n;t.isVisible&&(e=o.find(function(e){return e.connectionId===t.source.id}),n=r.find(function(e){return e.connectionId===t.destination.id}),i.validateConnection(n,e))})},P.prototype.validateConnection=function(t,n,e){if(void 0===e&&(e=this.graph),n&&t){var i,o=!1;try{p.checkIfConnectionIsValid(n,t),o=!0}catch(e){var r=t instanceof h.V1WorkflowOutputParameterModel?"outputSource":"source";t.setIssue(((i={})[t.loc+"."+r+"["+n.sourceId+"]"]={message:e.message,type:"warning",code:e.code},i))}return Array.from(e.edges).filter(function(e){return e.isVisible&&e.destination.id===t.connectionId&&e.source.id===n.connectionId}).forEach(function(e){e.isValid=o}),o}},P.prototype.validateDestination=function(t){var n=this;t.clearIssue(_.ErrorCode.CONNECTION_ALL),this.connections.filter(function(e){return e.isVisible&&e.destination.id===t.connectionId}).map(function(e){return n.findById(e.source.id)}).forEach(function(e){n.validateConnection(t,e)})},P.prototype.validateConnectionsForIOPort=function(t){var n=this;t instanceof m.WorkflowInputParameterModel?this.connections.filter(function(e){return e.isVisible&&e.source.id===t.connectionId}).map(function(e){return n.findById(e.destination.id)}).forEach(function(e){n.validateDestination(e)}):this.validateDestination(t),this.eventHub.emit("connections.updated")},P.prototype.validateGraph=function(){try{this.graph.topSort()}catch(e){"Graph has cycles"===e.message?this.setIssue(((t={})[this.loc]={message:"Graph has cycles",type:"error"},t)):"Can't sort unconnected graph"===e&&this.setIssue(((t={})[this.loc]={message:"Graph is not connected",type:"warning"},t))}var t},P.prototype.validate=function(){var e=this;return this.validateAllExpressions(),Promise.all(this.validationPromises).then(function(){e.validationPromises=[]})},P);function P(e){e=o.call(this,e)||this;return e.class="Workflow",e.hasBatch=!1,e.namespaces=new s.NamespaceBag,e.steps=[],e.inputs=[],e.outputs=[],e.hints=[],e.constructed=!1,e.expressions=new Set,e.validationPromises=[],e.customProps={},e.eventHub=new l.EventHub(["step.create","step.remove","step.change","step.update","step.change.id","step.inPort.show","step.inPort.hide","step.inPort.remove","step.inPort.create","step.outPort.remove","step.outPort.create","step.port.change","connections.updated","input.remove","input.create","output.create","output.remove","io.change","io.change.id","io.change.type","validate","connection.create","connection.remove","expression.create","expression.change","expression.serialize"]),e.initializeGraphWatchers(),e}t.WorkflowModel=n},3175:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(2625),l=n(1693),u=n(7287),c=n(4916),n=(o=s.ValidationBase,r(p,o),Object.defineProperty(p.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e,this.eventHub.emit("io.change",this)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"destinationId",{get:function(){return this.id},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"connectionId",{get:function(){return""+a.STEP_INPUT_CONNECTION_PREFIX+this.id+"/"+this.id},enumerable:!0,configurable:!0}),p.prototype.updateLoc=function(e){o.prototype.updateLoc.call(this,e),this.type.updateLoc(e+".type")},p.prototype._addSecondaryFile=function(e,t,n){var i=this,t=new t(e,c.incrementLastLoc(this.secondaryFiles,n+".secondaryFiles"),this.eventHub);return this.secondaryFiles.push(t),t.setValidationCallback(function(e){return i.updateValidity(e)}),t},p.prototype._updateSecondaryFiles=function(e){var t=this;this.secondaryFiles.forEach(function(e){return e.clearIssue(u.ErrorCode.EXPR_ALL)}),this.secondaryFiles=[],e.forEach(function(e){return t.addSecondaryFile(e)})},p.prototype._removeSecondaryFile=function(e){var t=this.secondaryFiles[e];t&&(t.setValue("","string"),this.secondaryFiles.splice(e,1))},p.prototype.serialize=function(){new l.UnimplementedMethodException("serialize","WorkflowOutputParameterModel")},p.prototype.deserialize=function(e){new l.UnimplementedMethodException("deserialize","WorkflowOutputParameterModel")},p.prototype.validate=function(){var t=this,e=(this.clearIssue(u.ErrorCode.ALL),[]);return e.push(this.type.validate()),Promise.all(e).then(function(e){return t.issues})},p.prototype.attachFileTypeListeners=function(){var t=this;this.eventHub&&this.modelListeners.push(this.eventHub.on("io.change.type",function(e){t.loc+".type"!==e||c.isFileType(t)||t.updateSecondaryFiles([])}))},p);function p(e,t){e=o.call(this,e)||this;return e.fileTypes=[],e.secondaryFiles=[],e.isField=!1,e.isVisible=!0,e.customProps={},e.eventHub=t,e}t.WorkflowOutputParameterModel=n},7153:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(2625)),a=n(1693),n=(o=n(1442).ValidationBase,r(l,o),Object.defineProperty(l.prototype,"connectionId",{get:function(){return""+s.STEP_INPUT_CONNECTION_PREFIX+this.parentStep.id+"/"+this.id},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"destinationId",{get:function(){return this.parentStep.id+"/"+this.id},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"status",{get:function(){return this.isVisible?"port":this.source.length?1===this.source.length?"exposed":void 0:"default"},enumerable:!0,configurable:!0}),l.prototype.serialize=function(){new a.UnimplementedMethodException("serialize")},l.prototype.deserialize=function(e){new a.UnimplementedMethodException("deserialize")},l);function l(e){e=o.call(this,e)||this;return e.source=[],e.fileTypes=[],e.secondaryFiles=[],e.isVisible=!1,e.customProps={},e}t.WorkflowStepInputModel=n},1303:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(1693),l=n(2625),n=(o=s.ValidationBase,r(u,o),u.prototype.serialize=function(){new a.UnimplementedMethodException("serialize")},u.prototype.deserialize=function(e){new a.UnimplementedMethodException("deserialize")},Object.defineProperty(u.prototype,"sourceId",{get:function(){return this.parentStep.id+"/"+this.id},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"connectionId",{get:function(){return""+l.STEP_OUTPUT_CONNECTION_PREFIX+this.parentStep.id+"/"+this.id},enumerable:!0,configurable:!0}),u);function u(){var e=null!==o&&o.apply(this,arguments)||this;return e.fileTypes=[],e.secondaryFiles=[],e.customProps={},e.isVisible=!0,e}t.WorkflowStepOutputModel=n},3137:(e,n,t)=>{function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(2240)),i(t(7076)),i(t(4770)),i(t(2110)),i(t(3175)),i(t(7153)),i(t(1303)),i(t(160)),i(t(2016)),i(t(7802)),i(t(895)),i(t(1836)),i(t(2867)),i(t(7128)),i(t(1636)),i(t(887)),i(t(4172)),i(t(8219)),i(t(6809)),i(t(8753)),i(t(8194)),i(t(99))},727:function(e,t,n){var i=this&&this.__awaiter||function(r,s,a,l){return new(a=a||Promise)(function(e,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((l=l.apply(r,s||[])).next())})},p=this&&this.__generator||function(i,o){var r,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,s&&(a=s[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[0,a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!((a=0<(a=l.trys).length&&a[a.length-1])||6!==t[0]&&2!==t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3]))l.label=t[1];else if(6===t[0]&&l.label<a[1])l.label=a[1],a=t;else{if(!(a&&l.label<a[2])){a[2]&&l.ops.pop(),l.trys.pop();continue}l.label=a[2],l.ops.push(t)}}t=o.call(i,l)}catch(e){t=[6,e],s=0}finally{r=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1636)),d=n(8415),h=n(2508),o=n(3965),u=n(222),c=n(6310),f=n(3466);function y(){}y.primitive=function(e,t,n,i,o,r){y.checkMismatch(e,t,n);var s=e.inputBinding.prefix||"",a=!1!==e.inputBinding.separate?" ":"",l=null!=n?n:t[e.id];return null!=l&&(l.hasOwnProperty("path")?l=l.path:l.hasOwnProperty("location")&&(l=l.location)),e.inputBinding.valueFrom&&void 0!==e.inputBinding.valueFrom.serialize()?e.inputBinding.valueFrom.evaluate(i).then(function(e){return new d.CommandLinePart(s+a+e,o,r)},function(e){var t;return"warning"===e.type&&e.code===f.ErrorCode.EXPR_LINTER_WARNING?(t=null==e.payload.evaluation?"":e.payload.evaluation,new d.CommandLinePart(s+a+t,o,r)):new d.CommandLinePart("<"+e.type+" at "+e.loc+">",e.type,r)}):new Promise(function(e){e(new d.CommandLinePart(s+a+l,o,r))})},y.string=function(n,e,t,i,o,r){return new Promise(function(e,t){e(new d.CommandLinePart(n,o,r))})},y.boolean=function(e,t,n,i,o,r){y.checkMismatch(e,t,n);var s="",a=e.inputBinding.prefix||"",l=e.type.typeBinding&&e.type.typeBinding.prefix?e.type.typeBinding.prefix:"",u=!1!==e.inputBinding.separate?" ":"";if(n=n||t[e.id]){if(a="boolean"===e.type.items?l:a,e.inputBinding.valueFrom&&void 0!==e.inputBinding.valueFrom.serialize())return e.inputBinding.valueFrom.evaluate(i).then(function(e){return new d.CommandLinePart(a+u+e,o,r)},function(e){var t;return"warning"===e.type&&e.code===f.ErrorCode.EXPR_LINTER_WARNING?(t=null==e.payload.evaluation?"":e.payload.evaluation,new d.CommandLinePart(a+u+t,o,r)):new d.CommandLinePart("<"+e.type+" at "+e.loc+">",e.type,r)});s=a}return new Promise(function(e){e(new d.CommandLinePart(s,o,r))})},y.record=function(r,s,a,l,u,c){return i(this,void 0,void 0,function(){var t,n,i,o;return p(this,function(e){switch(e.label){case 0:return y.checkMismatch(r,s,a),t=r.inputBinding.prefix||"",n=!1!==r.inputBinding.separate?" ":"",[4,h.CommandLinePrepare.flattenInputsAndArgs(r.fields||r.type.fields||[],l)];case 1:return i=e.sent(),o=h.CommandLinePrepare.flattenJob(a,{}),[2,Promise.all(i.map(function(e){return h.CommandLinePrepare.prepare(e,o,l,c)})).then(function(e){return new d.CommandLinePart(t+n+e.map(function(e){return e.value}).join(" "),u,c)})]}})})},y.array=function(n,e,t,i,o,r){y.checkMismatch(n,e,t),t=(t=t||e[n.id]||[]).map(function(e){return e&&e.hasOwnProperty("path")?e.path:e});var s=n.inputBinding.prefix||"",a=!1!==n.inputBinding.separate?" ":"",l="string"==typeof n.inputBinding.itemSeparator?n.inputBinding.itemSeparator:" ";return n.hasSecondaryFiles||null!==n.inputBinding.itemSeparator&&void 0!==n.inputBinding.itemSeparator||(l=s?" "+s+a:" "),n.inputBinding.valueFrom&&void 0!==n.inputBinding.valueFrom.serialize()?n.inputBinding.valueFrom.evaluate(i).then(function(e){return new d.CommandLinePart(s+a+e,o,r)},function(e){var t;return"warning"===e.type&&e.code===f.ErrorCode.EXPR_LINTER_WARNING?(t=null==e.payload.evaluation?"":e.payload.evaluation,new d.CommandLinePart(s+a+t,o,r)):new d.CommandLinePart("<"+e.type+" at "+e.loc+">",e.type,r)}):Promise.all(t.map(function(e,t){return Object.assign({},n,{id:t,type:n.type.items,fields:n.type.fields,inputBinding:n.type.typeBinding||{}},{items:void 0})}).map(function(e){return h.CommandLinePrepare.prepare(e,t,t[e.id])})).then(function(e){return new d.CommandLinePart(s+a+e.map(function(e){return e.value}).join(l),o,r)})},y.expression=function(e,t,n,i,o,r){return e.evaluate(i).then(function(e){return void 0===e?"":e},function(e){return"warning"===e.type&&e.code===f.ErrorCode.EXPR_LINTER_WARNING?null==e.payload.evaluation?"":e.payload.evaluation:new d.CommandLinePart("<"+e.type+" at "+e.loc+">",e.type,r)})},y.argument=function(t,e,n,i,o,r){if(t.primitive){if(t instanceof u.V1CommandArgumentModel){var s=new c.V1ExpressionModel(t.primitive,t.loc);if(s.isExpression)return y.expression(s,e,n,i,o,r).then(function(e){return e instanceof d.CommandLinePart?e:new d.CommandLinePart(e,"argument",r)})}return new Promise(function(e){e(new d.CommandLinePart(t.primitive,"argument",r))})}var a=t.prefix||"",l=!1!==t.separate?" ":"";return t.valueFrom?h.CommandLinePrepare.prepare(t.valueFrom,e,i,r).then(function(e){return""==e.toString()?new d.CommandLinePart("",o,r):e instanceof d.CommandLinePart?e:new d.CommandLinePart(a+l+e,o,r)}):new Promise(function(e){e(new d.CommandLinePart(a,"input",r))})},y.stdin=function(e,t,n,i,o,r){var n=null!=n?n:t[e.id],s=(n=n&&n.hasOwnProperty("path")?n.path:n)?"< "+n:"";return new Promise(function(e){e(new d.CommandLinePart(s,o,r))})},y.stream=function(e,t,n,i,o,r){if(e instanceof s.ExpressionModel)return y.expression(e,t,n,i,o,r).then(function(e){return e instanceof d.CommandLinePart?e:new d.CommandLinePart((e?"stdin"===o?"< ":"> ":"")+e,o,r)})},y.nullValue=function(){return new Promise(function(e){e(null)})},y.checkMismatch=function(e,t,n){n=n||t[e.id],null===e||null===e.type||!o.TypeResolver.doesTypeMatch(e.type.type,n)&&e.type.items&&o.TypeResolver.doesTypeMatch(e.type.items,n)},t.CommandLineParsers=y},8415:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CommandLinePart=function(e,t,n){e=(e=void 0===e?"":e).toString(),this.value=e.trim(),this.type=t,this.loc=n}},2508:function(e,t,n){var a=this&&this.__awaiter||function(r,s,a,l){return new(a=a||Promise)(function(e,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((l=l.apply(r,s||[])).next())})},l=this&&this.__generator||function(i,o){var r,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,s&&(a=s[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[0,a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!((a=0<(a=l.trys).length&&a[a.length-1])||6!==t[0]&&2!==t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3]))l.label=t[1];else if(6===t[0]&&l.label<a[1])l.label=a[1],a=t;else{if(!(a&&l.label<a[2])){a[2]&&l.ops.pop(),l.trys.pop();continue}l.label=a[2],l.ops.push(t)}}t=o.call(i,l)}catch(e){t=[6,e],s=0}finally{r=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},u=(Object.defineProperty(t,"__esModule",{value:!0}),n(727)),c=n(7128),p=n(7802),d=n(1636),h=n(4916);function r(){}r.prepare=function(e,t,n,i,o){var r,s="primitive",a=h.isType(e,["File","Directory","stdin"]);return(e instanceof p.CommandInputParameterModel||"record"===e.type)&&(o="input",null===(r=void 0!==t[e.id]?t[e.id]:null)?s="nullValue":Array.isArray(r)?s="array":"boolean"==typeof r?s="boolean":"object"!=typeof r||"File"===r.class||"Directory"===r.class||"stdin"===r.class||a||(s="record")),e instanceof c.CommandArgumentModel&&(o=s="argument"),e instanceof d.ExpressionModel&&(s="expression"),"stdin"!==o&&"stdout"!==o||(s="stream"),h.isType(e,"stdin")&&(s="stdin"),(0,u.CommandLineParsers[s="string"==typeof e?"string":s])(e,t,t[void 0===e.id?null:e.id],n,o,i)},r.flattenInputsAndArgs=function(o,r){return a(this,void 0,void 0,function(){var t,s,n,i=this;return l(this,function(e){switch(e.label){case 0:return t=o.filter(function(e){return!(e instanceof p.CommandInputParameterModel&&!e.inputBinding)}),s=function(n){return a(i,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return n instanceof d.ExpressionModel?[4,n.evaluate(r)]:[3,2];case 1:return t=e.sent(),[3,3];case 2:t=n,e.label=3;case 3:return[2,~~t]}})})},n=function(o,r){return a(i,void 0,void 0,function(){var t,n,i;return l(this,function(e){switch(e.label){case 0:return n=o instanceof c.CommandArgumentModel?(t=o.position,r.toString()):(t=o.inputBinding.position,o.id),i=[o],[4,s(t)];case 1:return[2,i.concat([e.sent(),n])]}})})},[4,Promise.all(t.map(n))];case 1:return[2,e.sent().sort(function(e,t){return e[1]-t[1]||(e[2]?e[2].localeCompare(t[2]):-1)}).map(function(e){return e[0]})]}})})},r.flattenJob=function(i,o){return Object.keys(i).reduce(function(e,t){return null===i[t]?Object.assign(o,((n={})[t]=null,n)):"object"==typeof i[t]&&"File"!==i[t].class?Object.assign(o,((n={})[t]=i[t],n),r.flattenJob(i[t],{})):Object.assign(o,((n={})[t]=i[t],n));var n},{})},t.CommandLinePrepare=r},5589:function(e,t,n){var u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__awaiter||function(r,s,a,l){return new(a=a||Promise)(function(e,t){function n(e){try{o(l.next(e))}catch(e){t(e)}}function i(e){try{o(l.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,i)}o((l=l.apply(r,s||[])).next())})},c=this&&this.__generator||function(i,o){var r,s,a,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(n){return function(e){var t=[n,e];if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,s&&(a=s[2&t[0]?"return":t[0]?"throw":"next"])&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[0,a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,s=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!((a=0<(a=l.trys).length&&a[a.length-1])||6!==t[0]&&2!==t[0])){l=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3]))l.label=t[1];else if(6===t[0]&&l.label<a[1])l.label=a[1],a=t;else{if(!(a&&l.label<a[2])){a[2]&&l.ops.pop(),l.trys.pop();continue}l.label=a[2],l.ops.push(t)}}t=o.call(i,l)}catch(e){t=[6,e],s=0}finally{r=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},o=this,p=(Object.defineProperty(t,"__esModule",{value:!0}),n(7802)),d=n(8415),h=n(2508),f=n(4916),y=n(7990);t.generateCommandLineParts=function(s,a,l){return i(o,void 0,void 0,function(){var i,t,n,o,r;return c(this,function(e){switch(e.label){case 0:return[4,h.CommandLinePrepare.flattenInputsAndArgs([].concat(s.arguments).concat(s.inputs),s.getContext())];case 1:return n=e.sent(),t=f.isEmpty(a)?u({inputs:y.JobHelper.getJobInputs(s)},{runtime:l}):s.getContext(),i=h.CommandLinePrepare.flattenJob(t.inputs||t,{}),t=s.baseCommand.map(function(e,t){var n=s.loc+".baseCommand["+t+"]";return h.CommandLinePrepare.prepare(e,i,s.getContext(),n,"baseCommand").then(function(e){return e instanceof d.CommandLinePart?e:new d.CommandLinePart(e,"baseCommand",n)},function(e){return new d.CommandLinePart("<"+e.type+" at "+e.loc+">",e.type,n)})}),n=n.map(function(e){return h.CommandLinePrepare.prepare(e,i,s.getContext(e),e.loc)}).filter(function(e){return e instanceof Promise}).map(function(e){return e.then(function(e){return e},function(e){return new d.CommandLinePart("<"+e.type+" at "+e.loc+">",e.type)})}),r=s.stdin.serialize(),o=s.inputs.filter(function(e){return e instanceof p.CommandInputParameterModel&&f.isType(e,["stdin"])}),o=(r?0<o.length:1<o.length)?new d.CommandLinePart("<There are multiple stdIn values set>","warning"):(r=o[0])?h.CommandLinePrepare.prepare(r,i,s.getContext(r),r.loc):h.CommandLinePrepare.prepare(s.stdin,i,s.getContext(),s.stdin.loc,"stdin"),r=h.CommandLinePrepare.prepare(s.stdout,i,s.getContext(),s.stdout.loc,"stdout"),[2,Promise.all([].concat(t,n,o,r)).then(function(e){return e.filter(function(e){return null!==e})})]}})})}},6364:(e,t)=>{function n(e){this.handlers=e.reduce(function(e,t){return Object.assign(e,((e={})[t]=[],e))},{})}Object.defineProperty(t,"__esModule",{value:!0}),n.prototype.on=function(e,t){var n=this;return this.guard(e,"subscribe to"),this.handlers[e].push(t),function(){return n.off(e,t)}},n.prototype.off=function(e,t){return this.guard(e,"unsubscribe from"),this.handlers[e].splice(this.handlers[e].findIndex(function(e){return t===e}),1)},n.prototype.emit=function(e){for(var t,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];this.guard(e,"emit");for(var o=0;o<this.handlers[e].length;o++)(t=this.handlers[e])[o].apply(t,n)},n.prototype.empty=function(){for(var e in this.handlers)this.handlers[e]=[]},n.prototype.guard=function(e,t){if(!this.handlers[e])throw new Error("Cannot "+t+" a non-supported event “"+e+"”. \n            Supported events are: "+Object.keys(this.handlers).join(", ")+"”")},t.EventHub=n},8124:(e,t)=>{var c;function r(){}Object.defineProperty(t,"__esModule",{value:!0}),r.evaluate=function(n,e,i){var o=this;if(void 0===e&&(e={}),"v1.0"===i){if("number"==typeof n)n=n.toString();else if("object"==typeof n)return new Promise(function(e,t){t("Unexpected object type when evaluating v1.0 Expression: "+n)});try{var t=r.grabExpressions(n).map(function(t){switch(t.type){case"func":return r.evaluateExpression("(function() {"+o.libraries.join("\n\n")+"\n\n"+t.value+"})()",e,i);case"expr":return r.evaluateExpression(o.libraries.join("\n\n")+"\n\n"+t.value,e,i);case"literal":return new Promise(function(e){return e(t.value)})}});return 1===t.length?t[0]:Promise.all(t).then(function(e){return e.join("")})}catch(n){return new Promise(function(e,t){t(n)})}}else if("draft-2"===i)return"string"==typeof n||"number"==typeof n?new Promise(function(e){return e(n)}):(t="{"===n.script.trim().charAt(0)?"(function()"+n.script+")()":n.script,r.evaluateExpression(t,e,i))},r.evaluateD2=function(t,e){var n;return"string"==typeof t||"number"==typeof t?new Promise(function(e){return e(t)}):(n="{"===t.script.trim().charAt(0)?"(function()"+t.script+")()":t.script,r.evaluateExpression(n,e))},r.grabExpressions=function(e){for(var t=[],n=0,i=c.LITERAL,o="",r="",s="",a=0,l=0;n<e.length;){var u=e[n];switch(i){case c.LITERAL:"$"===u&&"("===e[n+1]?(o&&(t.push({type:"literal",value:o}),o=""),n++,r="",i=c.EXPR):"$"===u&&"{"===e[n+1]?(o&&(t.push({type:"literal",value:o}),o=""),n++,s="",i=c.FUNC):"\\"===u&&"$"===e[n+1]?(o+="\\$",n++):o+=u;break;case c.EXPR:switch(u){case"(":r+=u,l++;break;case")":0===l?(t.push({type:"expr",value:r}),i=c.LITERAL):(r+=u,l--);break;default:r+=u}break;case c.FUNC:switch(u){case"{":s+=u,a++;break;case"}":0===a?(t.push({type:"func",value:s}),i=c.LITERAL):(s+=u,a--);break;default:s+=u}}n++}return i===c.LITERAL&&0<o.length&&t.push({type:"literal",value:o}),t=i!==c.EXPR&&i!==c.FUNC?t:[{value:e,type:"literal"}]},r.evaluateExpression=null,r.libraries=[],t.ExpressionEvaluator=r,(t=c=c||{})[t.LITERAL=0]="LITERAL",t[t.FUNC=1]="FUNC",t[t.EXPR=2]="EXPR"},3084:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var s,i=n(7287),n=((n=s=t.VertexMissing||(t.VertexMissing={}))[n.CreateVertex=0]="CreateVertex",n[n.IgnoreEdge=1]="IgnoreEdge",n[n.AddEdge=2]="AddEdge",n[n.Error=3]="Error",o.prototype.addVertex=function(e,t,n){if(void 0===t&&(t=null),this.hasVertex(e)){if(!n)throw new i.ValidityError("Vertex '"+e+"' already exists",i.ErrorCode.ID_DUPLICATE);n(this.vertices.get(e))}else this.vertices.set(e,t)},o.prototype.setVertexData=function(e,t){void 0===t&&(t=null),this.throwMissingVertex(e),this.vertices.set(e,t)},o.prototype.getVertexData=function(e){return this.vertices.get(e)},o.prototype.hasVertex=function(e){return this.vertices.has(e)},o.prototype.removeVertex=function(e){return this.vertices.delete(e)},o.prototype.addEdge=function(e,t,n,i,o){switch(void 0===n&&(n=!0),void 0===i&&(i=!0),o=void 0===o?s.Error:o){case s.Error:this.throwMissingVertex(e.id),this.throwMissingVertex(t.id);break;case s.CreateVertex:this.addVertex(e.id,null,function(e){return e}),this.addVertex(t.id,null,function(e){return e});break;case s.IgnoreEdge:if(!this.hasVertex(e.id)||!this.hasVertex(t.id))return}this.edges.add({source:e,destination:t,isVisible:n,isValid:i})},o.prototype.removeEdge=function(t){return Array.isArray(t)&&(t={source:{id:t[0]},destination:{id:t[1]}}),this.edges.delete(Array.from(this.edges.values()).find(function(e){return e.source.id===t.source.id&&e.destination.id===t.destination.id}))},o.prototype.topSort=function(){var n=this;if(!this.isConnected())throw"Can't sort unconnected graph";if(0==this.vertices.size)return[];if(1==this.vertices.size)return[this.vertices.keys().next().value];var t=new Set(this.vertices.keys()),i=new Set(this.edges.values()),e=[];i.forEach(function(e){t.delete(e.destination.id)});for(var o=Array.from(t);0<o.length;)!function(){var t=o.shift();e.push(t),i.forEach(function(e){e.source.id==t&&(i.delete(e),n.hasIncoming(e.destination.id,i)||o.push(e.destination.id))})}();if(0<i.size)throw new Error("Graph has cycles");return e},o.prototype.hasOutgoing=function(e,t){void 0===t&&(t=this.edges);for(var n=0,i=Array.from(t);n<i.length;n++)if(i[n].source.id===e)return!0;return!1},o.prototype.hasIncoming=function(e,t){void 0===t&&(t=this.edges);for(var n=0,i=Array.from(t);n<i.length;n++)if(i[n].destination.id==e)return!0;return!1},o.prototype.isConnected=function(){var e,t,n;return 0==this.vertices.size||1==this.vertices.size||0!=this.edges.size&&(t=(e=new Set(this.vertices.keys())).values().next().value,e.delete(t),n=new Set(this.edges),this.connectedIter(e,n,[t]))},o.prototype.connectedIter=function(e,t,n){for(var i=new Set,o=0,r=n;o<r.length;o++)for(var s=r[o],a=0,l=this.reached(t,s);a<l.length;a++){var u=l[a];i.add(u)}for(var c=0,p=Array.from(i);c<p.length;c++){var d=p[c];e.delete(d)||i.delete(d)}return 0==e.size||0!=i.size&&this.connectedIter(e,t,Array.from(i))},o.prototype.reached=function(e,t){for(var n=new Set,i=0,o=Array.from(e);i<o.length;i++){var r=o[i];r.source.id==t?(n.add(r.destination.id),e.delete(r)):r.destination.id==t&&(n.add(r.source.id),e.delete(r))}return Array.from(n)},o.prototype.hasCycles=function(){if(0==this.vertices.size)return!1;if(0==this.edges.size)return!1;try{return this.topSort(),!1}catch(e){return"Graph has cycles"===e.message}},o.prototype.throwMissingVertex=function(e){if(!this.hasVertex(e))throw new Error("Vertex '"+e+"' doesn't exist")},o);function o(e,t,n){if(void 0===n&&(n=s.Error),this.vertices=new Map(e),this.edges=new Set,t)for(var i=0,o=Array.from(t);i<o.length;i++){var r=o[i];this.addEdge({id:r[0]},{id:r[1]},!0,!0,n)}}t.Graph=n},7990:function(e,t,n){var p=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d=(Object.defineProperty(t,"__esModule",{value:!0}),n(994)),h=n(4356);function f(){}f.generateMockJobData=function(e){var t=e.type.type,n=e.type.items,i=e.id,o=e.type.symbols,r=e instanceof d.V1CommandInputParameterModel||e instanceof h.V1WorkflowInputParameterModel?"v1.0":"sbg:draft-2";function s(e,t){return Math.floor(Math.random()*(t-e))+e}function a(e,t){return Math.random()*(t-e)+e}function l(e){var t={path:"/path/to/"+e+".ext",class:"File",size:0,contents:"file contents",metadata:{},secondaryFiles:[]};return t="v1.0"==r?p({},t,{basename:e+".ext",nameroot:e,nameext:".ext"}):t}var u,c={File:l(i),stdin:l(i),Directory:{path:"/path/to/"+i,class:"Directory",basename:i},enum:o?o[0]:i,string:i+"-string-value",int:s(0,11),long:s(0,11),float:a(0,11),double:a(0,11),boolean:!0,record:{},map:{},any:{},array:{File:[l(i+"-1"),l(i+"-2")],stdin:[l(i+"-1"),l(i+"-2")],Directory:[{path:"/path/to/"+i,class:"Directory",basename:i},{path:"/path/to/"+i,class:"Directory",basename:i}],string:[i+"-string-value-1",i+"-string-value-2"],int:[s(0,11),s(0,11)],float:[a(0,11),a(0,11)],record:[{}],map:[{}],enum:[o?o[0]||"":i||""],boolean:[!0,!0]}}[t];return"array"===t&&(c=c[n],"record"===n&&e.type.fields)&&(c=[],u={},e.type.fields.forEach(function(e){u[e.id]=f.generateMockJobData(e)}),o=JSON.parse(JSON.stringify(u)),i=JSON.parse(JSON.stringify(u)),c.push(o),c.push(i)),"record"===t&&e.type.fields&&e.type.fields.forEach(function(e){c[e.id]=f.generateMockJobData(e)}),void 0!==c?c:null},f.getJobInputs=function(e){var t={};return e.inputs.forEach(function(e){t[e.id]=f.generateMockJobData(e)}),t},f.getNullJobInputs=function(e){var t={};return e.inputs.forEach(function(e){t[e.id]=null}),t},t.JobHelper=f},3965:function(e,t,n){var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r=(Object.defineProperty(t,"__esModule",{value:!0}),n(7287)),s=n(4916);function a(){}a.resolveType=function(e,t){if(t=t||{type:null,items:null,fields:null,symbols:null,isNullable:!1,isItemOrArray:!1,typeBinding:null,name:null,unionType:null,label:"",doc:""},null==e)return t.isNullable=!0,t;var n,i=e;"function"==typeof e.serialize&&(i=e.serialize());try{n=JSON.parse(JSON.stringify(i))}catch(e){n=o({},i),console.error(e)}if("string"==typeof n)return(e=/(\w+)([\[\]?]+)/g.exec(n))?(/\?/.test(e[2])&&(t.isNullable=!0),/\[]/.test(e[2])?(t.type="array",t.items=e[1]):t.type=e[1]):t.type=n,t;if(Array.isArray(n)){i=n.indexOf("null");if(-1<i&&(t.isNullable=!0,n.splice(i,1)),1!==n.length){if(2!==n.length)return t.unionType=n,t;e=a.resolveType(n[0]),i=a.resolveType(n[1]);if(e.items!==i.type&&i.items!==e.type)return t.unionType=n,t;"array"===e.type?n.splice(0,1):n.splice(1,1),t.isItemOrArray=!0}if("string"==typeof n[0])return a.resolveType(n[0],t);if("object"==typeof n[0])return a.resolveType(n[0],t);throw new r.ValidityError("TypeResolverError: expected complex object, instead got "+n[0],r.ErrorCode.TYPE_UNSUPPORTED)}if("object"!=typeof n)throw new r.ValidityError("TypeResolverError: expected complex object, array, or string, instead got "+n,r.ErrorCode.TYPE_UNSUPPORTED);if(!n.type)throw new r.ValidityError("TypeResolverError: expected complex object with type field, instead got "+JSON.stringify(n),r.ErrorCode.TYPE_UNSUPPORTED);switch(n.doc&&(t.doc=s.ensureArray(n.doc).join("\n")),n.label&&(t.label=n.label),"array"===t.type?t.items=n.type:t.type=n.type,n.type){case"array":return t.typeBinding=n.inputBinding||null,"string"==typeof n.items||Array.isArray(n.items)||"array"===n.items.type?(t.items=n.items,t):a.resolveType(n.items,t);case"record":return t.fields=n.fields,t.name=n.name||null,t;case"enum":return t.symbols=n.symbols,t.name=n.name||null,t;case"string":case"File":case"null":case"boolean":case"int":case"long":case"Directory":case"double":return t;default:throw new r.ValidityError("TypeResolverError: unmatched complex type, expected 'enum', 'array', or 'record', got '"+n.type+"'",r.ErrorCode.TYPE_UNSUPPORTED)}},a.doesTypeMatch=function(e,t){if(e)switch(e){case"int":case"float":case"long":case"double":return"number"==typeof t;case"File":case"record":case"Directory":return"object"==typeof t&&!Array.isArray(t);case"array":return Array.isArray(t);case"enum":return"string"==typeof t;default:return typeof t===e}return!0},a.serializeType=function(e,t){var n,i;if(e.unionType&&(i=e.unionType,"array"===e.type?e.items=i:e.type=i,e.isNullable&&(i.push("null"),e.isNullable=!1)),null===e.type||void 0===e.type)return null;switch(e.type){case"array":"enum"===e.items?n={type:"array",items:{type:"enum",name:e.name||"",symbols:e.symbols}}:"record"===e.items?n={type:"array",items:{type:"record",name:e.name||"",fields:e.fields.map(function(e){return"function"==typeof e.serialize?e.serialize():e})}}:"v1.0"!==t||e.typeBinding||"string"!=typeof e.items?(n={type:"array",items:e.items},e.typeBinding&&(n.inputBinding=e.typeBinding)):n=e.items+"[]";break;case"record":n={type:"record",fields:e.fields.map(function(e){return"function"==typeof e.serialize?e.serialize():e}),name:e.name||""},e.typeBinding&&(n.inputBinding=e.typeBinding);break;case"enum":n={type:"enum",symbols:e.symbols,name:e.name||""},e.typeBinding&&(n.inputBinding=e.typeBinding);break;default:n=e.type}return(e.doc&&(n.doc=e.doc),e.label&&(n.label=e.label),e.isItemOrArray)?(i={type:"array",items:n},(n=[n]).push(i),e.isNullable&&n.unshift("null")):e.isNullable?n="v1.0"===t&&"string"==typeof n?n+"?":["null",n]:"v1.0"!==t&&(n=[n]),n},t.TypeResolver=a},1693:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UnimplementedMethodException=function(e,t){}},2625:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.STEP_INPUT_CONNECTION_PREFIX="in/",t.STEP_OUTPUT_CONNECTION_PREFIX="out/"},8668:(e,n,t)=>{function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(8124)),i(t(8415)),i(t(3084)),i(t(3965)),i(t(2625)),i(t(4916)),i(t(3466))},3924:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.sbgHelperLibrary="\nvar setMetadata = function(file, metadata) {\n    if (!('metadata' in file)) {\n        file['metadata'] = {}\n    }\n    for (var key in metadata) {\n        file['metadata'][key] = metadata[key];\n    }\n    return file\n};\nvar inheritMetadata = function(o1, o2) {\n    var commonMetadata = {};\n    if (!o2) {\n        return o1;\n    };\n    if (!Array.isArray(o2)) {\n        o2 = [o2]\n    }\n    for (var i = 0; i < o2.length; i++) {\n        var example = o2[i]['metadata'];\n        for (var key in example) {\n            if (i == 0)\n                commonMetadata[key] = example[key];\n            else {\n                if (!(commonMetadata[key] == example[key])) {\n                    delete commonMetadata[key]\n                }\n            }\n        }\n        for (var key in commonMetadata) {\n            if (!(key in example)) {\n                delete commonMetadata[key]\n            }\n        }\n    }\n    if (!Array.isArray(o1)) {\n        o1 = setMetadata(o1, commonMetadata)\n        if (o1.secondaryFiles) {\n            o1.secondaryFiles = inheritMetadata(o1.secondaryFiles, o2)\n        }\n    } else {\n        for (var i = 0; i < o1.length; i++) {\n            o1[i] = setMetadata(o1[i], commonMetadata)\n            if (o1[i].secondaryFiles) {\n                o1[i].secondaryFiles = inheritMetadata(o1[i].secondaryFiles, o2)\n            }\n        }\n    }\n    return o1;\n};"},4916:function(e,p,t){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},d=(Object.defineProperty(p,"__esModule",{value:!0}),t(3137)),h=t(3466);function n(e){if(!e)throw new h.ValidityError("ID must be set",h.ErrorCode.ID_MISSING);for(var t,n,i,o=new Set,r=new RegExp("[^a-zA-Z0-9_;?\\-:@&=+$,.#!~*'()\\[\\]]","g");t=r.exec(e);)o.add(t[0]);if(o.size)throw i=(n=Array.from(o)).map(function(e){return"“"+e+"”"}).join(", "),new h.ValidityError("ID “"+e+"” contains invalid characters: "+i,h.ErrorCode.ID_INVALID_CHAR,n)}p.flatArray=function(e,n){return 0<(n=void 0===n?1:n)?e.reduce(function(e,t){return e.concat(Array.isArray(t)?p.flatArray(t,n-1):t)},[]):e.slice()},p.ensureArray=function(n,i,o){return null==n?[]:Array.isArray(n)?"object"==typeof n[0]||void 0===i?n.slice():n.map(function(e){return(t={})[i]=e,t;var t}):"string"==typeof n||"number"==typeof n||"boolean"==typeof n?[n]:Object.keys(n).map(function(e){return o&&"object"!==p.checkMapValueType(n)&&"object"!==p.checkValueType(n[e])?r(((t={})[o]=n[e],t),((t={})[i]=e,t)):r({},n[e],((t={})[i]=e,t));var t})},p.checkMapValueType=function(t){var n=null;return Object.keys(t).forEach(function(e){e=p.checkValueType(t[e]);if(n&&e!==n)return n="mismatch";n=e}),n},p.checkValueType=function(e){return Array.isArray(e)?"array":null===e?"null":"object"==typeof e?"object":typeof e},p.incrementString=function(e){var t=e.replace(/^(.*?)(\d+$)/gi,function(e,t,n){return t+ ++n});return t===e?e+"_1":t},p.spreadAllProps=function(e,t){return r({},e,t)},p.spreadSelectProps=function(t,n,i){Object.keys(t).forEach(function(e){-1===i.indexOf(e)&&void 0!==t[e]&&(n[e]=t[e])})},p.intersection=function(e,t){return void 0===t&&(t=[]),(e=void 0===e?[]:e).filter(function(e){return-1!==t.indexOf(e)})},p.commaSeparatedToArray=function(e){return e?Array.isArray(e)?e:e.replace(/\s/g,"").split(","):[]},p.charSeparatedToArray=function(e,t){return e?Array.isArray(e)?e:e.split(t).map(function(e){return e.trim()}):[]},p.snakeCase=function(e){return(e=void 0===e?"":e).replace(/[\s.\[\/\]-]+/g,"_").replace(/([A-Z])/g,function(e){return"_"+e.toLowerCase()})},p.isEmpty=function(e){return Array.isArray(e)?0===e.length:"object"==typeof e&&null!==e?0===Object.keys(e).length:void 0},p.fetchByLoc=function(e,t){for(var n=(t=t.replace(/\[/g,".[").replace(/[\[\]]/g,"")).split(".").filter(function(e){return e.length}),i=e;n.length;){var o=n.shift().replace(/["']/g,"");try{i=isNaN(o)?i[o]:i[parseInt(o,10)]}catch(e){return}}return i},p.cleanupNull=function(e){for(var t=Object.keys(e),n=r({},e),i=0;i<t.length;i++){var o=t[i];void 0!==e[o]&&null!==e[o]||delete n[o]}return n},p.nullifyObjValues=function(e){for(var t=Object.keys(e),n=r({},e),i=0;i<t.length;i++)n[t[i]]=null;return n},p.validateID=n,p.incrementLastLoc=function(e,t){return 0===(e=void 0===e?[]:e).length?t+"[0]":(e=((e[e.length-1].loc.match(/\[(\d+)]$/g)||[""])[0].match(/\d+/g)||[""])[0])?(e=parseInt(e),t+"["+ ++e+"]"):null},p.isType=function(t,e){return!(!t.type||!t.type.type)&&0<(e="string"==typeof e?[e]:e).filter(function(e){return t.type.type===e||t.type.items===e}).length},p.checkIfConnectionIsValid=function(e,t,n){if(void 0===n&&(n=!0),e.parentStep&&t.parentStep&&e.parentStep.id===t.parentStep.id)throw new h.ValidityError("Invalid connection. Source and destination ports belong to the same step",h.ErrorCode.CONNECTION_SAME_STEP);function i(e){return"string"==typeof e?e:Array.isArray(e)?"union":"object"==typeof e&&null!==e?"object":void 0}function o(e,t){return p.ensureArray(e.scatter).some(function(e){return e==t})}var r=e.type.type,s=t.type.type,a=i(e.type.items),l=i(t.type.items);if("any"===r||"any"===s)return!0;if("File"===r&&"stdin"===s)return!0;if(r===s||(a===s||"union"===a)&&!n||(l===r||"union"===l)&&n||"null"===r||"null"===s){if("union"!==l&&"union"!==a&&!("record"===l&&"object"===a||"record"===a&&"object"===l)){if(a&&l&&a!==l)throw new h.ValidityError('Invalid connection. Connection type mismatch, attempting to connect "'+a+'[]" to "'+l+'[]"',h.ErrorCode.CONNECTION_TYPE);if(("File"===r||"File"===a)&&t.fileTypes.length&&e.fileTypes.length){if(p.intersection(t.fileTypes.map(function(e){return e.toLowerCase()}),e.fileTypes.map(function(e){return e.toLowerCase()})).length)return!0;throw new h.ValidityError('Invalid connection. File type mismatch, connecting formats "'+e.fileTypes+'" to "'+t.fileTypes+'"',h.ErrorCode.CONNECTION_FILE_TYPE)}if(r===s)if(!(e instanceof d.WorkflowInputParameterModel||e instanceof d.WorkflowOutputParameterModel||t instanceof d.WorkflowInputParameterModel||t instanceof d.WorkflowOutputParameterModel)&&t.parentStep&&e.parentStep){var n=o(t.parentStep,t.id),u=o(e.parentStep,t.id);if(!u&&n||u&&!n)throw new h.ValidityError("Invalid connection. Scatter '"+t.id+"' is making a mismatch in connection",h.ErrorCode.CONNECTION_SCATTER_TYPE)}if(t.secondaryFiles.length){if(t.secondaryFiles.length>e.secondaryFiles.length)throw new h.ValidityError("Input connection is missing required secondary files",h.ErrorCode.CONNECTION_SEC_FILES);var u=function(e){return e.pattern||e},n=t.secondaryFiles.filter(function(e){return void 0===e.required||e.required}).map(u),c=e.secondaryFiles.map(u);n.forEach(function(e){if(!e.isExpression){var t=""+e;if(!c.find(function(e){return e.toString().toUpperCase()===t.toUpperCase()}))throw new h.ValidityError("Input connection is missing required secondary files with a pattern: "+t,h.ErrorCode.CONNECTION_SEC_FILES)}})}}return!0}if(a===s&&o(t.parentStep,t.id))return!0;throw new h.ValidityError("Invalid connection. Connection type mismatch, attempting to connect "+(a?'"'+a+'[]"':'"'+r+'"')+" to "+(l?'"'+l+'[]"':'"'+s+'"'),h.ErrorCode.CONNECTION_TYPE)},p.flatten=function(e){function o(e,t){for(var n=0;n<e.length;n++){var i=e[n];Array.isArray(i)?o(i,t):t.push(i)}}var t=[];return o(e,t),t},p.returnNumIfNum=function(e,t){return void 0===t&&(t=!1),isNaN(e)?e:(t?parseFloat:parseInt)(e)},p.isFileType=function(e,t){t=void 0===t||e.type.isNullable!==t;return e.type&&t&&("File"===e.type.type||"File"===e.type.items)},p.hasFileType=function(e){if(p.isFileType(e))return!0;if(Array.isArray(e.type.fields))for(var t=0;t<e.type.fields.length;t++){var n=e.type.fields[t];if(p.hasFileType(n))return!0}return!1},p.getNextAvailableId=function(e,t){for(var n=!0,i=e,o=t.length;n;)for(var n=!1,r=0;r<o;r++)t[r].id===i&&(n=!0,i=p.incrementString(i));return i},p.checkIdValidity=function(e,t){n(e);t=p.getNextAvailableId(e,t);if(t!==e)throw new h.ValidityError('ID "'+e+'" already exists in this tool, the next available id is "'+t+'"',h.ErrorCode.ID_DUPLICATE)},p.concatIssues=function(e,t,n){for(var i=Object.keys(t),o=0;o<i.length;o++){var r=i[o];if(e[r]&&null!==t[r])if(n)e[r]=Array.isArray(t[r])?t[r]:[t[r]];else for(var s=Array.isArray(t[r])?t[r]:[t[r]],a=0;a<s.length;a++)p.issueExistsInArray(e[r],s[a])||e[r].push(s[a]);else Array.isArray(t[r])||null===t[r]?e[r]=t[r]:e[r]=[t[r]]}return e},p.issueExistsInArray=function(e,t){for(var n=0;n<e.length;n++)if(e[n].code===t.code&&e[n].message===t.message)return!0;return!1},p.checkPortIdUniqueness=function(e){for(var t,n={},i=[],o=0;o<e.length;o++){var r=e[o];n[r.id]?i.push(r):n[r.id]=!0}if(0<i.length)for(o=0;o<i.length;o++){var s=i[o];s.setIssue(((t={})[s.loc+".id"]={type:"error",code:h.ErrorCode.ID_DUPLICATE,message:"Duplicate id found: “"+s.id+"”"},t))}}},7287:function(e,t){var i,o,n=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=(Object.defineProperty(t,"__esModule",{value:!0}),(r=t.ErrorCode||(t.ErrorCode={}))[r.ALL=0]="ALL",r[r.ID_ALL=100]="ID_ALL",r[r.ID_INVALID_CHAR=101]="ID_INVALID_CHAR",r[r.ID_MISSING=102]="ID_MISSING",r[r.ID_DUPLICATE=103]="ID_DUPLICATE",r[r.EXPR_ALL=200]="EXPR_ALL",r[r.EXPR_SYNTAX=201]="EXPR_SYNTAX",r[r.EXPR_REFERENCE=202]="EXPR_REFERENCE",r[r.EXPR_TYPE=203]="EXPR_TYPE",r[r.EXPR_NOT_JSON=204]="EXPR_NOT_JSON",r[r.EXPR_LINTER_WARNING=205]="EXPR_LINTER_WARNING",r[r.CONNECTION_ALL=300]="CONNECTION_ALL",r[r.CONNECTION_TYPE=301]="CONNECTION_TYPE",r[r.CONNECTION_FILE_TYPE=302]="CONNECTION_FILE_TYPE",r[r.CONNECTION_SAME_STEP=303]="CONNECTION_SAME_STEP",r[r.CONNECTION_SCATTER_TYPE=304]="CONNECTION_SCATTER_TYPE",r[r.CONNECTION_SEC_FILES=305]="CONNECTION_SEC_FILES",r[r.OUTPUT_ALL=400]="OUTPUT_ALL",r[r.OUTPUT_GLOB_MISSING=401]="OUTPUT_GLOB_MISSING",r[r.OUTPUT_EVAL_EXPR=402]="OUTPUT_EVAL_EXPR",r[r.OUTPUT_EVAL_INHERIT=403]="OUTPUT_EVAL_INHERIT",r[r.TYPE_ALL=500]="TYPE_ALL",r[r.TYPE_FIELDS_MISSING=501]="TYPE_FIELDS_MISSING",r[r.TYPE_ITEMS_MISSING=502]="TYPE_ITEMS_MISSING",r[r.TYPE_SYMBOLS_MISSING=503]="TYPE_SYMBOLS_MISSING",r[r.TYPE_NAME_MISSING=504]="TYPE_NAME_MISSING",r[r.TYPE_EXTRA_PROPS=505]="TYPE_EXTRA_PROPS",r[r.TYPE_UNSUPPORTED=506]="TYPE_UNSUPPORTED",r[r.TYPE_FIELD_DUPLICATE_ID=507]="TYPE_FIELD_DUPLICATE_ID",o=Error,n(s,o),s);function s(e,t,n){e=o.call(this,e)||this;return e.code=t,e.data=n,e}t.ValidityError=r},1442:function(e,t,n){var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=(Object.defineProperty(t,"__esModule",{value:!0}),n(1693)),o=n(4916),s=n(7287);function a(e){this.issues={},this._errors=[],this._warnings=[],this.hasNewErrors=!1,this.hasNewWarnings=!1,this.modelListeners=[],this.loc="",this.updateParentValidation=function(e){},this.loc=e||"",this.issues[this.loc]=[]}a.prototype.clearListeners=function(){this.modelListeners.forEach(function(e){return e()})},Object.defineProperty(a.prototype,"warnings",{get:function(){return this.hasNewWarnings&&(this._warnings=this.filterIssues("warning"),this.hasNewWarnings=!1),this._warnings},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"errors",{get:function(){return this.hasNewErrors&&(this._errors=this.filterIssues("error"),this.hasNewErrors=!1),this._errors},enumerable:!0,configurable:!0}),a.prototype.updateValidity=function(e){this.issues=o.concatIssues(this.issues,e.data,e.overwrite),this.hasNewErrors=!0,this.hasNewWarnings=!0,e.stopPropagation||this.updateParentValidation(e)},a.prototype.setIssue=function(e,t){this.updateValidity({data:e,overwrite:!1,stopPropagation:t=void 0===t?!1:t})},a.prototype.clearIssue=function(t){var e,n,i=!1,o=t%100==0,r=t/100;for(e in this.issues)this.issues[e].length&&(t===s.ErrorCode.ALL?(i=!0,this.issues[e]=[]):(n=this.issues[e].length,this.issues[e]=this.issues[e].filter(function(e){return o?Math.floor(e.code/100)!==r:e.code!==t}),i=n!==this.issues[e].length||i));i&&this.updateValidity({data:this.issues,overwrite:!0})},a.prototype.cleanValidity=function(){},a.prototype.updateLoc=function(e){var t=this.loc;this.issues[e]=this.issues[t],delete this.issues[t],this.loc=e,this.updateValidity({data:this.issues,overwrite:!0})},a.prototype.setValidationCallback=function(e){this.updateParentValidation=e},a.prototype.filterIssues=function(n){void 0===n&&(n="error");var e,i=[],o=this;for(e in this.issues)!function(t){var e;o.issues[t].length&&(e=o.issues[t].filter(function(e){return e.type===n}).map(function(e){return r({},e,{loc:t})}),i=i.concat(e))}(e);return i},a.prototype.validate=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return new i.UnimplementedMethodException("validate"),new Promise(function(e){e(t.issues)})},t.ValidationBase=a},4659:(e,t)=>{function n(){}Object.defineProperty(t,"__esModule",{value:!0}),n.interchangeErrors=function(e,t){var n={errors:[],warnings:[]},i=Object.assign({},n,e),e=Object.assign({},n,t),o=e.errors.map(function(e){return e.loc}).concat(e.warnings.map(function(e){return e.loc}));return i.errors.forEach(function(e,t){-1!==o.indexOf(e.loc)&&i.errors.splice(t,1)}),i.warnings.forEach(function(e,t){-1!==o.indexOf(e.loc)&&i.warnings.splice(t,1)}),i.warnings=i.warnings.concat(e.warnings),i.errors=i.errors.concat(e.errors),i},t.ValidationUpdater=n},3466:(e,n,t)=>{function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(1442)),i(t(4659)),i(t(7287))},1034:(e,n,t)=>{function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(3137)),i(t(8668))},222:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(7128)),a=n(6310),l=n(8894),u=n(7287),n=(o=s.CommandArgumentModel,r(c,o),Object.defineProperty(c.prototype,"arg",{get:function(){return this.primitive||this.binding},set:function(e){this.deserialize(e)},enumerable:!0,configurable:!0}),c.prototype.toggleBinding=function(e){var t=this;e?(this.binding=new this.bindingModel({},this.loc,this.eventHub),this.binding.setValidationCallback(function(e){return t.updateValidity(e)}),this.primitive.clearIssue(u.ErrorCode.ALL),this.primitive=void 0):(this.primitive=new a.V1ExpressionModel("",this.loc,this.eventHub),this.primitive.setValidationCallback(function(e){return t.updateValidity(e)}),this.binding.clearIssue(u.ErrorCode.ALL),this.binding=void 0),this.hasBinding=e},c.prototype.updatePrimitive=function(e){this.hasBinding=!1,this.binding=void 0,this.primitive.setValue(e)},c.prototype.updateBinding=function(e){var t=this;this.binding.prefix=e.prefix,this.binding.position=isNaN(e.position)?0:parseInt(e.position),this.binding.separate=e.separate,this.binding.itemSeparator=e.itemSeparator,this.binding.shellQuote=e.shellQuote,this.binding.valueFrom=new a.V1ExpressionModel(e.valueFrom,this.loc+".valueFrom",this.eventHub),this.binding.valueFrom.setValidationCallback(function(e){return t.updateValidity(e)}),this.primitive=void 0,this.hasBinding=!0},c.prototype.serialize=function(){return this.binding?this.binding.serialize():this.primitive?this.primitive.serialize():""},c.prototype.toString=function(){return this.primitive?this.primitive.serialize():this.binding?this.binding.valueFrom.toString():void 0},c.prototype.deserialize=function(e){var t=this;"string"==typeof e||e instanceof a.V1ExpressionModel?(this.hasBinding=!1,this.primitive=new a.V1ExpressionModel(e,this.loc,this.eventHub),this.primitive.setValidationCallback(function(e){return t.updateValidity(e)})):e instanceof this.bindingModel?(this.hasBinding=!0,this.binding=new this.bindingModel(e.serialize(),this.loc,this.eventHub),this.binding.setValidationCallback(function(e){return t.updateValidity(e)})):"object"==typeof e&&(this.hasBinding=!0,this.binding=new this.bindingModel(e,this.loc,this.eventHub),this.binding.setValidationCallback(function(e){return t.updateValidity(e)}))},c);function c(e,t,n){t=o.call(this,t,n)||this;return t.hasExprPrimitive=!0,t.hasShellQuote=!0,t.bindingModel=l.V1CommandLineBindingModel,e&&t.deserialize(e),t}t.V1CommandArgumentModel=n},994:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(7802)),l=n(887),u=n(4916),c=n(8894),p=n(6310),n=(o=a.CommandInputParameterModel,r(d,o),d.prototype.updateInputBinding=function(e){var t=this;e instanceof c.V1CommandLineBindingModel&&(this.inputBinding.cloneStatus(e),this.inputBinding.setValidationCallback(function(e){return t.updateValidity(e)}))},d.prototype.createInputBinding=function(){var t=this;return this.inputBinding=new c.V1CommandLineBindingModel({},this.loc+".inputBinding",this.eventHub),this.inputBinding.setValidationCallback(function(e){return t.updateValidity(e)}),this.inputBinding},d.prototype.addSecondaryFile=function(e){return this._addSecondaryFile(e,p.V1ExpressionModel,this.loc)},d.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},d.prototype.removeSecondaryFile=function(e){this._removeSecondaryFile(e)},d.prototype.serialize=function(){var e=s({},this.customProps);return this.isField?e.name=this.id||"":e.id=this.id||"",e.type=this.type.serialize("v1.0"),this.inputBinding&&(e.inputBinding=this.inputBinding.serialize()),this.label&&(e.label=this.label),this.description&&(e.doc=this.description),u.isFileType(this)&&this.fileTypes.length&&(e["sbg:fileTypes"]=this.fileTypes.join(", ")),void 0===this.streamable||this.isField||(e.streamable=this.streamable),this.secondaryFiles&&this.secondaryFiles.length&&!this.isField&&(e.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),void 0!==this.default&&(e.default=this.default),e},d.prototype.addParameter=function(e){var t=this;this.type=new l.ParameterTypeModel(e.type,d,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){return t.updateValidity(e)})},d.prototype.addInputBinding=function(e){var t=this;this.inputBinding=new c.V1CommandLineBindingModel(e.inputBinding,this.loc+".inputBinding",this.eventHub),this.inputBinding.setValidationCallback(function(e){return t.updateValidity(e)})},d.prototype.deserialize=function(e){var t=this,n=["type","doc","inputBinding","label","secondaryFiles","sbg:fileTypes","streamable","default","loadContents"];e.name?(this.id=e.name,this.isField=!0,n.push("name")):(this.id=e.id,n.push("id")),this.addParameter(e),this.type.hasDirectoryType=!0,u.isType(this,["record","enum"])&&!this.type.name&&(this.type.name=this.id),e.inputBinding&&this.addInputBinding(e),this.label=e.label,this.description=u.ensureArray(e.doc).join("\n"),this.secondaryFiles=u.ensureArray(e.secondaryFiles).map(function(e){return t.addSecondaryFile(e)}),this.fileTypes=u.commaSeparatedToArray(e["sbg:fileTypes"]),this.streamable=e.streamable,this.default=e.default,this.isSecret=Boolean(e["sbg:secretAlias"]),this.attachFileTypeListeners(),u.spreadSelectProps(e,this.customProps,n)},d);function d(e,t,n){t=o.call(this,t,n)||this;return t.secondaryFiles=[],t.hasSecondaryFiles=!0,t.hasSecondaryFilesInRoot=!0,t.hasStageInput=!1,e&&t.deserialize(e),t}t.V1CommandInputParameterModel=n},8894:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(895)),a=n(6310),l=n(4916),u=n(7287),n=(o=s.CommandLineBindingModel,r(c,o),c.prototype.setValueFrom=function(e){var t=this;this.valueFrom=new a.V1ExpressionModel(e,this.loc+".valueFrom",this.eventHub),this.valueFrom.setValidationCallback(function(e){return t.updateValidity(e)})},c.prototype.deserialize=function(e){var t=this;this.position=isNaN(e.position)?0:parseInt(e.position),this.prefix=e.prefix,this.separate=!1!==e.separate,this.itemSeparator=e.itemSeparator,void 0!==e.shellQuote&&(this.shellQuote=e.shellQuote),this.loadContents=!0===e.loadContents,this.valueFrom=new a.V1ExpressionModel(e.valueFrom,this.loc+".valueFrom",this.eventHub),this.valueFrom.setValidationCallback(function(e){return t.updateValidity(e)}),l.spreadSelectProps(e,this.customProps,this.serializedKeys)},c.prototype.serialize=function(){var t=this,n={};return this.serializedKeys.forEach(function(e){void 0!==t[e]&&null!==t[e]&&"valueFrom"!==e&&"position"!==e&&(n[e]=t[e])}),n.position=isNaN(this.position)?0:this.position,n.loadContents||delete n.loadContents,!1===n.shellQuote&&this.eventHub&&this.eventHub.emit("binding.shellQuote",!0),!1!==n.separate&&delete n.separate,void 0!==this.valueFrom.serialize()&&(n.valueFrom=this.valueFrom.serialize()),l.spreadAllProps(n,this.customProps)},c.prototype.validate=function(e){var t=this,n=(this.clearIssue(u.ErrorCode.ALL),[]);return n.push(this.valueFrom.validate(e)),Promise.all(n).then(function(){return t.issues})},c);function c(e,t,n){t=o.call(this,t,n)||this;return t.shellQuote=!0,t.hasSecondaryFiles=!1,t.hasShellQuote=!0,t.serializedKeys=["position","prefix","separate","itemSeparator","valueFrom","shellQuote","loadContents"],e&&t.deserialize(e),t}t.V1CommandLineBindingModel=n},4471:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(5752)),l=n(7802),u=n(2016),c=n(1836),p=n(4172),d=n(6809),h=n(8124),f=n(7990),y=n(3924),m=n(4916),v=n(222),g=n(994),b=n(8664),_=n(6310),w=n(7229),P=n(4105),C=n(6780),E=n(2054),n=(o=u.CommandLineToolModel,r(M,o),M.prototype.initializeInlineJSWatchers=function(){var e=this;this.eventHub.on("output.metadata.inherit",function(){e.inlineJavascriptRequirement.addExpressionLib(y.sbgHelperLibrary)})},M.prototype.setRuntime=function(e){this.runtime.cores=(void 0!==(e=void 0===e?{}:e).cores?e:this.runtime).cores,this.runtime.ram=(void 0!==e.ram?e:this.runtime).ram},M.prototype.resetJobDefaults=function(){this.jobInputs=f.JobHelper.getJobInputs(this),this.updateCommandLine()},M.prototype.getContext=function(e){var t,n={runtime:this.runtime,inputs:this.jobInputs};return h.ExpressionEvaluator.libraries=this.inlineJavascriptRequirement.expressionLib,e&&e instanceof l.CommandInputParameterModel&&(e.isField?(t=this.findFieldRoot(e,this.jobInputs),n.self=t?t[e.id]:null):n.self=this.jobInputs?this.jobInputs[e.id]:null),e&&e instanceof c.CommandOutputParameterModel&&(n.self=f.JobHelper.generateMockJobData({type:{type:"array",items:"File"}})),n},M.prototype.addHint=function(e){var t=this,e=new d.RequirementBaseModel(e,_.V1ExpressionModel,this.loc+".hints["+this.hints.length+"]",this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.hints.push(e),e},M.prototype.addOutput=function(e){return o.prototype._addOutput.call(this,b.V1CommandOutputParameterModel,e)},M.prototype.addInput=function(e){return o.prototype._addInput.call(this,g.V1CommandInputParameterModel,e)},M.prototype.addArgument=function(e){var t=this,n=m.incrementLastLoc(this.arguments,this.loc+".arguments"),n=new v.V1CommandArgumentModel(e,n,this.eventHub);return this.arguments.push(n),n.setValidationCallback(function(e){return t.updateValidity(e)}),this.eventHub.emit("argument.create",e),n},M.prototype.addBaseCommand=function(e){this.baseCommand.push(e)},M.prototype.createEnvVariable=function(e,t){var n=this,e={envName:e.envName,envValue:new _.V1ExpressionModel(e.envValue,this.loc+".requirements["+this.requirements.length+"].envVars.envDef["+this.envVars.envDef.length+"]",this.eventHub)};return e.envValue.setValidationCallback(function(e){return n.updateValidity(e)}),e},M.prototype.createRequirement=function(e,t,n){return new C.V1ResourceRequirementModel(e,t,n)},M.prototype.setRequirement=function(e,t){this.createReq(e,null,t)},M.prototype.createReq=function(e,t,n){var i,o=this,r=(n=void 0===n?!1:n)?"hints":"requirements";switch(t=t||this.loc+"."+r+"["+this[r].length+"]",e.class){case"DockerRequirement":return this.docker=new p.DockerRequirementModel(e,this.docker&&this.docker.loc||t),this.docker.isHint=n,void this.docker.setValidationCallback(function(e){return o.updateValidity(e)});case"InitialWorkDirRequirement":return t=this.fileRequirement&&this.fileRequirement.loc||t,this.fileRequirement=new w.V1InitialWorkDirRequirementModel(e,t,this.eventHub),this.fileRequirement.setValidationCallback(function(e){return o.updateValidity(e)}),void(this.fileRequirement.isHint=n);case"ResourceRequirement":return t=this.resources&&this.resources.loc||t,this.resources=this.createRequirement(e,t,this.eventHub),this.resources.setValidationCallback(function(e){return o.updateValidity(e)}),void(this.resources.isHint=n);case"EnvVarRequirement":return t=this.envVars&&this.envVars.loc||t,this.envVars=new E.V1EnvVarRequirementModel(e,t,this.eventHub),void this.envVars.setValidationCallback(function(e){return o.updateValidity(e)});case"InlineJavascriptRequirement":return t=this.inlineJavascriptRequirement&&this.inlineJavascriptRequirement.loc||t,this.inlineJavascriptRequirement=new P.V1InlineJavascriptRequirementModel(e,t),this.inlineJavascriptRequirement.setValidationCallback(function(e){return o.updateValidity(e)}),this.inlineJavascriptRequirement.isHint=n,void(this.inlineJavascriptRequirement.wasPresent=!0);default:(i=new d.RequirementBaseModel(e,_.V1ExpressionModel,t,this.eventHub)).isHint=n}i&&(this[r].push(i),i.setValidationCallback(function(e){return o.updateValidity(e)}))},M.prototype.updateStream=function(e,t){var n=this;(this[t]=e).loc=this.loc+"."+t,e.setValidationCallback(function(e){return n.updateValidity(e)})},M.prototype.deserialize=function(e){var n=this;this.id=this.id=e["sbg:id"]&&2<e["sbg:id"].split("/").length?e["sbg:id"].split("/")[2]:m.snakeCase(e.id),this.description=m.ensureArray(e.doc).join("\n"),this.label=e.label,this.namespaces=new a.NamespaceBag(e.$namespaces),this.baseCommand=m.charSeparatedToArray(e.baseCommand,/\s+/),m.ensureArray(e.inputs,"id","type").map(function(e){return n.addInput(e)}),m.ensureArray(e.outputs,"id","type").map(function(e){return n.addOutput(e)}),this.arguments=m.ensureArray(e.arguments).map(function(e){return n.addArgument(e)}),m.ensureArray(e.hints,"class","value").map(function(e,t){return n.createReq(e,null,!0)}),m.ensureArray(e.requirements,"class","value").map(function(e,t){return n.createReq(e)}),this.requirementsCounter=this.requirements.length,this.docker||(this.docker=new p.DockerRequirementModel({},this.loc+".requirements["+ ++this.requirementsCounter+"]")),this.docker.setValidationCallback(function(e){return n.updateValidity(e)}),this.fileRequirement||(this.fileRequirement=new w.V1InitialWorkDirRequirementModel({},this.loc+".requirements["+ ++this.requirementsCounter+"]",this.eventHub)),this.fileRequirement.setValidationCallback(function(e){return n.updateValidity(e)}),this.resources||(this.resources=this.createRequirement({},this.loc+".requirements["+ ++this.requirementsCounter+"]",this.eventHub)),this.resources.setValidationCallback(function(e){return n.updateValidity(e)}),this.envVars||(this.envVars=new E.V1EnvVarRequirementModel({},this.loc+".requirements["+ ++this.requirementsCounter+"]",this.eventHub)),this.envVars.setValidationCallback(function(e){return n.updateValidity(e)}),this.inlineJavascriptRequirement||(this.inlineJavascriptRequirement=new P.V1InlineJavascriptRequirementModel({},this.loc+".requirements["+ ++this.requirementsCounter+"]")),this.stdin=new _.V1ExpressionModel(e.stdin,this.loc+".stdin",this.eventHub),this.stdin.setValidationCallback(function(e){return n.updateValidity(e)}),this.stdout=new _.V1ExpressionModel(e.stdout,this.loc+".stdout",this.eventHub),this.stdout.setValidationCallback(function(e){return n.updateValidity(e)}),this.stderr=new _.V1ExpressionModel(e.stderr,this.loc+".stderr",this.eventHub),this.stderr.setValidationCallback(function(e){return n.updateValidity(e)}),this.runtime={cores:1,ram:1e3},e["sbg:job"]?(this.jobInputs=s({},f.JobHelper.getNullJobInputs(this),e["sbg:job"].inputs),this.runtime=s({},this.runtime,e["sbg:job"].runtime)):this.jobInputs=f.JobHelper.getJobInputs(this),this.sbgId=e["sbg:id"],this.successCodes=m.ensureArray(e.successCodes),this.temporaryFailCodes=m.ensureArray(e.temporaryFailCodes),this.permanentFailCodes=m.ensureArray(e.permanentFailCodes),m.spreadSelectProps(e,this.customProps,["$namespaces","baseCommand","stdout","stdin","stderr","successCodes","temporaryFailCodes","permanentFailCodes","inputs","outputs","id","class","cwlVersion","doc","label","arguments","hints","requirements"])},M.prototype.serialize=function(){var e,t={},n=!1,i=!1,o=this.eventHub.on("binding.shellQuote",function(e){n=e}),r=this.eventHub.on("expression.serialize",function(e){i=e}),s=(t.class="CommandLineTool",t.cwlVersion="v1.0",this.namespaces.isNotEmpty()&&(t.$namespaces=this.namespaces.serialize()),(this.sbgId||this.id)&&(t.id=this.sbgId||this.id),t.baseCommand=this.baseCommand.filter(function(e){return!!e}),t.inputs=this.inputs.map(function(e){return e.serialize()}),t.outputs=this.outputs.map(function(e){return e.serialize()}),this.description&&(t.doc=this.description),this.label&&(t.label=this.label),this.arguments.length&&(t.arguments=this.arguments.map(function(e){return e.serialize()}).filter(function(e){return!!e})),this.requirements.findIndex(function(e){return"ShellCommandRequirement"===e.class}));return n?(t.requirements=[],-1===s&&t.requirements.push({class:"ShellCommandRequirement"})):-1<s&&this.requirements.splice(s,1),o(),t.requirements=t.requirements||[],t.hints=[],this.requirements.length&&this.requirements.filter(function(e){return!!e}).forEach(function(e){return t.requirements.push(e.serialize())}),this.hints.length&&this.hints.forEach(function(e){return t.hints.push(e.serialize())}),this.resources.serialize()&&(e=this.resources.isHint?"hints":"requirements",t[e].push(this.resources.serialize())),this.docker.serialize()&&(e=this.docker.isHint?"hints":"requirements",t[e].push(this.docker.serialize())),this.fileRequirement.serialize()&&(e=this.fileRequirement.isHint?"hints":"requirements",t[e].push(this.fileRequirement.serialize())),this.envVars.serialize()&&t.requirements.push(this.envVars.serialize()),t.requirements.length||delete t.requirements,t.hints.length||delete t.hints,void 0!==this.stdin.serialize()&&(t.stdin=this.stdin.serialize()),void 0!==this.stdout.serialize()&&(t.stdout=this.stdout.serialize()),void 0!==this.stderr.serialize()&&(t.stderr=this.stderr.serialize()),this.successCodes.length&&(t.successCodes=this.successCodes),this.temporaryFailCodes.length&&(t.temporaryFailCodes=this.temporaryFailCodes),this.permanentFailCodes.length&&(t.permanentFailCodes=this.permanentFailCodes),this.hasMetadataScript(this.outputs)||this.inlineJavascriptRequirement.removeExpressionLib(y.sbgHelperLibrary),0<this.inlineJavascriptRequirement.expressionLib.length||this.inlineJavascriptRequirement.wasPresent?(t.requirements=t.requirements||[],t.requirements.push(this.inlineJavascriptRequirement.serialize())):i&&(t.requirements=t.requirements||[],t.requirements.push({class:"InlineJavascriptRequirement"})),r(),m.spreadAllProps(t,this.customProps)},M.prototype.hasMetadataScript=function(e){var t=this;return e.some(function(e){return e.type.fields?t.hasMetadataScript(e.type.fields):e.outputBinding.hasInheritMetadata&&e.outputBinding.inheritMetadataFrom})},M);function M(e,t){t=o.call(this,t)||this;return t.cwlVersion="v1.0",t.inputs=[],t.outputs=[],t.baseCommand=[],t.arguments=[],t.hasStdErr=!0,t.requirementsCounter=0,t.runtime={},t.initializeExprWatchers(),e&&t.deserialize(e),t.constructed=!0,t.validateAllExpressions(),t.initializeJobWatchers(),t.initializeInlineJSWatchers(),t}t.V1CommandLineToolModel=n},2200:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(2867)),a=n(6310),l=n(7287),n=(o=s.CommandOutputBindingModel,r(u,o),Object.defineProperty(u.prototype,"glob",{get:function(){return this._glob},set:function(e){e instanceof a.V1ExpressionModel?this.setGlobExpression(e,a.V1ExpressionModel):this._glob=e},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"outputEval",{get:function(){return this._outputEval},set:function(e){!new RegExp(u.INHERIT_REGEX).test(e.serialize())&&this.inheritMetadataFrom&&(this.inheritMetadataFrom=null),this.setOutputEval(e,a.V1ExpressionModel)},enumerable:!0,configurable:!0}),u.prototype.setInheritMetadataFrom=function(e){var t,n,i=this._outputEval.serialize();e?(this.inheritMetadataFrom=e,this.eventHub.emit("output.metadata.inherit"),t="$(inheritMetadata(self, inputs."+e+"))",void 0===i?this._outputEval.setValue(t):((i=i.replace(new RegExp(u.INHERIT_REGEX),""))&&this._outputEval.setIssue(((n={})[this.loc+".outputEval"]={type:"warning",code:l.ErrorCode.OUTPUT_EVAL_INHERIT,message:"Inheriting metadata appended some code to outputEval, this might change its behavior"},n)),this._outputEval.setValue((i+"\n\n"+t).trim()))):void 0!==i&&(n=i.replace(new RegExp(u.INHERIT_REGEX),""),this._outputEval.setValue(n||void 0),this._outputEval.clearIssue(l.ErrorCode.OUTPUT_EVAL_INHERIT),this.inheritMetadataFrom=e)},u.prototype.deserialize=function(e){var t=this;Array.isArray(e.glob)?this._glob=e.glob:(this._glob=new a.V1ExpressionModel(e.glob,this.loc+".glob",this.eventHub),this._glob.setValidationCallback(function(e){return t.updateValidity(e)}),this.validateGlob()),this.loadContents=!0===e.loadContents,this._outputEval=new a.V1ExpressionModel(e.outputEval,this.loc+".outputEval",this.eventHub),this._outputEval.setValidationCallback(function(e){return t.updateValidity(e)}),e.outputEval&&(e=new RegExp(u.INHERIT_REGEX).exec(e.outputEval),this.inheritMetadataFrom=e?e[1]:null)},u.prototype.serialize=function(){var e,t={};return this.loadContents&&(t.loadContents=!0),this._glob&&(e=this._glob instanceof a.V1ExpressionModel?this._glob.serialize():this._glob)&&(t.glob=e),this._outputEval&&void 0!==this._outputEval.serialize()&&(t.outputEval=this._outputEval.serialize()),t},u.INHERIT_REGEX=/.*(?:\s*)inheritMetadata\((?:\s*)self(?:\s*),(?:\s*)inputs.(.*?)(?:\s*)\)(?:\s*).*/g,u);function u(e,t,n){void 0===e&&(e={});t=o.call(this,t,n)||this;return t.hasSecondaryFiles=!1,t.hasMetadata=!1,t.hasInheritMetadata=!0,e&&t.deserialize(e),t}t.V1CommandOutputBindingModel=n},8664:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1836)),a=n(887),l=n(4916),u=n(2200),c=n(6310),n=(o=s.CommandOutputParameterModel,r(p,o),p.prototype.addSecondaryFile=function(e){return this._addSecondaryFile(e=void 0===e?"":e,c.V1ExpressionModel,this.loc)},p.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},p.prototype.removeSecondaryFile=function(e){this._removeSecondaryFile(e)},p.prototype.addParameter=function(e){var t=this;this.type=new a.ParameterTypeModel(e.type,p,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){return t.updateValidity(e)})},p.prototype.serialize=function(){var e,t={};return this.isField?t.name=this.id:t.id=this.id,this.description&&(t.doc=this.description),this.label&&(t.label=this.label),t.type=this.type.serialize("v1.0"),this.outputBinding&&(e=this.outputBinding.serialize(),0!==Object.keys(e).length&&(t.outputBinding=e)),this.isField||!this.secondaryFiles.length||"File"!==this.type.type&&"File"!==this.type.items||(t.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),l.isFileType(this)&&this.fileTypes.length&&(t["sbg:fileTypes"]=this.fileTypes.join(", ")),!this.isField&&this.streamable&&(t.streamable=this.streamable),l.spreadAllProps(t,this.customProps)},p.prototype.deserialize=function(e){var t=this,n=["id","type","outputBinding","label","doc","secondaryFiles","sbg:fileTypes","streamable"];this.isField=!!e.name,this.isField?n.push("name"):n.push("id"),this.id=e.id||e.name,this.addParameter(e),this.type.hasDirectoryType=!0,l.isType(this,["record","enum"])&&!this.type.name&&(this.type.name=this.id),this.outputBinding=new u.V1CommandOutputBindingModel(e.outputBinding,this.loc+".outputBinding",this.eventHub),this.outputBinding.setValidationCallback(function(e){return t.updateValidity(e)}),this.label=e.label,this.description=l.ensureArray(e.doc).join("\n"),this.secondaryFiles=l.ensureArray(e.secondaryFiles).map(function(e){return t.addSecondaryFile(e)}),this.fileTypes=l.commaSeparatedToArray(e["sbg:fileTypes"]),this.streamable=e.streamable,this.attachFileTypeListeners(),l.spreadSelectProps(e,this.customProps,n)},p);function p(e,t,n){t=o.call(this,t,n)||this;return t.secondaryFiles=[],t.hasSecondaryFiles=!0,t.customProps={},e&&t.deserialize(e),t}t.V1CommandOutputParameterModel=n},8572:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8194)),a=n(6310),l=n(4916),n=(o=s.DirentModel,r(u,o),u.prototype.serialize=function(){var e={};return void 0!==this.entryName.serialize()&&(e.entryname=this.entryName.serialize()),void 0!==this.entry.serialize()&&(e.entry=this.entry.serialize()),e.writable=!!this.writable,l.spreadAllProps(e,this.customProps)},u.prototype.deserialize=function(e){var t=this;this.entryName=new a.V1ExpressionModel(e.entryname,this.loc+".entryname",this.eventHub),this.entryName.setValidationCallback(function(e){return t.updateValidity(e)}),this.entry=new a.V1ExpressionModel(e.entry,this.loc+".entry",this.eventHub),this.entry.setValidationCallback(function(e){return t.updateValidity(e)}),this.writable=!!e.writable,l.spreadSelectProps(e,this.customProps,["entry","entryname","writable"])},u);function u(e,t,n){t=o.call(this,t,n)||this;return e&&t.deserialize(e),t}t.V1DirentModel=n},2054:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(5275)),a=n(8668),l=n(6310),n=(o=s.EnvVarRequirementModel,r(u,o),u.prototype.serialize=function(){var e={};if(e.class=this.class,e.envDef=this.envDef.map(function(e){return{envName:e.envName,envValue:e.envValue.serialize()}}).filter(function(e){return!!e.envName}),0!=e.envDef.length)return a.spreadAllProps(e,this.customProps)},u.prototype.deserialize=function(e){var i=this;return this.envDef=e.envDef?a.ensureArray(e.envDef,"envName","envValue").map(function(e,t){var n=e.envValue||"",n=new l.V1ExpressionModel(n,i.loc+".envDef["+t+"].envValue",i.eventHub);return n.setValidationCallback(function(e){return i.updateValidity(e)}),{envName:e.envName,envValue:n}}):[],a.spreadSelectProps(e,this.customProps,["class","envDef"])},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.V1EnvVarRequirementModel=n},6310:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(1636)),l=n(8124),n=(o=a.ExpressionModel,r(u,o),u.prototype.serialize=function(){return"expression"===this.type&&this.eventHub&&this.eventHub.emit("expression.serialize",!0),""!==this.value?this.value:void 0},u.prototype.deserialize=function(e){"string"==typeof e&&(this.value=e,this.tokenizeAndSetType(e))},u.prototype.tokenizeAndSetType=function(e){return this.tokens=l.ExpressionEvaluator.grabExpressions(e||"")||[],this.type=1===this.tokens.length&&"literal"===this.tokens[0].type||0===this.tokens.length?"string":"expression",this.tokens},u.prototype.evaluate=function(e){return void 0===e&&(e=this.cachedContext),void 0!==this.value?this._evaluate(this.value,e,"v1.0"):new Promise(function(e){e(void 0)})},u.prototype.setValue=function(e,t){this.result=void 0,this.tokenizeAndSetType(e),this.value=e,this.eventHub&&this.eventHub.emit("expression.change",this)},u.prototype.getScript=function(){return this.value},u.prototype.toString=function(){return this.value||""},u.prototype.clone=function(){return new u(this.serialize(),this.loc,this.eventHub)},u.prototype.cloneStatus=function(e){this.setValue(e.serialize()),this.setIssue(s({},e.issues))},u.prototype.cloneValidationCallback=function(e){var t=this;e.setValidationCallback(function(e){return t.updateValidity(e)})},u);function u(e,t,n){t=o.call(this,t,n)||this;return t.value="",t.tokens=[],(e=e instanceof u?e.serialize():e)&&t.deserialize(e),t.eventHub&&t.eventHub.emit("expression.create",t),t}t.V1ExpressionModel=n},7229:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a=(Object.defineProperty(t,"__esModule",{value:!0}),n(8753)),l=n(8572),u=n(4916),c=n(1636),p=n(6310),n=(o=a.CreateFileRequirementModel,r(d,o),d.prototype.addDirent=function(e){var t=this,e=new l.V1DirentModel(e,this.loc+".listing["+this.listing.length+"]",this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.listing.push(e),e},d.prototype.addExpression=function(e){var t=this,e=new p.V1ExpressionModel(e=void 0===e?"":e,this.loc+".listing["+this.listing.length+"]",this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.listing.push(e),e},d.prototype.serialize=function(){var e,t,n={class:"InitialWorkDirRequirement",listing:this.listing.reduce(function(e,t){var n=t.serialize();return n&&(t instanceof c.ExpressionModel||n.entryname||n.entry)&&e.push(n),e},[])};return this.customProps.listing?(n.listing=n.listing.concat(this.customProps.listing),delete(e=s({},this.customProps)).listing,u.spreadAllProps(n,e)):(e=Object.keys(n),t=Object.keys(this.customProps),2!==e.length||"class"!==e[0]||"listing"!==e[1]||n.listing.length||0!==t.length?u.spreadAllProps(n,this.customProps):void 0)},d.prototype.deserialize=function(e){var n=this,i=[],o=[],t=["class"];Array.isArray(e.listing)&&e.listing.forEach(function(e){var t;e&&(e.entryname||e.entry?(t=n.addDirent(e),i.push(t)):"string"==typeof e?i.push(n.addExpression(e)):o.push(e))}),i.length&&t.push("listing"),o.length&&(this.customProps.listing=o),this.listing=i,u.spreadSelectProps(e,this.customProps,t)},d);function d(e,t,n){t=o.call(this,t,n)||this;return t.class="InitialWorkDirRequirement",t.listing=[],e&&t.deserialize(e),t}t.V1InitialWorkDirRequirementModel=n},4105:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8219)),a=n(4916),n=(o=s.ProcessRequirementModel,r(l,o),l.prototype.addExpressionLib=function(e){-1===this.expressionLib.indexOf(e)&&this.expressionLib.push(e)},l.prototype.removeExpressionLib=function(e){e=this.expressionLib.indexOf(e);-1!==e&&this.expressionLib.splice(e,1)},l.prototype.deserialize=function(e){this.expressionLib=e.expressionLib||[],a.spreadSelectProps(e,this.customProps,["expressionLib","class"])},l.prototype.serialize=function(){var e={};return e.class=this.class,this.expressionLib.length&&(e.expressionLib=this.expressionLib),a.spreadAllProps(e,this.customProps)},l);function l(e,t){t=o.call(this,t)||this;return t.class="InlineJavascriptRequirement",t.wasPresent=!1,t.expressionLib=[],e&&t.deserialize(e),t}t.V1InlineJavascriptRequirementModel=n},6780:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(99)),a=n(6310),l=n(4916),n=(o=s.ResourceRequirementModel,r(u,o),u.prototype.serialize=function(){var e,t=this.mem.serialize(),n=this.cores.serialize();if(void 0!==t||void 0!==n||Object.keys(this.customProps).length)return t=l.returnNumIfNum(t,this.parseResourcesAsFloat),n=l.returnNumIfNum(n,this.parseResourcesAsFloat),e={class:"ResourceRequirement"},void 0!==t&&(e.ramMin=t),void 0!==n&&(e.coresMin=n),l.spreadAllProps(e,this.customProps)},u.prototype.deserialize=function(e){var t=this;void 0!==e.ramMin&&null!==e.ramMin&&(this.mem=new a.V1ExpressionModel(e.ramMin.toString(),this.loc+".ramMin",this.eventHub),this.mem.setValidationCallback(function(e){return t.updateValidity(e)})),void 0!==e.coresMin&&null!==e.coresMin&&(this.cores=new a.V1ExpressionModel(e.coresMin.toString(),this.loc+".coresMin",this.eventHub),this.cores.setValidationCallback(function(e){return t.updateValidity(e)})),l.spreadSelectProps(e,this.customProps,["class","ramMin","coresMin"])},u.prototype.validate=function(e){return Promise.all([this.mem.validate(e),this.cores.validate(e)])},u);function u(e,t,n){var i=o.call(this,t,n)||this;return i.class="ResourceRequirement",i.parseResourcesAsFloat=!1,i.mem=new a.V1ExpressionModel("",i.loc+".ramMin",i.eventHub),i.mem.setValidationCallback(function(e){return i.updateValidity(e)}),i.cores=new a.V1ExpressionModel("",i.loc+".coresMin",i.eventHub),i.cores.setValidationCallback(function(e){return i.updateValidity(e)}),e&&i.deserialize(e),i}t.V1ResourceRequirementModel=n},2759:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=this&&this.__assign||Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s=(Object.defineProperty(t,"__esModule",{value:!0}),n(160)),a=n(2153),c=n(4770),l=n(2240),p=n(7076),d=n(4916),h=n(3466),f=n(6310),y=n(9365),m=n(2455),n=(o=c.StepModel,r(v,o),v.prototype.addHint=function(e){return this.createReq(e,f.V1ExpressionModel,void 0,!0)},v.prototype.serializeEmbedded=function(e){return this._serialize(!0,e=void 0===e?!1:e)},v.prototype.serialize=function(){return this._serialize(!1)},v.prototype._serialize=function(e,t){void 0===t&&(t=!1);var n={},e=(n.id=this.id,n.in=this.in.map(function(e){return e.serialize()}).filter(function(e){e=Object.keys(e);return!(1===e.length&&"id"===e[0])}),n.out=this.out.map(function(e){return e.serialize()}),this.customProps["sbg:rdfId"]&&!e?n.run=this.customProps["sbg:rdfId"]:e&&this.run&&this.run instanceof p.WorkflowModel?n.run=this.run.serializeEmbedded():this.run&&"function"==typeof this.run.serialize?n.run=this.run.serialize():n.run=this.runPath,u({},this.customProps));return t||(delete e["sbg:rdfId"],delete e["sbg:rdfSource"]),this._label&&(n.label=this.label),this.description&&(n.doc=this.description),this.scatter.length&&(n.scatter=this.scatter),this.scatterMethod&&(n.scatterMethod=this.scatterMethod),this.hints.length&&(n.hints=this.hints.map(function(e){return e.serialize()})),d.spreadAllProps(n,e)},v.prototype.deserialize=function(e){var n=this,t=(this.id=e.id||"",this.description=d.ensureArray(e.doc).join("\n"),this._label=e.label,e.run&&e.run.class);"string"==typeof e.run?(console.warn("Expected to get json for step.run at "+this.loc+", reading in and out from step"),this.runPath=e.run):t&&this.createRun(e.run),this.in=d.ensureArray(e.in,"id","source").map(function(e,t){return n.createWorkflowStepInputModel(e,t)}),this.out=d.ensureArray(e.out,"id").map(function(e,t){return n.createWorkflowStepOutputModel(e,t)}),t&&(this.compareInPorts(),this.compareOutPorts()),this.in.forEach(function(e){!e.type||e.type.isNullable||"File"!==e.type.type&&"File"!==e.type.items&&"Directory"!==e.type.type&&"Directory"!==e.type.items||(e.isVisible=!0)}),this.requirements=d.ensureArray(e.requirements,"class"),this.hints=d.ensureArray(e.hints).map(function(e,t){return n.createReq(e,f.V1ExpressionModel,n.loc+".hints["+t+"]",!0)}),this.scatter=d.ensureArray(e.scatter),this.scatterMethod=e.scatterMethod,d.spreadSelectProps(e,this.customProps,["id","doc","label","run","scatter","scatterMethod","in","out","hints"])},v.prototype.setRunProcess=function(e){e&&e.class&&(this.createRun(e),this.compareInPorts(!0),this.compareOutPorts(!0),this.eventHub.emit("step.update",this))},v.prototype.createWorkflowStepInputModel=function(e,t){return new y.V1WorkflowStepInputModel(e,this,this.loc+".in["+t+"]",this.eventHub)},v.prototype.createWorkflowStepOutputModel=function(e,t){return new m.V1WorkflowStepOutputModel(e,this,this.loc+".out["+t+"]")},v.prototype.createRun=function(e){switch(e.class){case"Workflow":this.run=l.WorkflowFactory.from(e,this.loc+".run");break;case"CommandLineTool":this.run=s.CommandLineToolFactory.from(e,this.loc+".run");break;case"ExpressionTool":this.run=new a.ExpressionToolModel(e);break;default:throw new Error('Unknown process class "'+e.class+'" at '+this.loc+'.step. Expected "CommandLineTool", "Workflow", or "ExpressionTool"')}this.id=this.id||d.snakeCase(this.run.id)||d.snakeCase(this.loc),this._label=this._label||this.run.label||""},v.prototype.compareInPorts=function(r){var s=this;void 0===r&&(r=!1);var e=this.run.inputs,a=[],l=this.in;r&&(t=c.StepModel.portDifference(this.in,this.run.inputs),a=t[0],l=t[1],t[2].forEach(function(e){return s.eventHub.emit("step.inPort.remove",e)})),this.in=e.map(function(t,e){var n=l.find(function(e){return t.id===e.id}),i=n?n.serialize():{id:t.id},o=s.createWorkflowStepInputModel(u({type:t.type,fileTypes:t.fileTypes||[],doc:t.description,label:t.label,secondaryFiles:t.secondaryFiles,"sbg:toolDefaultValue":t.customProps["sbg:toolDefaultValue"],"sbg:category":t.customProps["sbg:category"],"sbg:altPrefix":t.customProps["sbg:altPrefix"],"sbg:secretAlias":t.customProps["sbg:secretAlias"]},i),s.loc+".in["+e+"]"),i=(o.setValidationCallback(function(e){return s.updateValidity(e)}),a.find(function(e){return e.id===o.id})&&s.eventHub.emit("step.inPort.create",o),n&&r&&s.eventHub.emit("step.port.change",o),o.isVisible=n&&n.isVisible||d.isFileType(o,!0),!n||n.isVisible!==o.isVisible);return o.isVisible&&r&&i&&setTimeout(function(){s.eventHub.emit("step.inPort.show",o)}),o}).filter(function(e){return void 0!==e});var t=this.in.concat(l).reduce(function(e,t){return e.find(function(e){return e.id===t.id})?e:e.concat([t])},[]);this.in=t},v.prototype.addCustomInPort=function(){var t=this,e=(d.incrementLastLoc(this.in,this.loc+".in"),d.getNextAvailableId("custom_input",this.in.concat(this.out,this.run.inputs,this.run.outputs))),e=this.createWorkflowStepInputModel({id:e},this);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.in.push(e),e},v.prototype.removeCustomInPort=function(e){var t=this.in.indexOf(e);if(!(t<0)){this.in[t].clearIssue(h.ErrorCode.ALL),this.in[t].clearListeners(),this.in.splice(t,1);for(var n=t;n<this.in.length;n++)this.in[n].updateLoc(this.loc+".in["+n+"]");this.eventHub.emit("step.inPort.remove",e)}},v.prototype.compareOutPorts=function(o){var r=this;void 0===o&&(o=!1);var e,t=this.run.outputs,s=[];o&&(e=c.StepModel.portDifference(this.out,this.run.outputs),s=e[0],e[1],e[2].forEach(function(e){return r.eventHub.emit("step.outPort.remove",e)})),this.out=t.map(function(t,e){var n=(n=r.out.find(function(e){return e.id===t.id}))?n.serialize():{id:t.id},i=new m.V1WorkflowStepOutputModel(u({type:t.type,format:t.fileTypes||[],doc:t.description,label:t.label,fileTypes:t.fileTypes,secondaryFiles:t.secondaryFiles},n),r,r.loc+".out["+e+"]");return s.find(function(e){return e.id===i.id})&&r.eventHub.emit("step.outPort.create",i),n&&o&&r.eventHub.emit("step.port.change",i),i}).filter(function(e){return void 0!==e})},v);function v(e,t,n){t=o.call(this,t,n)||this;return t.in=[],t.out=[],t.hasMultipleScatter=!0,t.hasScatterMethod=!0,e&&t.deserialize(e),t}t.V1StepModel=n},4356:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(887)),a=n(4916),l=n(6310),n=(o=n(2110).WorkflowInputParameterModel,r(u,o),u.prototype.addParameter=function(e){var t=this;this.type=new s.ParameterTypeModel(e.type,u,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){return t.updateValidity(e)})},u.prototype.deserialize=function(e){var t=this;this._label=e.label,this.description=a.ensureArray(e.doc).join("\n"),this.doc=this.description,this.id=e.id||e.name,this.isField=!!e.name,this.addParameter(e),this.type.hasDirectoryType=!0,this.fileTypes=a.commaSeparatedToArray(e["sbg:fileTypes"]),this.isVisible=!e["sbg:exposed"],this.secondaryFiles=a.ensureArray(e.secondaryFiles).map(function(e){return t.addSecondaryFile(e)}),this.attachFileTypeListeners(),a.spreadSelectProps(e,this.customProps,["id","name","type","label","doc","sbg:fileTypes","secondaryFiles"])},u.prototype.addSecondaryFile=function(e){return this._addSecondaryFile(e,l.V1ExpressionModel,""+this.loc)},u.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},u.prototype.removeSecondaryFile=function(e){this._removeSecondaryFile(e)},u.prototype.serialize=function(){var e={};return this.isField?e.name=this.id:(e.id=this.id,a.isFileType(this)&&this.fileTypes.length&&(e["sbg:fileTypes"]=this.fileTypes.join(", "))),(this.type.type||this.type.unionType)&&(e.type=this.type.serialize("v1.0")),this._label&&(e.label=this._label),this.description&&(e.doc=this.description),this.secondaryFiles&&this.secondaryFiles.length&&(e.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),a.spreadAllProps(e,this.customProps)},u);function u(e,t,n){t=o.call(this,t,n)||this;return e&&t.deserialize(e),t}t.V1WorkflowInputParameterModel=n},6458:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(5752)),p=n(7076),a=n(2625),d=n(4916),l=n(6310),u=n(2759),c=n(4356),h=n(9307),f=n(7990),n=(o=p.WorkflowModel,r(y,o),y.prototype.createStepFromProcess=function(e,t){return new u.V1StepModel({in:[],out:[],run:e},t,this.eventHub)},y.prototype.addStepFromProcess=function(e){var t=this,n=this.loc+".steps["+this.steps.length+"]",e=this.createStepFromProcess(e,n);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.steps.push(e),e.id=this.getNextAvailableId(e.id),this.addStepToGraph(e),this.eventHub.emit("step.create",e),e},y.prototype.addEntry=function(e,t){var n=this;return e.loc=this.loc+"."+t+"["+this[t].length+"]",this[t].push(e),e.setValidationCallback(function(e){return n.updateValidity(e)}),e},y.prototype.getContext=function(e){var s=this,a=e;return{inputs:a.in.reduce(function(e,i){var n,t,o,r=i.source;return!r||Array.isArray(r)&&!r.length?e[i.id]=null:(n=function(e){var t,n,e=s.graph.getVertexData(s.getSourceConnectionId(e));if(e)return n=e.type,e=(e=e.parentStep||e).scatter,(t=new c.V1WorkflowInputParameterModel({id:i.id})).type=n,n=f.JobHelper.generateMockJobData(t),e&&("string"==typeof e||e.length)?[n]:n},r=Array.isArray(r)?1===r.length?n(r[0]):r.reduce(function(e,t){return e.push(n(t)),e},[]):n(r),t=(Array.isArray(r)&&"merge_flattened"===i.linkMerge.value&&(r=d.flatArray(r,1/0)),!1),(o=a.scatter)&&"string"==typeof o?o===i.id&&(t=!0):Array.isArray(o)&&o.find(function(e){return e===i.id})&&(t=!0),e[i.id]=t&&Array.isArray(r)?r[0]:r),e},{})}},y.prototype.createInputFromPort=function(e,t){return o.prototype._createInputFromPort.call(this,e,c.V1WorkflowInputParameterModel,void 0,void 0,t=void 0===t?{}:t)},y.prototype.createOutputFromPort=function(e,t){return o.prototype._createOutputFromPort.call(this,e,h.V1WorkflowOutputParameterModel,void 0,void 0,t=void 0===t?{}:t)},y.prototype.exposePort=function(e){e=o.prototype._exposePort.call(this,e,c.V1WorkflowInputParameterModel);e.customProps["sbg:exposed"]=!0,e.isVisible=!1},y.prototype.getSourceConnectionId=function(e){return/[\/]+/.test(e)?a.STEP_OUTPUT_CONNECTION_PREFIX+e:""+a.STEP_OUTPUT_CONNECTION_PREFIX+e+"/"+e},y.prototype.isSourceFromStep=function(e,t){return/[\/]+/.test(e)&&(e=e.split("/"))[0]===t?e[1]:null},y.prototype.addHint=function(e){return this.createReq(e,l.V1ExpressionModel,void 0,!0)},y.prototype.serializeEmbedded=function(e){return this._serialize(!0,e=void 0===e?!1:e)},y.prototype.serialize=function(){return this._serialize(!1)},y.prototype._serialize=function(t,n){void 0===n&&(n=!1);var e={class:"Workflow",cwlVersion:"v1.0"};(this.sbgId||this.id)&&(e.id=this.sbgId||this.id),this.description&&(e.doc=this.description),this.label&&(e.label=this.label),this.namespaces.isNotEmpty()&&(e.$namespaces=this.namespaces.serialize()),e.inputs=this.inputs.map(function(e){return e.serialize()}),e.outputs=this.outputs.map(function(e){return e.serialize()}),e.steps=this.steps.map(function(e){return t?e.serializeEmbedded(n):e.serialize()}),this.hints.length&&(e.hints=this.hints.map(function(e){return e.serialize()}));for(var i=d.ensureArray(this.requirements,"class","value").map(function(e){return e.serialize()})||[],o=!0,r={SubworkflowFeatureRequirement:!1,ScatterFeatureRequirement:!1,MultipleInputFeatureRequirement:!1,InlineJavascriptRequirement:!1,StepInputExpressionRequirement:!1},s=0;s<this.steps.length;s++){var a=this.steps[s];a.run&&a.run instanceof p.WorkflowModel?r.SubworkflowFeatureRequirement=!0:a.run||(o=!1),a.scatter.length&&(r.ScatterFeatureRequirement=!0);for(var l=0;l<a.in.length;l++){var u=a.in[l];u.source&&1<u.source.length&&(r.MultipleInputFeatureRequirement=!0),u.valueFrom&&(r.InlineJavascriptRequirement=!0,r.StepInputExpressionRequirement=!0)}}for(var c in r)!function(t){!o&&"SubworkflowFeatureRequirement"===t||(i=i.filter(function(e){return e.class!==t})),r[t]&&i.push({class:t})}(c);return e.requirements=i,delete this.customProps.requirements,d.spreadAllProps(e,this.customProps)},y.prototype.addInput=function(e,t){this.addEntry(new c.V1WorkflowInputParameterModel(e,this.loc+".inputs["+t+"]",this.eventHub),"inputs")},y.prototype.addOutput=function(e,t){this.addEntry(new h.V1WorkflowOutputParameterModel(e,this.loc+".outputs["+t+"]",this.eventHub),"outputs")},y.prototype.addStep=function(e,t){e.run&&"string"!=typeof e.run&&(e.run.cwlVersion=e.run.cwlVersion||"v1.0"),this.addEntry(new u.V1StepModel(e,this.loc+".steps["+t+"]",this.eventHub),"steps")},y.prototype.deserialize=function(e){var n=this;this.id=this.id=e["sbg:id"]&&2<e["sbg:id"].split("/").length?e["sbg:id"].split("/")[2]:d.snakeCase(e.id),this.sbgId=e["sbg:id"],this.label=e.label,this.description=d.ensureArray(e.doc).join("\n"),this.namespaces=new s.NamespaceBag(e.$namespaces),d.ensureArray(e.inputs,"id","type").forEach(function(e,t){n.addInput(e,t)}),d.ensureArray(e.outputs,"id","type").forEach(function(e,t){n.addOutput(e,t)}),d.ensureArray(e.steps,"id").forEach(function(e,t){n.addStep(e,t)}),this.hints=d.ensureArray(e.hints).map(function(e,t){return n.createReq(e,l.V1ExpressionModel,n.loc+".hints["+t+"]",!0)}),this.requirements=d.ensureArray(e.requirements).map(function(e,t){return n.createReq(e,l.V1ExpressionModel,n.loc+".requirements["+t+"]")}),d.spreadSelectProps(e,this.customProps,["class","$namespaces","id","inputs","outputs","steps","cwlVersion","doc","label","hints","requirements"])},y);function y(e,t){t=o.call(this,t||"document")||this;return t.cwlVersion="v1.0",t.steps=[],t.inputs=[],t.outputs=[],t.requirements=[],t.customProps={},t.initializeExprWatchers(),e&&t.deserialize(e),t.constructed=!0,t.graph=t.constructGraph(),t.validateAllExpressions(),t.validateGraph(),t}t.V1WorkflowModel=n},9307:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1581)),a=n(3175),l=n(887),u=n(4916),c=n(6310),n=(o=a.WorkflowOutputParameterModel,r(p,o),p.prototype.deserialize=function(e){var t=this,n=["id","name","outputSource","linkMerge","type","label","doc","sbg:fileTypes","secondaryFiles"];this.isField=!!e.name,this.isField?n.push("name"):n.push("id"),this.isField?this.id=e.name:this.id=e.id,this.isField||(this.source=u.ensureArray(e.outputSource)),this.linkMerge=new s.LinkMerge(e.linkMerge),this.type=new l.ParameterTypeModel(e.type,p,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){return t.updateValidity(e)}),this.type.hasDirectoryType=!0,this._label=e.label,this.description=u.ensureArray(e.doc).join("\n"),this.doc=this.description,this.isField||(this.fileTypes=u.commaSeparatedToArray(e["sbg:fileTypes"])),this.secondaryFiles=u.ensureArray(e.secondaryFiles).map(function(e){return t.addSecondaryFile(e)}),this.attachFileTypeListeners(),u.spreadSelectProps(e,this.customProps,n)},p.prototype.serialize=function(){var e={},t=(this.isField?e.name=this.id:(e.id=this.id,this.source.length&&(e.outputSource=this.source.slice()),u.isFileType(this)&&this.fileTypes.length&&(e["sbg:fileTypes"]=this.fileTypes.join(", "))),this.linkMerge&&this.linkMerge.serialize());return t&&(e.linkMerge=t),this.type&&(e.type=this.type.serialize("v1.0")),this._label&&(e.label=this._label),this.description&&(e.doc=this.description),this.secondaryFiles&&this.secondaryFiles.length&&(e.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),u.spreadAllProps(e,this.customProps)},p.prototype.addSecondaryFile=function(e){return this._addSecondaryFile(e,c.V1ExpressionModel,""+this.loc)},p.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},p.prototype.removeSecondaryFile=function(e){this._removeSecondaryFile(e)},p);function p(e,t,n){t=o.call(this,t,n)||this;return e&&t.deserialize(e),t}t.V1WorkflowOutputParameterModel=n},9365:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1581)),a=n(887),l=n(7153),u=n(4916),c=n(6310),n=(o=l.WorkflowStepInputModel,r(p,o),p.prototype.serialize=function(){var e={id:this.id};return(e.linkMerge=this.linkMerge.serialize())||delete e.linkMerge,void 0!==this.default&&null!==this.default&&(e.default=this.default),this.source.length&&(1!==this.source.length||this.type.isItemOrArray||this.type.items||this.linkMerge.value&&"merge_nested"!==this.linkMerge.value?e.source=this.source.slice():e.source=this.source[0]),this.valueFrom&&this.valueFrom.serialize()&&(e.valueFrom=this.valueFrom.serialize()),delete(e=u.spreadAllProps(e,this.customProps))["sbg:toolDefaultValue"],delete e["sbg:category"],delete e["sbg:altPrefix"],e},p.prototype.deserialize=function(e){this.id=e.id,this.default=e.default,this.source=u.ensureArray(e.source),this.linkMerge=new s.LinkMerge(e.linkMerge),this.valueFrom=new c.V1ExpressionModel(e.valueFrom,this.loc+".valueFrom",this.eventHub),this.type=e.type,this.type||(this.type=new a.ParameterTypeModel("any"),this.type.isNullable=!0),this.type.hasDirectoryType=!0,this.doc=e.doc,this.description=u.ensureArray(this.doc).join("\n"),this.label=e.label,this.fileTypes=e.fileTypes||[],this.secondaryFiles=e.secondaryFiles,u.spreadSelectProps(e,this.customProps,["id","linkMerge","default","source","type","doc","label","fileTypes","secondaryFiles","valueFrom"])},p);function p(e,t,n,i){n=o.call(this,n)||this;return n.isVisible=!1,n.parentStep=t,e&&n.deserialize(e),n}t.V1WorkflowStepInputModel=n},2455:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1303)),a=n(887),l=n(8668),n=(o=s.WorkflowStepOutputModel,r(u,o),u.prototype.serialize=function(){return{id:this.id}},Object.defineProperty(u.prototype,"sourceId",{get:function(){return this.parentStep.id+"/"+this.id},enumerable:!0,configurable:!0}),u.prototype.deserialize=function(e){this.id=e.id,this.type=e.type,this.type||(this.type=new a.ParameterTypeModel(null)),this.type.hasDirectoryType=!0,this.doc=e.doc,this.description=l.ensureArray(this.doc).join("\n"),this.label=e.label,this.secondaryFiles=e.secondaryFiles,this.fileTypes=e.format},u);function u(e,t,n){n=o.call(this,n)||this;return n.parentStep=t,e&&n.deserialize(e),n}t.V1WorkflowStepOutputModel=n},2492:(e,n,t)=>{function i(e){for(var t in e)n.hasOwnProperty(t)||(n[t]=e[t])}Object.defineProperty(n,"__esModule",{value:!0}),i(t(222)),i(t(4471)),i(t(994)),i(t(6458)),i(t(2759)),i(t(4356)),i(t(9307)),i(t(6310)),i(t(4105))},9080:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(222)),a=n(1199),n=(o=s.V1CommandArgumentModel,r(l,o),l.prototype.updateBinding=function(e){o.prototype.updateBinding.call(this,e),this.binding.setPosition(e.position)},l.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e)},l);function l(e,t,n){t=o.call(this,null,t,n)||this;return t.bindingModel=a.V1_1CommandLineBindingModel,e&&t.deserialize(e),t}t.V1_1CommandArgumentModel=n},2724:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(887)),a=n(994),l=n(1199),u=n(4916),c=n(7581),p=n(5097),n=(o=a.V1CommandInputParameterModel,r(d,o),d.prototype.addSecondaryFile=function(e){var t=this,n=u.incrementLastLoc(this.secondaryFiles,this.loc+".secondaryFiles"),e=new c.V1_1InputSecondaryFileSchemaModel(e,n,this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.secondaryFiles.push(e),e},d.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},d.prototype.removeSecondaryFile=function(e){this.secondaryFiles[e]&&this.secondaryFiles.splice(e,1)},d.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e),(this.inputBinding&&this.inputBinding.loadContents||e.loadContents)&&(this.loadContents=!0),void 0!==e.inputBinding?this.addInputBinding(e):this.removeInputBinding(),this.type.hasStdinType=!0,this.loadListing=new p.LoadListing(e.loadListing)},d.prototype.serialize=function(){var e=o.prototype.serialize.call(this);return e.inputBinding&&delete e.inputBinding.loadContents,this.loadContents&&(e.loadContents=this.loadContents),void 0!==this.streamable&&(e.streamable=this.streamable),this.secondaryFiles&&this.secondaryFiles.length&&(e.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),this.type.hasStdinType=!0,u.isType(this,["Directory"])?e.loadListing=""+this.loadListing:delete e.loadListing,u.isType(this,["stdin"])&&delete e.inputBinding,e},d.prototype.addParameter=function(e){var t=this;this.type=new s.ParameterTypeModel(e.type,d,this.id+"_field",this.loc+".type",this.eventHub),e.type&&e.type.inputBinding&&(e=new l.V1_1CommandLineBindingModel(e.type.inputBinding,this.type.loc+".inputBinding",this.eventHub),this.type.addInputBinding(e)),this.type.setValidationCallback(function(e){return t.updateValidity(e)})},d.prototype.createInputBinding=function(){var t=this;return this.inputBinding=new l.V1_1CommandLineBindingModel({},this.loc+".inputBinding",this.eventHub),this.inputBinding.setValidationCallback(function(e){return t.updateValidity(e)}),this.inputBinding},d.prototype.addInputBinding=function(e){var t=this;this.inputBinding=new l.V1_1CommandLineBindingModel(e.inputBinding,this.loc+".inputBinding",this.eventHub),this.inputBinding.setValidationCallback(function(e){return t.updateValidity(e)})},d);function d(){return null!==o&&o.apply(this,arguments)||this}t.V1_1CommandInputParameterModel=n},1199:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1636)),a=n(8894),l=n(6310),n=(o=a.V1CommandLineBindingModel,r(u,o),u.prototype.setPosition=function(e){var t=this;e=(e=e instanceof s.ExpressionModel?e.serialize()||0:e)||~~e,this.position&&this.position instanceof s.ExpressionModel?this.position.setValue(e):(this.position=new l.V1ExpressionModel(e.toString(),this.loc+".position",this.eventHub),this.position.setValidationCallback(function(e){return t.updateValidity(e)}))},u.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e),this.setPosition(e.position)},u.prototype.serialize=function(){var e=o.prototype.serialize.call(this);return e.position=this.position.serialize()||0,e.position=isNaN(e.position)?e.position:parseInt(e.position,10),e},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.V1_1CommandLineBindingModel=n},6761:function(e,t,n){var i,r,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(4471)),a=n(2724),l=n(5268),u=n(4217),c=n(1794),p=n(9080),d=n(8668),n=(r=s.V1CommandLineToolModel,o(h,r),h.prototype.addOutput=function(e){return r.prototype._addOutput.call(this,l.V1_1CommandOutputParameterModel,e)},h.prototype.addInput=function(e){return r.prototype._addInput.call(this,a.V1_1CommandInputParameterModel,e)},h.prototype.addArgument=function(e){var t=this,n=d.incrementLastLoc(this.arguments,this.loc+".arguments"),n=new p.V1_1CommandArgumentModel(e,n,this.eventHub);return this.arguments.push(n),n.setValidationCallback(function(e){return t.updateValidity(e)}),this.eventHub.emit("argument.create",e),n},h.prototype.createReq=function(e,t,n){var i=this,o=(n=void 0===n?!1:n)?"hints":"requirements";return t=t||this.loc+"."+o+"["+this[o].length+"]","ToolTimeLimit"===e.class?(t=this.timeLimitRequirement&&this.timeLimitRequirement.loc||t,this.timeLimitRequirement=new u.V1_1ToolTimeLimitRequirementModel(e,t,this.eventHub),void this.timeLimitRequirement.setValidationCallback(function(e){return i.updateValidity(e)})):"WorkReuse"===e.class?(t=this.workReuseRequirement&&this.workReuseRequirement.loc||t,this.workReuseRequirement=new c.V1_1WorkReuseRequirementModel(e,t,this.eventHub),void this.workReuseRequirement.setValidationCallback(function(e){return i.updateValidity(e)})):void r.prototype.createReq.call(this,e,t,n)},h.prototype.deserialize=function(e){r.prototype.deserialize.call(this,e),this.timeLimitRequirement||(this.timeLimitRequirement=new u.V1_1ToolTimeLimitRequirementModel({class:"ToolTimeLimit"},this.loc+".requirements["+ ++this.requirementsCounter+"]",this.eventHub)),this.workReuseRequirement||(this.workReuseRequirement=new c.V1_1WorkReuseRequirementModel({class:"WorkReuse"},this.loc+".requirements["+ ++this.requirementsCounter+"]",this.eventHub))},h.prototype.serialize=function(){var e=r.prototype.serialize.call(this);return e.cwlVersion="v1.1",this.timeLimitRequirement.serialize()&&(e.requirements=e.requirements||[],e.requirements.push(this.timeLimitRequirement.serialize())),this.workReuseRequirement.serialize()&&(e.requirements=e.requirements||[],e.requirements.push(this.workReuseRequirement.serialize())),this.inputs.concat(this.outputs).find(function(e){return d.isType(e,["Directory"])})&&(e.requirements=e.requirements||[],e.requirements.find(function(e){return"LoadListingRequirement"===e.class})||e.requirements.push({class:"LoadListingRequirement"})),e},h);function h(e,t){e=r.call(this,e,t)||this;return e.cwlVersion="v1.1",e}t.V1_1CommandLineToolModel=n},5268:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8664)),a=n(3137),l=n(4916),u=n(7581),c=n(5097),n=(o=s.V1CommandOutputParameterModel,r(p,o),p.prototype.addSecondaryFile=function(e){var t=this,n=l.incrementLastLoc(this.secondaryFiles,this.loc+".secondaryFiles"),e=new u.V1_1OutputSecondaryFileSchemaModel(e,n,this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.secondaryFiles.push(e),e},p.prototype.addParameter=function(e){var t=this;this.type=new a.ParameterTypeModel(e.type,p,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){return t.updateValidity(e)})},p.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},p.prototype.removeSecondaryFile=function(e){this.secondaryFiles[e]&&this.secondaryFiles.splice(e,1)},p.prototype.serialize=function(){var e=o.prototype.serialize.call(this);return this.streamable&&(e.streamable=this.streamable),!this.secondaryFiles.length||"File"!==this.type.type&&"File"!==this.type.items||(e.secondaryFiles=this.secondaryFiles.map(function(e){return e.serialize()}).filter(function(e){return!!e})),l.isType(this,["Directory"])?(e.outputBinding=e.outputBinding||{},e.outputBinding.loadListing=""+this.loadListing):e.outputBinding&&delete e.outputBinding.loadListing,e},p.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e),this.loadListing=new c.LoadListing(e.outputBinding&&e.outputBinding.loadListing||"deep_listing")},p);function p(){return null!==o&&o.apply(this,arguments)||this}t.V1_1CommandOutputParameterModel=n},7581:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1442)),a=n(2492),l=n(3466),n=(o=s.ValidationBase,r(u,o),u.prototype.setPattern=function(e){var t=this;this.pattern?this.pattern.setValue(e):(this.pattern=new a.V1ExpressionModel(e,this.loc+".pattern",this.eventHub),this.pattern.setValidationCallback(function(e){return t.updateValidity(e)}))},u.prototype.setRequired=function(e){var t=this;"boolean"==typeof e?(this.required instanceof a.V1ExpressionModel&&this.required.clearIssue(l.ErrorCode.ALL),this.required=!!e):this.required&&this.required instanceof a.V1ExpressionModel?this.required.setValue(e):(this.required=new a.V1ExpressionModel(e,this.loc+".required",this.eventHub),this.required.setValidationCallback(function(e){return t.updateValidity(e)}))},u.prototype.deserialize=function(e){var t="string"==typeof e,n=t?e.endsWith("?")?e.slice(0,-1):e:e.pattern||"";this.setPattern(n),n=t?!e.endsWith("?")&&this.defaultRequiredValue:void 0===e.required?this.defaultRequiredValue:e.required,this.setRequired(n)},u.prototype.serialize=function(){var e={};if(e.pattern=this.pattern.serialize(),e.required=this.required instanceof a.V1ExpressionModel?this.required.serialize():this.required,void 0!==e.pattern)return e},u);function u(e,t){e=o.call(this,e)||this;return e.eventHub=t,e}t.V1_1SecondaryFileSchemaModel=n;r(p,c=n);var c,s=p;function p(e,t,n){t=c.call(this,t,n)||this;return t.defaultRequiredValue=!0,t.deserialize(e),t}t.V1_1InputSecondaryFileSchemaModel=s;r(h,d=n);var d,s=h;function h(e,t,n){t=d.call(this,t,n)||this;return t.defaultRequiredValue=!1,t.deserialize(e),t}t.V1_1OutputSecondaryFileSchemaModel=s},251:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(2759)),a=n(9365),l=n(2455),n=(o=s.V1StepModel,r(u,o),u.prototype.createWorkflowStepInputModel=function(e,t){return new a.V1WorkflowStepInputModel(e,this,this.loc+".in["+t+"]",this.eventHub)},u.prototype.createWorkflowStepOutputModel=function(e,t){return new l.V1WorkflowStepOutputModel(e,this,this.loc+".out["+t+"]")},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.V1_1StepModel=n},4217:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(8219)),a=n(8668),l=n(2492),n=(o=s.ProcessRequirementModel,r(u,o),u.prototype.deserialize=function(e){var t=this,n=void 0!==e.timelimit&&null!==e.timelimit?e.timelimit:"";this.timelimit=new l.V1ExpressionModel(""+n,this.loc+".timelimit",this.eventHub),this.timelimit.setValidationCallback(function(e){return t.updateValidity(e)}),a.spreadSelectProps(e,this.customProps,["class","timelimit"])},u.prototype.serialize=function(){var e={},t=(e.class=this.class,this.timelimit.serialize());if(void 0!==t)return e.timelimit=a.returnNumIfNum(t),a.spreadAllProps(e,this.customProps)},u);function u(e,t,n){t=o.call(this,t)||this;return t.eventHub=n,t.class="ToolTimeLimit",e&&t.deserialize(e),t}t.V1_1ToolTimeLimitRequirementModel=n},1794:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1636)),a=n(8219),l=n(6310),u=n(8668),n=(o=a.ProcessRequirementModel,r(c,o),c.prototype.deserialize=function(e){var t=this,n=e.enableReuse;"string"==typeof n?(this.enableReuse=new l.V1ExpressionModel(n,this.loc+".enableReuse",this.eventHub),this.enableReuse.setValidationCallback(function(e){return t.updateValidity(e)})):this.enableReuse=null==n||!!n,u.spreadSelectProps(e,this.customProps,["class","enableReuse"])},c.prototype.serialize=function(){var e={};if(e.class=this.class,e.enableReuse=this.enableReuse instanceof s.ExpressionModel?this.enableReuse.serialize()||!0:!!this.enableReuse,!0!==e.enableReuse)return u.spreadAllProps(e,this.customProps)},c);function c(e,t,n){t=o.call(this,t)||this;return t.eventHub=n,t.class="WorkReuse",t.enableReuse=!0,e&&t.deserialize(e),t}t.V1_1WorkReuseRequirementModel=n},3385:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(7581)),a=n(8668),l=n(5097),u=n(4356),c=n(887),n=(o=u.V1WorkflowInputParameterModel,r(p,o),p.prototype.addSecondaryFile=function(e){var t=this,n=a.incrementLastLoc(this.secondaryFiles,this.loc+".secondaryFiles"),e=new s.V1_1InputSecondaryFileSchemaModel(e,n,this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.secondaryFiles.push(e),e},p.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},p.prototype.removeSecondaryFile=function(e){this.secondaryFiles[e]&&this.secondaryFiles.splice(e,1)},p.prototype.addParameter=function(e){var t=this;this.type=new c.ParameterTypeModel(e.type,p,this.id+"_field",this.loc+".type",this.eventHub),this.type.setValidationCallback(function(e){return t.updateValidity(e)})},p.prototype.serialize=function(){var e=o.prototype.serialize.call(this);return a.isType(this,["Directory"])?e.loadListing=""+this.loadListing:delete e.loadListing,e},p.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e),this.loadListing=new l.LoadListing(e.loadListing)},p);function p(){return null!==o&&o.apply(this,arguments)||this}t.V1_1WorkflowInputParameterModel=n},835:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(6458)),a=n(251),l=n(3385),u=n(6089),n=(o=s.V1WorkflowModel,r(c,o),c.prototype.createStepFromProcess=function(e,t){return new a.V1_1StepModel({in:[],out:[],run:e},t,this.eventHub)},c.prototype.createInputFromPort=function(e,t){return o.prototype._createInputFromPort.call(this,e,l.V1_1WorkflowInputParameterModel,void 0,void 0,t=void 0===t?{}:t)},c.prototype.createOutputFromPort=function(e,t){return o.prototype._createOutputFromPort.call(this,e,u.V1_1WorkflowOutputParameterModel,void 0,void 0,t=void 0===t?{}:t)},c.prototype.addInput=function(e,t){this.addEntry(new l.V1_1WorkflowInputParameterModel(e,this.loc+".inputs["+t+"]",this.eventHub),"inputs")},c.prototype.addOutput=function(e,t){this.addEntry(new u.V1_1WorkflowOutputParameterModel(e,this.loc+".outputs["+t+"]",this.eventHub),"outputs")},c.prototype.addStep=function(e,t){e.run&&"string"!=typeof e.run&&(e.run.cwlVersion=e.run.cwlVersion||"v1.1"),this.addEntry(new a.V1_1StepModel(e,this.loc+".steps["+t+"]",this.eventHub),"steps")},c.prototype.serializeEmbedded=function(e){return o.prototype.serializeEmbedded.call(this,e=void 0===e?!1:e)},c.prototype.serialize=function(){return this._serialize(!1)},c.prototype._serialize=function(e,t){e=o.prototype._serialize.call(this,e,t=void 0===t?!1:t);return e.cwlVersion=this.cwlVersion,this.inputs.concat(this.outputs).find(function(e){return e.type&&"Directory"===e.type.type})&&(e.requirements=e.requirements||[],e.requirements.find(function(e){return"LoadListingRequirement"===e.class})||e.requirements.push({class:"LoadListingRequirement"})),e},c.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e)},c);function c(e,t){e=o.call(this,e,t)||this;return e.cwlVersion="v1.1",e}t.V1_1WorkflowModel=n},6089:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(9307)),a=n(7581),l=n(8668),n=(o=s.V1WorkflowOutputParameterModel,r(u,o),u.prototype.addSecondaryFile=function(e){var t=this,n=l.incrementLastLoc(this.secondaryFiles,this.loc+".secondaryFiles"),e=new a.V1_1OutputSecondaryFileSchemaModel(e,n,this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.secondaryFiles.push(e),e},u.prototype.updateSecondaryFiles=function(e){this._updateSecondaryFiles(e)},u.prototype.removeSecondaryFile=function(e){this.secondaryFiles[e]&&this.secondaryFiles.splice(e,1)},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.V1_1WorkflowOutputParameterModel=n},6082:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(9365)),a=n(8668),l=n(5097),n=(o=s.V1WorkflowStepInputModel,r(u,o),u.prototype.serialize=function(){var e=o.prototype.serialize.call(this);return a.isType(this,["Directory"])?e.loadListing=""+this.loadListing:delete e.loadListing,e},u.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e),a.isType(this,["Directory"])&&(this.loadListing=new l.LoadListing(e.listing))},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.V1_1WorkflowStepInputModel=n},4416:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(6761)),a=n(1595),n=(o=s.V1_1CommandLineToolModel,r(l,o),l.prototype.createRequirement=function(e,t,n){return new a.V1_2ResourceRequirementModel(e,t,n)},l.prototype.serialize=function(){var e=o.prototype.serialize.call(this);return e.cwlVersion="v1.2",e},l);function l(){var e=null!==o&&o.apply(this,arguments)||this;return e.cwlVersion="v1.2",e}t.V1_2CommandLineToolModel=n},1595:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),n=(Object.defineProperty(t,"__esModule",{value:!0}),o=n(6780).V1ResourceRequirementModel,r(s,o),s);function s(){var e=null!==o&&o.apply(this,arguments)||this;return e.parseResourcesAsFloat=!0,e}t.V1_2ResourceRequirementModel=n},7991:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(2492)),a=n(251),l=n(7183),n=(o=a.V1_1StepModel,r(u,o),u.prototype.addWorkflowInput=function(e,t){return new l.V1_2WorkflowStepInputModel(e,this,this.loc+".in["+t+"]",this.eventHub)},u.prototype.createWorkflowStepInputModel=function(e,t){return new l.V1_2WorkflowStepInputModel(e,this,this.loc+".in["+t+"]",this.eventHub)},u.prototype.setRunCondition=function(e){var t=this;this.when=new s.V1ExpressionModel(e,this.loc+".when",this.eventHub),this.when.setValidationCallback(function(e){return t.updateValidity(e)})},u.prototype._serialize=function(e,t){e=o.prototype._serialize.call(this,e,t=void 0===t?!1:t),t=this.when.serialize();return t&&(e.when=t)||delete e.when,e},u.prototype.deserialize=function(e){var t=this,e=(o.prototype.deserialize.call(this,e),e.when);this.when=new s.V1ExpressionModel(""+(e||""),this.loc+".when",this.eventHub),this.when.setValidationCallback(function(e){return t.updateValidity(e)})},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.V1_2StepModel=n},1158:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(835)),a=n(7991),l=n(8161),n=(o=s.V1_1WorkflowModel,r(u,o),u.prototype.addStep=function(e,t){e.run&&"string"!=typeof e.run&&(e.run.cwlVersion=e.run.cwlVersion||"v1.2"),this.addEntry(new a.V1_2StepModel(e,this.loc+".steps["+t+"]",this.eventHub),"steps")},u.prototype.addOutput=function(e,t){this.addEntry(new l.V1_2WorkflowOutputParameterModel(e,this.loc+".outputs["+t+"]",this.eventHub),"outputs")},u.prototype.createOutputFromPort=function(e,t){return o.prototype._createOutputFromPort.call(this,e,l.V1_2WorkflowOutputParameterModel,void 0,void 0,t=void 0===t?{}:t)},u.prototype.createStepFromProcess=function(e,t){return new a.V1_2StepModel({in:[],out:[],run:e},t,this.eventHub)},u.prototype.addStepFromProcess=function(e){var t=this,n=this.loc+".steps["+this.steps.length+"]",e=new a.V1_2StepModel({in:[],out:[],run:e},n,this.eventHub);return e.setValidationCallback(function(e){return t.updateValidity(e)}),this.steps.push(e),e.id=this.getNextAvailableId(e.id),this.addStepToGraph(e),this.eventHub.emit("step.create",e),e},u.prototype._serialize=function(e,t){e=o.prototype._serialize.call(this,e,t=void 0===t?!1:t);return e.cwlVersion=this.cwlVersion,e},u);function u(e,t){e=o.call(this,e,t)||this;return e.cwlVersion="v1.2",e}t.V1_2WorkflowModel=n},8161:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(1581)),a=n(5007),n=(o=n(6089).V1_1WorkflowOutputParameterModel,r(l,o),l.prototype.serialize=function(){var e=o.prototype.serialize.call(this),t=((e.pickValue=this.pickValue.serialize())||delete e.pickValue,this.linkMerge&&this.linkMerge.serialize());return t&&(e.linkMerge=t),e},l.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e),this.linkMerge=new s.LinkMerge(e.linkMerge),this.pickValue=new a.PickValue(e.pickValue)},l);function l(){return null!==o&&o.apply(this,arguments)||this}t.V1_2WorkflowOutputParameterModel=n},7183:function(e,t,n){var i,o,r=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=(Object.defineProperty(t,"__esModule",{value:!0}),n(5007)),n=(o=n(6082).V1_1WorkflowStepInputModel,r(a,o),a.prototype.serialize=function(){var e=o.prototype.serialize.call(this);return(e.pickValue=this.pickValue.serialize())||delete e.pickValue,e},a.prototype.deserialize=function(e){o.prototype.deserialize.call(this,e),this.pickValue=new s.PickValue(e.pickValue)},a);function a(){return null!==o&&o.apply(this,arguments)||this}t.V1_2WorkflowStepInputModel=n},8635:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var t=n(3379),t=n.n(t),i=n(7795),i=n.n(i),o=n(569),o=n.n(o),r=n(3565),r=n.n(r),s=n(9216),s=n.n(s),a=n(4589),a=n.n(a),n=n(7665),l={};l.styleTagTransform=a(),l.setAttributes=r(),l.insert=o().bind(null,"head"),l.domAPI=i(),l.insertStyleElement=s(),t()(n.Z,l);const u=n.Z&&n.Z.locals?n.Z.locals:void 0},2405:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var t=n(3379),t=n.n(t),i=n(7795),i=n.n(i),o=n(569),o=n.n(o),r=n(3565),r=n.n(r),s=n(9216),s=n.n(s),a=n(4589),a=n.n(a),n=n(7728),l={};l.styleTagTransform=a(),l.setAttributes=r(),l.insert=o().bind(null,"head"),l.domAPI=i(),l.insertStyleElement=s(),t()(n.Z,l);const u=n.Z&&n.Z.locals?n.Z.locals:void 0},5090:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var t=n(3379),t=n.n(t),i=n(7795),i=n.n(i),o=n(569),o=n.n(o),r=n(3565),r=n.n(r),s=n(9216),s=n.n(s),a=n(4589),a=n.n(a),n=n(3371),l={};l.styleTagTransform=a(),l.setAttributes=r(),l.insert=o().bind(null,"head"),l.domAPI=i(),l.insertStyleElement=s(),t()(n.Z,l);const u=n.Z&&n.Z.locals?n.Z.locals:void 0},3379:e=>{var u=[];function c(e){for(var t=-1,n=0;n<u.length;n++)if(u[n].identifier===e){t=n;break}return t}function a(e,t){for(var n={},i=[],o=0;o<e.length;o++){var r=e[o],s=t.base?r[0]+t.base:r[0],a=n[s]||0,l="".concat(s," ").concat(a),s=(n[s]=a+1,c(l)),a={css:r[1],media:r[2],sourceMap:r[3],supports:r[4],layer:r[5]};-1!==s?(u[s].references++,u[s].updater(a)):(r=function(t,e){var n=e.domAPI(e);return n.update(t),function(e){e?e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer||n.update(t=e):n.remove()}}(a,t),t.byIndex=o,u.splice(o,0,{identifier:l,updater:r,references:1})),i.push(l)}return i}e.exports=function(e,r){var s=a(e=e||[],r=r||{});return function(e){e=e||[];for(var t=0;t<s.length;t++){var n=c(s[t]);u[n].references--}for(var e=a(e,r),i=0;i<s.length;i++){var o=c(s[i]);0===u[o].references&&(u[o].updater(),u.splice(o,1))}s=e}}},569:e=>{var n={};e.exports=function(e,t){e=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!e)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");e.appendChild(t)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(r){var s=r.insertStyleElement(r);return{update:function(e){var t,n,i,o;t=s,n=r,i="",(e=e).supports&&(i+="@supports (".concat(e.supports,") {")),e.media&&(i+="@media ".concat(e.media," {")),(o=void 0!==e.layer)&&(i+="@layer".concat(0<e.layer.length?" ".concat(e.layer):""," {")),i+=e.css,o&&(i+="}"),e.media&&(i+="}"),e.supports&&(i+="}"),(o=e.sourceMap)&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleTagTransform(i,t,n.options)},remove:function(){var e;null!==(e=s).parentNode&&e.parentNode.removeChild(e)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},i={};function o(e){var t=i[e];return void 0!==t||(t=i[e]={id:e,exports:{}},n[e].call(t.exports,t,t.exports,o)),t.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nc=void 0;var e={};{function t(){var e=this.$createElement;return(this._self._c||e)("svg",{ref:"svg",staticClass:"cwl-workflow"})}o.r(e),o.d(e,{__esModule:()=>r.X,default:()=>y}),t._withStripped=!0;var r=o(985),s=r.Z,a=o(3379),a=o.n(a),l=o(7795),l=o.n(l),u=o(569),u=o.n(u),c=o(3565),c=o.n(c),p=o(9216),p=o.n(p),d=o(4589),d=o.n(d),h=o(306),f={};f.styleTagTransform=d(),f.setAttributes=c(),f.insert=u().bind(null,"head"),f.domAPI=l(),f.insertStyleElement=p(),a()(h.Z,f),h.Z&&h.Z.locals&&h.Z.locals,d=t,(u="function"==typeof(c=s)?c.options:c).render=d,u.staticRenderFns=[],u._compiled=!0;const y={exports:c,options:u}.exports}return e})());
